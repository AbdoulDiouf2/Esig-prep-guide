var w2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var K5=w2((nD,H1)=>{function _2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function b2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xv={exports:{}},Lc={},wv={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),E2=Symbol.for("react.portal"),N2=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),I2=Symbol.for("react.profiler"),S2=Symbol.for("react.provider"),j2=Symbol.for("react.context"),A2=Symbol.for("react.forward_ref"),k2=Symbol.for("react.suspense"),C2=Symbol.for("react.memo"),P2=Symbol.for("react.lazy"),wg=Symbol.iterator;function R2(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var _v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bv=Object.assign,Ev={};function Si(t,e,n){this.props=t,this.context=e,this.refs=Ev,this.updater=n||_v}Si.prototype.isReactComponent={};Si.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Si.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nv(){}Nv.prototype=Si.prototype;function yf(t,e,n){this.props=t,this.context=e,this.refs=Ev,this.updater=n||_v}var vf=yf.prototype=new Nv;vf.constructor=yf;bv(vf,Si.prototype);vf.isPureReactComponent=!0;var _g=Array.isArray,Tv=Object.prototype.hasOwnProperty,xf={current:null},Iv={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Tv.call(e,r)&&!Iv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ha,type:t,key:i,ref:a,props:s,_owner:xf.current}}function D2(t,e){return{$$typeof:ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ha}function L2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bg=/\/+/g;function Bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L2(""+t.key):e.toString(36)}function yl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ha:case E2:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Bu(a,0):r,_g(s)?(n="",t!=null&&(n=t.replace(bg,"$&/")+"/"),yl(s,e,n,"",function(d){return d})):s!=null&&(wf(s)&&(s=D2(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",_g(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Bu(i,c);a+=yl(i,e,n,u,s)}else if(u=R2(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Bu(i,c++),a+=yl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wa(t,e,n){if(t==null)return t;var r=[],s=0;return yl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function M2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},vl={transition:null},V2={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:vl,ReactCurrentOwner:xf};function jv(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Wa,forEach:function(t,e,n){Wa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wa(t,function(){e++}),e},toArray:function(t){return Wa(t,function(e){return e})||[]},only:function(t){if(!wf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Si;se.Fragment=N2;se.Profiler=I2;se.PureComponent=yf;se.StrictMode=T2;se.Suspense=k2;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V2;se.act=jv;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=xf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Tv.call(e,u)&&!Iv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ha,type:t.type,key:s,ref:i,props:r,_owner:a}};se.createContext=function(t){return t={$$typeof:j2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S2,_context:t},t.Consumer=t};se.createElement=Sv;se.createFactory=function(t){var e=Sv.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:A2,render:t}};se.isValidElement=wf;se.lazy=function(t){return{$$typeof:P2,_payload:{_status:-1,_result:t},_init:M2}};se.memo=function(t,e){return{$$typeof:C2,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=vl.transition;vl.transition={};try{t()}finally{vl.transition=e}};se.unstable_act=jv;se.useCallback=function(t,e){return _t.current.useCallback(t,e)};se.useContext=function(t){return _t.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};se.useEffect=function(t,e){return _t.current.useEffect(t,e)};se.useId=function(){return _t.current.useId()};se.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return _t.current.useMemo(t,e)};se.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};se.useRef=function(t){return _t.current.useRef(t)};se.useState=function(t){return _t.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return _t.current.useTransition()};se.version="18.3.1";wv.exports=se;var C=wv.exports;const Mc=b2(C),O2=_2({__proto__:null,default:Mc},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=C,U2=Symbol.for("react.element"),q2=Symbol.for("react.fragment"),z2=Object.prototype.hasOwnProperty,B2=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$2={key:!0,ref:!0,__self:!0,__source:!0};function Av(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)z2.call(e,r)&&!$2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:U2,type:t,key:i,ref:a,props:s,_owner:B2.current}}Lc.Fragment=q2;Lc.jsx=Av;Lc.jsxs=Av;xv.exports=Lc;var o=xv.exports,kv={exports:{}},Ut={},Cv={exports:{}},Pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var X=B.length;B.push(W);e:for(;0<X;){var he=X-1>>>1,ge=B[he];if(0<s(ge,W))B[he]=W,B[X]=ge,X=he;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],X=B.pop();if(X!==W){B[0]=X;e:for(var he=0,ge=B.length,_e=ge>>>1;he<_e;){var Nt=2*(he+1)-1,Zt=B[Nt],en=Nt+1,tn=B[en];if(0>s(Zt,X))en<ge&&0>s(tn,Zt)?(B[he]=tn,B[en]=X,he=en):(B[he]=Zt,B[Nt]=X,he=Nt);else if(en<ge&&0>s(tn,X))B[he]=tn,B[en]=X,he=en;else break e}}return W}function s(B,W){var X=B.sortIndex-W.sortIndex;return X!==0?X:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,m=null,g=3,_=!1,S=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(B){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=B)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function L(B){if(k=!1,T(B),!S)if(n(u)!==null)S=!0,$e(D);else{var W=n(d);W!==null&&H(L,W.startTime-B)}}function D(B,W){S=!1,k&&(k=!1,E(y),y=-1),_=!0;var X=g;try{for(T(W),m=n(u);m!==null&&(!(m.expirationTime>W)||B&&!A());){var he=m.callback;if(typeof he=="function"){m.callback=null,g=m.priorityLevel;var ge=he(m.expirationTime<=W);W=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(u)&&r(u),T(W)}else r(u);m=n(u)}if(m!==null)var _e=!0;else{var Nt=n(d);Nt!==null&&H(L,Nt.startTime-W),_e=!1}return _e}finally{m=null,g=X,_=!1}}var V=!1,N=null,y=-1,v=5,x=-1;function A(){return!(t.unstable_now()-x<v)}function P(){if(N!==null){var B=t.unstable_now();x=B;var W=!0;try{W=N(!0,B)}finally{W?j():(V=!1,N=null)}}else V=!1}var j;if(typeof b=="function")j=function(){b(P)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,pe=le.port2;le.port1.onmessage=P,j=function(){pe.postMessage(null)}}else j=function(){R(P,0)};function $e(B){N=B,V||(V=!0,j())}function H(B,W){y=R(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){S||_||(S=!0,$e(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var X=g;g=W;try{return B()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=g;g=B;try{return W()}finally{g=X}},t.unstable_scheduleCallback=function(B,W,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,B){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=X+ge,B={id:f++,callback:W,priorityLevel:B,startTime:X,expirationTime:ge,sortIndex:-1},X>he?(B.sortIndex=X,e(d,B),n(u)===null&&B===n(d)&&(k?(E(y),y=-1):k=!0,H(L,X-he))):(B.sortIndex=ge,e(u,B),S||_||(S=!0,$e(D))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var W=g;return function(){var X=g;g=W;try{return B.apply(this,arguments)}finally{g=X}}}})(Pv);Cv.exports=Pv;var H2=Cv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=C,Ft=H2;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rv=new Set,Do={};function Es(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(Do[t]=e,t=0;t<e.length;t++)Rv.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zd=Object.prototype.hasOwnProperty,G2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eg={},Ng={};function Q2(t){return zd.call(Ng,t)?!0:zd.call(Eg,t)?!1:G2.test(t)?Ng[t]=!0:(Eg[t]=!0,!1)}function K2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y2(t,e,n,r){if(e===null||typeof e>"u"||K2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _f=/[\-:]([a-z])/g;function bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_f,bf);tt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_f,bf);tt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_f,bf);tt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ef(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y2(e,n,s,r)&&(n=null),r||s===null?Q2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=W2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ga=Symbol.for("react.element"),zs=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),Bd=Symbol.for("react.profiler"),Dv=Symbol.for("react.provider"),Lv=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),$d=Symbol.for("react.suspense"),Hd=Symbol.for("react.suspense_list"),If=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),Mv=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function Xi(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,$u;function ao(t){if($u===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$u=e&&e[1]||""}return`
`+$u+t}var Hu=!1;function Wu(t,e){if(!t||Hu)return"";Hu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Hu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ao(t):""}function J2(t){switch(t.tag){case 5:return ao(t.type);case 16:return ao("Lazy");case 13:return ao("Suspense");case 19:return ao("SuspenseList");case 0:case 2:case 15:return t=Wu(t.type,!1),t;case 11:return t=Wu(t.type.render,!1),t;case 1:return t=Wu(t.type,!0),t;default:return""}}function Wd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case zs:return"Portal";case Bd:return"Profiler";case Nf:return"StrictMode";case $d:return"Suspense";case Hd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lv:return(t.displayName||"Context")+".Consumer";case Dv:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case If:return e=t.displayName||null,e!==null?e:Wd(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return Wd(t(e))}catch{}}return null}function X2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wd(e);case 8:return e===Nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z2(t){var e=Vv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qa(t){t._valueTracker||(t._valueTracker=Z2(t))}function Ov(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gd(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ig(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fv(t,e){e=e.checked,e!=null&&Ef(t,"checked",e,!1)}function Qd(t,e){Fv(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kd(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kd(t,e,n){(e!=="number"||ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lo=Array.isArray;function ti(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Yd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(lo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function Uv(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ag(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ka,zv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ka=Ka||document.createElement("div"),Ka.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ka.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eE=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(t){eE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xo[e]=xo[t]})});function Bv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xo.hasOwnProperty(t)&&xo[t]?(""+e).trim():e+"px"}function $v(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Bv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var tE=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xd(t,e){if(e){if(tE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=null;function Sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var th=null,ni=null,ri=null;function kg(t){if(t=pa(t)){if(typeof th!="function")throw Error(z(280));var e=t.stateNode;e&&(e=qc(e),th(t.stateNode,t.type,e))}}function Hv(t){ni?ri?ri.push(t):ri=[t]:ni=t}function Wv(){if(ni){var t=ni,e=ri;if(ri=ni=null,kg(t),e)for(t=0;t<e.length;t++)kg(e[t])}}function Gv(t,e){return t(e)}function Qv(){}var Gu=!1;function Kv(t,e,n){if(Gu)return t(e,n);Gu=!0;try{return Gv(t,e,n)}finally{Gu=!1,(ni!==null||ri!==null)&&(Qv(),Wv())}}function Mo(t,e){var n=t.stateNode;if(n===null)return null;var r=qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var nh=!1;if(Wn)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){nh=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{nh=!1}function nE(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var wo=!1,zl=null,Bl=!1,rh=null,rE={onError:function(t){wo=!0,zl=t}};function sE(t,e,n,r,s,i,a,c,u){wo=!1,zl=null,nE.apply(rE,arguments)}function iE(t,e,n,r,s,i,a,c,u){if(sE.apply(this,arguments),wo){if(wo){var d=zl;wo=!1,zl=null}else throw Error(z(198));Bl||(Bl=!0,rh=d)}}function Ns(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(Ns(t)!==t)throw Error(z(188))}function oE(t){var e=t.alternate;if(!e){if(e=Ns(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Cg(s),t;if(i===r)return Cg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Jv(t){return t=oE(t),t!==null?Xv(t):null}function Xv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xv(t);if(e!==null)return e;t=t.sibling}return null}var Zv=Ft.unstable_scheduleCallback,Pg=Ft.unstable_cancelCallback,aE=Ft.unstable_shouldYield,lE=Ft.unstable_requestPaint,Le=Ft.unstable_now,cE=Ft.unstable_getCurrentPriorityLevel,jf=Ft.unstable_ImmediatePriority,ex=Ft.unstable_UserBlockingPriority,$l=Ft.unstable_NormalPriority,uE=Ft.unstable_LowPriority,tx=Ft.unstable_IdlePriority,Vc=null,En=null;function dE(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Vc,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:mE,hE=Math.log,fE=Math.LN2;function mE(t){return t>>>=0,t===0?32:31-(hE(t)/fE|0)|0}var Ya=64,Ja=4194304;function co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=co(c):(i&=a,i!==0&&(r=co(i)))}else a=n&~s,a!==0?r=co(a):i!==0&&(r=co(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),s=1<<n,r|=t[n],e&=~s;return r}function pE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-cn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=pE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function sh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nx(){var t=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),t}function Qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function yE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function rx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sx,kf,ix,ox,ax,ih=!1,Xa=[],wr=null,_r=null,br=null,Vo=new Map,Oo=new Map,dr=[],vE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rg(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(e.pointerId)}}function eo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pa(e),e!==null&&kf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xE(t,e,n,r,s){switch(e){case"focusin":return wr=eo(wr,t,e,n,r,s),!0;case"dragenter":return _r=eo(_r,t,e,n,r,s),!0;case"mouseover":return br=eo(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vo.set(i,eo(Vo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Oo.set(i,eo(Oo.get(i)||null,t,e,n,r,s)),!0}return!1}function lx(t){var e=Zr(t.target);if(e!==null){var n=Ns(e);if(n!==null){if(e=n.tag,e===13){if(e=Yv(n),e!==null){t.blockedOn=e,ax(t.priority,function(){ix(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);eh=r,n.target.dispatchEvent(r),eh=null}else return e=pa(n),e!==null&&kf(e),t.blockedOn=n,!1;e.shift()}return!0}function Dg(t,e,n){xl(t)&&n.delete(e)}function wE(){ih=!1,wr!==null&&xl(wr)&&(wr=null),_r!==null&&xl(_r)&&(_r=null),br!==null&&xl(br)&&(br=null),Vo.forEach(Dg),Oo.forEach(Dg)}function to(t,e){t.blockedOn===e&&(t.blockedOn=null,ih||(ih=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,wE)))}function Fo(t){function e(s){return to(s,t)}if(0<Xa.length){to(Xa[0],t);for(var n=1;n<Xa.length;n++){var r=Xa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&to(wr,t),_r!==null&&to(_r,t),br!==null&&to(br,t),Vo.forEach(e),Oo.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)lx(n),n.blockedOn===null&&dr.shift()}var si=er.ReactCurrentBatchConfig,Wl=!0;function _E(t,e,n,r){var s=ye,i=si.transition;si.transition=null;try{ye=1,Cf(t,e,n,r)}finally{ye=s,si.transition=i}}function bE(t,e,n,r){var s=ye,i=si.transition;si.transition=null;try{ye=4,Cf(t,e,n,r)}finally{ye=s,si.transition=i}}function Cf(t,e,n,r){if(Wl){var s=oh(t,e,n,r);if(s===null)sd(t,e,r,Gl,n),Rg(t,r);else if(xE(s,t,e,n,r))r.stopPropagation();else if(Rg(t,r),e&4&&-1<vE.indexOf(t)){for(;s!==null;){var i=pa(s);if(i!==null&&sx(i),i=oh(t,e,n,r),i===null&&sd(t,e,r,Gl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sd(t,e,r,null,n)}}var Gl=null;function oh(t,e,n,r){if(Gl=null,t=Sf(r),t=Zr(t),t!==null)if(e=Ns(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gl=t,null}function cx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cE()){case jf:return 1;case ex:return 4;case $l:case uE:return 16;case tx:return 536870912;default:return 16}default:return 16}}var gr=null,Pf=null,wl=null;function ux(){if(wl)return wl;var t,e=Pf,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return wl=s.slice(t,1<r?1-r:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Za(){return!0}function Lg(){return!1}function qt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Za:Lg,this.isPropagationStopped=Lg,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),e}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rf=qt(ji),ma=ke({},ji,{view:0,detail:0}),EE=qt(ma),Ku,Yu,no,Oc=ke({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Df,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==no&&(no&&t.type==="mousemove"?(Ku=t.screenX-no.screenX,Yu=t.screenY-no.screenY):Yu=Ku=0,no=t),Ku)},movementY:function(t){return"movementY"in t?t.movementY:Yu}}),Mg=qt(Oc),NE=ke({},Oc,{dataTransfer:0}),TE=qt(NE),IE=ke({},ma,{relatedTarget:0}),Ju=qt(IE),SE=ke({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),jE=qt(SE),AE=ke({},ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kE=qt(AE),CE=ke({},ji,{data:0}),Vg=qt(CE),PE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DE[t])?!!e[t]:!1}function Df(){return LE}var ME=ke({},ma,{key:function(t){if(t.key){var e=PE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Df,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VE=qt(ME),OE=ke({},Oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=qt(OE),FE=ke({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Df}),UE=qt(FE),qE=ke({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),zE=qt(qE),BE=ke({},Oc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$E=qt(BE),HE=[9,13,27,32],Lf=Wn&&"CompositionEvent"in window,_o=null;Wn&&"documentMode"in document&&(_o=document.documentMode);var WE=Wn&&"TextEvent"in window&&!_o,dx=Wn&&(!Lf||_o&&8<_o&&11>=_o),Fg=" ",Ug=!1;function hx(t,e){switch(t){case"keyup":return HE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $s=!1;function GE(t,e){switch(t){case"compositionend":return fx(e);case"keypress":return e.which!==32?null:(Ug=!0,Fg);case"textInput":return t=e.data,t===Fg&&Ug?null:t;default:return null}}function QE(t,e){if($s)return t==="compositionend"||!Lf&&hx(t,e)?(t=ux(),wl=Pf=gr=null,$s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dx&&e.locale!=="ko"?null:e.data;default:return null}}var KE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KE[t.type]:e==="textarea"}function mx(t,e,n,r){Hv(r),e=Ql(e,"onChange"),0<e.length&&(n=new Rf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bo=null,Uo=null;function YE(t){Tx(t,0)}function Fc(t){var e=Gs(t);if(Ov(e))return t}function JE(t,e){if(t==="change")return e}var px=!1;if(Wn){var Xu;if(Wn){var Zu="oninput"in document;if(!Zu){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),Zu=typeof zg.oninput=="function"}Xu=Zu}else Xu=!1;px=Xu&&(!document.documentMode||9<document.documentMode)}function Bg(){bo&&(bo.detachEvent("onpropertychange",gx),Uo=bo=null)}function gx(t){if(t.propertyName==="value"&&Fc(Uo)){var e=[];mx(e,Uo,t,Sf(t)),Kv(YE,e)}}function XE(t,e,n){t==="focusin"?(Bg(),bo=e,Uo=n,bo.attachEvent("onpropertychange",gx)):t==="focusout"&&Bg()}function ZE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fc(Uo)}function eN(t,e){if(t==="click")return Fc(e)}function tN(t,e){if(t==="input"||t==="change")return Fc(e)}function nN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:nN;function qo(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zd.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hg(t,e){var n=$g(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$g(n)}}function yx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vx(){for(var t=window,e=ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ql(t.document)}return e}function Mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rN(t){var e=vx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yx(n.ownerDocument.documentElement,n)){if(r!==null&&Mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Hg(n,i);var a=Hg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sN=Wn&&"documentMode"in document&&11>=document.documentMode,Hs=null,ah=null,Eo=null,lh=!1;function Wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lh||Hs==null||Hs!==ql(r)||(r=Hs,"selectionStart"in r&&Mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eo&&qo(Eo,r)||(Eo=r,r=Ql(ah,"onSelect"),0<r.length&&(e=new Rf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function el(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},ed={},xx={};Wn&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Uc(t){if(ed[t])return ed[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xx)return ed[t]=e[n];return t}var wx=Uc("animationend"),_x=Uc("animationiteration"),bx=Uc("animationstart"),Ex=Uc("transitionend"),Nx=new Map,Gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){Nx.set(t,e),Es(e,[t])}for(var td=0;td<Gg.length;td++){var nd=Gg[td],iN=nd.toLowerCase(),oN=nd[0].toUpperCase()+nd.slice(1);Vr(iN,"on"+oN)}Vr(wx,"onAnimationEnd");Vr(_x,"onAnimationIteration");Vr(bx,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(Ex,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aN=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function Qg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iE(r,e,void 0,t),t.currentTarget=null}function Tx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Qg(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Qg(s,c,d),i=u}}}if(Bl)throw t=rh,Bl=!1,rh=null,t}function Ee(t,e){var n=e[fh];n===void 0&&(n=e[fh]=new Set);var r=t+"__bubble";n.has(r)||(Ix(e,t,2,!1),n.add(r))}function rd(t,e,n){var r=0;e&&(r|=4),Ix(n,t,r,e)}var tl="_reactListening"+Math.random().toString(36).slice(2);function zo(t){if(!t[tl]){t[tl]=!0,Rv.forEach(function(n){n!=="selectionchange"&&(aN.has(n)||rd(n,!1,t),rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tl]||(e[tl]=!0,rd("selectionchange",!1,e))}}function Ix(t,e,n,r){switch(cx(e)){case 1:var s=_E;break;case 4:s=bE;break;default:s=Cf}n=s.bind(null,e,n,t),s=void 0,!nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Zr(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Kv(function(){var d=i,f=Sf(n),m=[];e:{var g=Nx.get(t);if(g!==void 0){var _=Rf,S=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":_=VE;break;case"focusin":S="focus",_=Ju;break;case"focusout":S="blur",_=Ju;break;case"beforeblur":case"afterblur":_=Ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=TE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=UE;break;case wx:case _x:case bx:_=jE;break;case Ex:_=zE;break;case"scroll":_=EE;break;case"wheel":_=$E;break;case"copy":case"cut":case"paste":_=kE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Og}var k=(e&4)!==0,R=!k&&t==="scroll",E=k?g!==null?g+"Capture":null:g;k=[];for(var b=d,T;b!==null;){T=b;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,E!==null&&(L=Mo(b,E),L!=null&&k.push(Bo(b,L,T)))),R)break;b=b.return}0<k.length&&(g=new _(g,S,null,n,f),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==eh&&(S=n.relatedTarget||n.fromElement)&&(Zr(S)||S[Gn]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(S=n.relatedTarget||n.toElement,_=d,S=S?Zr(S):null,S!==null&&(R=Ns(S),S!==R||S.tag!==5&&S.tag!==6)&&(S=null)):(_=null,S=d),_!==S)){if(k=Mg,L="onMouseLeave",E="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(k=Og,L="onPointerLeave",E="onPointerEnter",b="pointer"),R=_==null?g:Gs(_),T=S==null?g:Gs(S),g=new k(L,b+"leave",_,n,f),g.target=R,g.relatedTarget=T,L=null,Zr(f)===d&&(k=new k(E,b+"enter",S,n,f),k.target=T,k.relatedTarget=R,L=k),R=L,_&&S)t:{for(k=_,E=S,b=0,T=k;T;T=Os(T))b++;for(T=0,L=E;L;L=Os(L))T++;for(;0<b-T;)k=Os(k),b--;for(;0<T-b;)E=Os(E),T--;for(;b--;){if(k===E||E!==null&&k===E.alternate)break t;k=Os(k),E=Os(E)}k=null}else k=null;_!==null&&Kg(m,g,_,k,!1),S!==null&&R!==null&&Kg(m,R,S,k,!0)}}e:{if(g=d?Gs(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var D=JE;else if(qg(g))if(px)D=tN;else{D=ZE;var V=XE}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=eN);if(D&&(D=D(t,d))){mx(m,D,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Kd(g,"number",g.value)}switch(V=d?Gs(d):window,t){case"focusin":(qg(V)||V.contentEditable==="true")&&(Hs=V,ah=d,Eo=null);break;case"focusout":Eo=ah=Hs=null;break;case"mousedown":lh=!0;break;case"contextmenu":case"mouseup":case"dragend":lh=!1,Wg(m,n,f);break;case"selectionchange":if(sN)break;case"keydown":case"keyup":Wg(m,n,f)}var N;if(Lf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $s?hx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(dx&&n.locale!=="ko"&&($s||y!=="onCompositionStart"?y==="onCompositionEnd"&&$s&&(N=ux()):(gr=f,Pf="value"in gr?gr.value:gr.textContent,$s=!0)),V=Ql(d,y),0<V.length&&(y=new Vg(y,t,null,n,f),m.push({event:y,listeners:V}),N?y.data=N:(N=fx(n),N!==null&&(y.data=N)))),(N=WE?GE(t,n):QE(t,n))&&(d=Ql(d,"onBeforeInput"),0<d.length&&(f=new Vg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=N))}Tx(m,e)})}function Bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ql(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Mo(t,n),i!=null&&r.unshift(Bo(t,i,s)),i=Mo(t,e),i!=null&&r.push(Bo(t,i,s))),t=t.return}return r}function Os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Mo(n,i),u!=null&&a.unshift(Bo(n,u,c))):s||(u=Mo(n,i),u!=null&&a.push(Bo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var lN=/\r\n?/g,cN=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(lN,`
`).replace(cN,"")}function nl(t,e,n){if(e=Yg(e),Yg(t)!==e&&n)throw Error(z(425))}function Kl(){}var ch=null,uh=null;function dh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,uN=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,dN=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(t){return Jg.resolve(null).then(t).catch(hN)}:hh;function hN(t){setTimeout(function(){throw t})}function id(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fo(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),bn="__reactFiber$"+Ai,$o="__reactProps$"+Ai,Gn="__reactContainer$"+Ai,fh="__reactEvents$"+Ai,fN="__reactListeners$"+Ai,mN="__reactHandles$"+Ai;function Zr(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[bn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function pa(t){return t=t[bn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function qc(t){return t[$o]||null}var mh=[],Qs=-1;function Or(t){return{current:t}}function Te(t){0>Qs||(t.current=mh[Qs],mh[Qs]=null,Qs--)}function we(t,e){Qs++,mh[Qs]=t.current,t.current=e}var Rr={},ft=Or(Rr),jt=Or(!1),cs=Rr;function mi(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function Yl(){Te(jt),Te(ft)}function Zg(t,e,n){if(ft.current!==Rr)throw Error(z(168));we(ft,e),we(jt,n)}function Sx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,X2(t)||"Unknown",s));return ke({},n,r)}function Jl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,cs=ft.current,we(ft,t),we(jt,jt.current),!0}function e0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Sx(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Te(jt),Te(ft),we(ft,t)):Te(jt),we(jt,n)}var Rn=null,zc=!1,od=!1;function jx(t){Rn===null?Rn=[t]:Rn.push(t)}function pN(t){zc=!0,jx(t)}function Fr(){if(!od&&Rn!==null){od=!0;var t=0,e=ye;try{var n=Rn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,zc=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),Zv(jf,Fr),s}finally{ye=e,od=!1}}return null}var Ks=[],Ys=0,Xl=null,Zl=0,$t=[],Ht=0,us=null,Vn=1,On="";function Yr(t,e){Ks[Ys++]=Zl,Ks[Ys++]=Xl,Xl=t,Zl=e}function Ax(t,e,n){$t[Ht++]=Vn,$t[Ht++]=On,$t[Ht++]=us,us=t;var r=Vn;t=On;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var i=32-cn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Vn=1<<32-cn(e)+s|n<<s|r,On=i+t}else Vn=1<<i|n<<s|r,On=t}function Vf(t){t.return!==null&&(Yr(t,1),Ax(t,1,0))}function Of(t){for(;t===Xl;)Xl=Ks[--Ys],Ks[Ys]=null,Zl=Ks[--Ys],Ks[Ys]=null;for(;t===us;)us=$t[--Ht],$t[Ht]=null,On=$t[--Ht],$t[Ht]=null,Vn=$t[--Ht],$t[Ht]=null}var Vt=null,Lt=null,Ie=!1,an=null;function kx(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Lt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:Vn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Lt=null,!0):!1;default:return!1}}function ph(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gh(t){if(Ie){var e=Lt;if(e){var n=e;if(!t0(t,e)){if(ph(t))throw Error(z(418));e=Er(n.nextSibling);var r=Vt;e&&t0(t,e)?kx(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Vt=t)}}else{if(ph(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ie=!1,Vt=t}}}function n0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function rl(t){if(t!==Vt)return!1;if(!Ie)return n0(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dh(t.type,t.memoizedProps)),e&&(e=Lt)){if(ph(t))throw Cx(),Error(z(418));for(;e;)kx(t,e),e=Er(e.nextSibling)}if(n0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Vt?Er(t.stateNode.nextSibling):null;return!0}function Cx(){for(var t=Lt;t;)t=Er(t.nextSibling)}function pi(){Lt=Vt=null,Ie=!1}function Ff(t){an===null?an=[t]:an.push(t)}var gN=er.ReactCurrentBatchConfig;function ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function sl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r0(t){var e=t._init;return e(t._payload)}function Px(t){function e(E,b){if(t){var T=E.deletions;T===null?(E.deletions=[b],E.flags|=16):T.push(b)}}function n(E,b){if(!t)return null;for(;b!==null;)e(E,b),b=b.sibling;return null}function r(E,b){for(E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function s(E,b){return E=Sr(E,b),E.index=0,E.sibling=null,E}function i(E,b,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<b?(E.flags|=2,b):T):(E.flags|=2,b)):(E.flags|=1048576,b)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,b,T,L){return b===null||b.tag!==6?(b=fd(T,E.mode,L),b.return=E,b):(b=s(b,T),b.return=E,b)}function u(E,b,T,L){var D=T.type;return D===Bs?f(E,b,T.props.children,L,T.key):b!==null&&(b.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&r0(D)===b.type)?(L=s(b,T.props),L.ref=ro(E,b,T),L.return=E,L):(L=jl(T.type,T.key,T.props,null,E.mode,L),L.ref=ro(E,b,T),L.return=E,L)}function d(E,b,T,L){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=md(T,E.mode,L),b.return=E,b):(b=s(b,T.children||[]),b.return=E,b)}function f(E,b,T,L,D){return b===null||b.tag!==7?(b=os(T,E.mode,L,D),b.return=E,b):(b=s(b,T),b.return=E,b)}function m(E,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fd(""+b,E.mode,T),b.return=E,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ga:return T=jl(b.type,b.key,b.props,null,E.mode,T),T.ref=ro(E,null,b),T.return=E,T;case zs:return b=md(b,E.mode,T),b.return=E,b;case cr:var L=b._init;return m(E,L(b._payload),T)}if(lo(b)||Xi(b))return b=os(b,E.mode,T,null),b.return=E,b;sl(E,b)}return null}function g(E,b,T,L){var D=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:c(E,b,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ga:return T.key===D?u(E,b,T,L):null;case zs:return T.key===D?d(E,b,T,L):null;case cr:return D=T._init,g(E,b,D(T._payload),L)}if(lo(T)||Xi(T))return D!==null?null:f(E,b,T,L,null);sl(E,T)}return null}function _(E,b,T,L,D){if(typeof L=="string"&&L!==""||typeof L=="number")return E=E.get(T)||null,c(b,E,""+L,D);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Ga:return E=E.get(L.key===null?T:L.key)||null,u(b,E,L,D);case zs:return E=E.get(L.key===null?T:L.key)||null,d(b,E,L,D);case cr:var V=L._init;return _(E,b,T,V(L._payload),D)}if(lo(L)||Xi(L))return E=E.get(T)||null,f(b,E,L,D,null);sl(b,L)}return null}function S(E,b,T,L){for(var D=null,V=null,N=b,y=b=0,v=null;N!==null&&y<T.length;y++){N.index>y?(v=N,N=null):v=N.sibling;var x=g(E,N,T[y],L);if(x===null){N===null&&(N=v);break}t&&N&&x.alternate===null&&e(E,N),b=i(x,b,y),V===null?D=x:V.sibling=x,V=x,N=v}if(y===T.length)return n(E,N),Ie&&Yr(E,y),D;if(N===null){for(;y<T.length;y++)N=m(E,T[y],L),N!==null&&(b=i(N,b,y),V===null?D=N:V.sibling=N,V=N);return Ie&&Yr(E,y),D}for(N=r(E,N);y<T.length;y++)v=_(N,E,y,T[y],L),v!==null&&(t&&v.alternate!==null&&N.delete(v.key===null?y:v.key),b=i(v,b,y),V===null?D=v:V.sibling=v,V=v);return t&&N.forEach(function(A){return e(E,A)}),Ie&&Yr(E,y),D}function k(E,b,T,L){var D=Xi(T);if(typeof D!="function")throw Error(z(150));if(T=D.call(T),T==null)throw Error(z(151));for(var V=D=null,N=b,y=b=0,v=null,x=T.next();N!==null&&!x.done;y++,x=T.next()){N.index>y?(v=N,N=null):v=N.sibling;var A=g(E,N,x.value,L);if(A===null){N===null&&(N=v);break}t&&N&&A.alternate===null&&e(E,N),b=i(A,b,y),V===null?D=A:V.sibling=A,V=A,N=v}if(x.done)return n(E,N),Ie&&Yr(E,y),D;if(N===null){for(;!x.done;y++,x=T.next())x=m(E,x.value,L),x!==null&&(b=i(x,b,y),V===null?D=x:V.sibling=x,V=x);return Ie&&Yr(E,y),D}for(N=r(E,N);!x.done;y++,x=T.next())x=_(N,E,y,x.value,L),x!==null&&(t&&x.alternate!==null&&N.delete(x.key===null?y:x.key),b=i(x,b,y),V===null?D=x:V.sibling=x,V=x);return t&&N.forEach(function(P){return e(E,P)}),Ie&&Yr(E,y),D}function R(E,b,T,L){if(typeof T=="object"&&T!==null&&T.type===Bs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ga:e:{for(var D=T.key,V=b;V!==null;){if(V.key===D){if(D=T.type,D===Bs){if(V.tag===7){n(E,V.sibling),b=s(V,T.props.children),b.return=E,E=b;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&r0(D)===V.type){n(E,V.sibling),b=s(V,T.props),b.ref=ro(E,V,T),b.return=E,E=b;break e}n(E,V);break}else e(E,V);V=V.sibling}T.type===Bs?(b=os(T.props.children,E.mode,L,T.key),b.return=E,E=b):(L=jl(T.type,T.key,T.props,null,E.mode,L),L.ref=ro(E,b,T),L.return=E,E=L)}return a(E);case zs:e:{for(V=T.key;b!==null;){if(b.key===V)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(E,b.sibling),b=s(b,T.children||[]),b.return=E,E=b;break e}else{n(E,b);break}else e(E,b);b=b.sibling}b=md(T,E.mode,L),b.return=E,E=b}return a(E);case cr:return V=T._init,R(E,b,V(T._payload),L)}if(lo(T))return S(E,b,T,L);if(Xi(T))return k(E,b,T,L);sl(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(n(E,b.sibling),b=s(b,T),b.return=E,E=b):(n(E,b),b=fd(T,E.mode,L),b.return=E,E=b),a(E)):n(E,b)}return R}var gi=Px(!0),Rx=Px(!1),ec=Or(null),tc=null,Js=null,Uf=null;function qf(){Uf=Js=tc=null}function zf(t){var e=ec.current;Te(ec),t._currentValue=e}function yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ii(t,e){tc=t,Uf=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Uf!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if(tc===null)throw Error(z(308));Js=t,tc.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var es=null;function Bf(t){es===null?es=[t]:es.push(t)}function Dx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function $f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,Bf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function s0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nc(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,_=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,k=c;switch(g=e,_=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){m=S.call(_,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,g=typeof S=="function"?S.call(_,m,g):S,g==null)break e;m=ke({},m,g);break e;case 2:ur=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=_,u=m):f=f.next=_,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=a,t.lanes=a,t.memoizedState=m}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ga={},Nn=Or(ga),Ho=Or(ga),Wo=Or(ga);function ts(t){if(t===ga)throw Error(z(174));return t}function Hf(t,e){switch(we(Wo,e),we(Ho,t),we(Nn,ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jd(e,t)}Te(Nn),we(Nn,e)}function yi(){Te(Nn),Te(Ho),Te(Wo)}function Mx(t){ts(Wo.current);var e=ts(Nn.current),n=Jd(e,t.type);e!==n&&(we(Ho,t),we(Nn,n))}function Wf(t){Ho.current===t&&(Te(Nn),Te(Ho))}var je=Or(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ad=[];function Gf(){for(var t=0;t<ad.length;t++)ad[t]._workInProgressVersionPrimary=null;ad.length=0}var El=er.ReactCurrentDispatcher,ld=er.ReactCurrentBatchConfig,ds=0,Ae=null,qe=null,Ge=null,sc=!1,No=!1,Go=0,yN=0;function ot(){throw Error(z(321))}function Qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Kf(t,e,n,r,s,i){if(ds=i,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,El.current=t===null||t.memoizedState===null?_N:bN,t=n(r,s),No){i=0;do{if(No=!1,Go=0,25<=i)throw Error(z(301));i+=1,Ge=qe=null,e.updateQueue=null,El.current=EN,t=n(r,s)}while(No)}if(El.current=ic,e=qe!==null&&qe.next!==null,ds=0,Ge=qe=Ae=null,sc=!1,e)throw Error(z(300));return t}function Yf(){var t=Go!==0;return Go=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Jt(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ge===null?Ae.memoizedState:Ge.next;if(e!==null)Ge=e,qe=t;else{if(t===null)throw Error(z(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Qo(t,e){return typeof e=="function"?e(t):e}function cd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((ds&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,Ae.lanes|=f,hs|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,hn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ae.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ud(t){var e=Jt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);hn(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Vx(){}function Ox(t,e){var n=Ae,r=Jt(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,Jf(qx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Ko(9,Ux.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(z(349));ds&30||Fx(n,e,s)}return s}function Fx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ux(t,e,n,r){e.value=n,e.getSnapshot=r,zx(e)&&Bx(t)}function qx(t,e,n){return n(function(){zx(e)&&Bx(t)})}function zx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function Bx(t){var e=Qn(t,1);e!==null&&un(e,t,1,-1)}function o0(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},e.queue=t,t=t.dispatch=wN.bind(null,Ae,t),[e.memoizedState,t]}function Ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $x(){return Jt().memoizedState}function Nl(t,e,n,r){var s=wn();Ae.flags|=t,s.memoizedState=Ko(1|e,n,void 0,r===void 0?null:r)}function Bc(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(qe!==null){var a=qe.memoizedState;if(i=a.destroy,r!==null&&Qf(r,a.deps)){s.memoizedState=Ko(e,n,i,r);return}}Ae.flags|=t,s.memoizedState=Ko(1|e,n,i,r)}function a0(t,e){return Nl(8390656,8,t,e)}function Jf(t,e){return Bc(2048,8,t,e)}function Hx(t,e){return Bc(4,2,t,e)}function Wx(t,e){return Bc(4,4,t,e)}function Gx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qx(t,e,n){return n=n!=null?n.concat([t]):null,Bc(4,4,Gx.bind(null,e,t),n)}function Xf(){}function Kx(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yx(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jx(t,e,n){return ds&21?(hn(n,e)||(n=nx(),Ae.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function vN(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=ld.transition;ld.transition={};try{t(!1),e()}finally{ye=n,ld.transition=r}}function Xx(){return Jt().memoizedState}function xN(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zx(t))ew(e,n);else if(n=Dx(t,e,n,r),n!==null){var s=xt();un(n,t,r,s),tw(n,e,r)}}function wN(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zx(t))ew(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,hn(c,a)){var u=e.interleaved;u===null?(s.next=s,Bf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Dx(t,e,s,r),n!==null&&(s=xt(),un(n,t,r,s),tw(n,e,r))}}function Zx(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function ew(t,e){No=sc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var ic={readContext:Yt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},_N={readContext:Yt,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:a0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nl(4194308,4,Gx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nl(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xN.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:o0,useDebugValue:Xf,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=o0(!1),e=t[0];return t=vN.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,s=wn();if(Ie){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Qe===null)throw Error(z(349));ds&30||Fx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,a0(qx.bind(null,r,i,t),[t]),r.flags|=2048,Ko(9,Ux.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wn(),e=Qe.identifierPrefix;if(Ie){var n=On,r=Vn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bN={readContext:Yt,useCallback:Kx,useContext:Yt,useEffect:Jf,useImperativeHandle:Qx,useInsertionEffect:Hx,useLayoutEffect:Wx,useMemo:Yx,useReducer:cd,useRef:$x,useState:function(){return cd(Qo)},useDebugValue:Xf,useDeferredValue:function(t){var e=Jt();return Jx(e,qe.memoizedState,t)},useTransition:function(){var t=cd(Qo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Vx,useSyncExternalStore:Ox,useId:Xx,unstable_isNewReconciler:!1},EN={readContext:Yt,useCallback:Kx,useContext:Yt,useEffect:Jf,useImperativeHandle:Qx,useInsertionEffect:Hx,useLayoutEffect:Wx,useMemo:Yx,useReducer:ud,useRef:$x,useState:function(){return ud(Qo)},useDebugValue:Xf,useDeferredValue:function(t){var e=Jt();return qe===null?e.memoizedState=t:Jx(e,qe.memoizedState,t)},useTransition:function(){var t=ud(Qo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Vx,useSyncExternalStore:Ox,useId:Xx,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $c={isMounted:function(t){return(t=t._reactInternals)?Ns(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Ir(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(un(e,t,s,r),bl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Ir(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(un(e,t,s,r),bl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Ir(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Nr(t,s,r),e!==null&&(un(e,t,r,n),bl(e,t,r))}};function l0(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!qo(n,r)||!qo(s,i):!0}function nw(t,e,n){var r=!1,s=Rr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=At(e)?cs:ft.current,r=e.contextTypes,i=(r=r!=null)?mi(t,s):Rr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function c0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$c.enqueueReplaceState(e,e.state,null)}function xh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$f(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=At(e)?cs:ft.current,s.context=mi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$c.enqueueReplaceState(s,s.state,null),nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vi(t,e){try{var n="",r=e;do n+=J2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NN=typeof WeakMap=="function"?WeakMap:Map;function rw(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ac||(ac=!0,kh=r),wh(t,e)},n}function sw(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wh(t,e),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function u0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ON.bind(null,t,e,n),e.then(t,t))}function d0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var TN=er.ReactCurrentOwner,St=!1;function yt(t,e,n,r){e.child=t===null?Rx(e,null,n,r):gi(e,t.child,n,r)}function f0(t,e,n,r,s){n=n.render;var i=e.ref;return ii(e,s),r=Kf(t,e,n,r,i,s),n=Yf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ie&&n&&Vf(e),e.flags|=1,yt(t,e,r,s),e.child)}function m0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!om(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iw(t,e,i,r,s)):(t=jl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(a,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=Sr(i,r),t.ref=e.ref,t.return=e,e.child=t}function iw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qo(i,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return _h(t,e,n,r,s)}function ow(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Zs,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Zs,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Zs,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(Zs,Dt),Dt|=r;return yt(t,e,s,n),e.child}function aw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _h(t,e,n,r,s){var i=At(n)?cs:ft.current;return i=mi(e,i),ii(e,s),n=Kf(t,e,n,r,i,s),r=Yf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ie&&r&&Vf(e),e.flags|=1,yt(t,e,n,s),e.child)}function p0(t,e,n,r,s){if(At(n)){var i=!0;Jl(e)}else i=!1;if(ii(e,s),e.stateNode===null)Tl(t,e),nw(e,n,r),xh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=At(n)?cs:ft.current,d=mi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&c0(e,a,r,d),ur=!1;var g=e.memoizedState;a.state=g,nc(e,r,a,s),u=e.memoizedState,c!==r||g!==u||jt.current||ur?(typeof f=="function"&&(vh(e,n,f,r),u=e.memoizedState),(c=ur||l0(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Lx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:sn(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=At(n)?cs:ft.current,u=mi(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&c0(e,a,r,u),ur=!1,g=e.memoizedState,a.state=g,nc(e,r,a,s);var S=e.memoizedState;c!==m||g!==S||jt.current||ur?(typeof _=="function"&&(vh(e,n,_,r),S=e.memoizedState),(d=ur||l0(e,n,d,r,g,S,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),a.props=r,a.state=S,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return bh(t,e,n,r,i,s)}function bh(t,e,n,r,s,i){aw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&e0(e,n,!1),Kn(t,e,i);r=e.stateNode,TN.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=gi(e,t.child,null,i),e.child=gi(e,null,c,i)):yt(t,e,c,i),e.memoizedState=r.state,s&&e0(e,n,!0),e.child}function lw(t){var e=t.stateNode;e.pendingContext?Zg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zg(t,e.context,!1),Hf(t,e.containerInfo)}function g0(t,e,n,r,s){return pi(),Ff(s),e.flags|=256,yt(t,e,n,r),e.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Nh(t){return{baseLanes:t,cachePool:null,transitions:null}}function cw(t,e,n){var r=e.pendingProps,s=je.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(je,s&1),t===null)return gh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Gc(a,r,0,null),t=os(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nh(n),e.memoizedState=Eh,t):Zf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return IN(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Sr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Sr(c,i):(i=os(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Nh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Eh,r}return i=t.child,t=i.sibling,r=Sr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zf(t,e){return e=Gc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function il(t,e,n,r){return r!==null&&Ff(r),gi(e,t.child,null,n),t=Zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IN(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=dd(Error(z(422))),il(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Gc({mode:"visible",children:r.children},s,0,null),i=os(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&gi(e,t.child,null,a),e.child.memoizedState=Nh(a),e.memoizedState=Eh,i);if(!(e.mode&1))return il(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=dd(i,r,void 0),il(t,e,a,r)}if(c=(a&t.childLanes)!==0,St||c){if(r=Qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),un(r,t,s,-1))}return im(),r=dd(Error(z(421))),il(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=FN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=Er(s.nextSibling),Vt=e,Ie=!0,an=null,t!==null&&($t[Ht++]=Vn,$t[Ht++]=On,$t[Ht++]=us,Vn=t.id,On=t.overflow,us=e),e=Zf(e,r.children),e.flags|=4096,e)}function y0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yh(t.return,e,n)}function hd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y0(t,n,e);else if(t.tag===19)y0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&rc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hd(e,!0,n,null,i);break;case"together":hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SN(t,e,n){switch(e.tag){case 3:lw(e),pi();break;case 5:Mx(e);break;case 1:At(e.type)&&Jl(e);break;case 4:Hf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(ec,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?cw(t,e,n):(we(je,je.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);we(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,ow(t,e,n)}return Kn(t,e,n)}var dw,Th,hw,fw;dw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Th=function(){};hw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ts(Nn.current);var i=null;switch(n){case"input":s=Gd(t,s),r=Gd(t,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Yd(t,s),r=Yd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kl)}Xd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Do.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Do.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ee("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};fw=function(t,e,n,r){n!==r&&(e.flags|=4)};function so(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jN(t,e,n){var r=e.pendingProps;switch(Of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return At(e.type)&&Yl(),at(e),null;case 3:return r=e.stateNode,yi(),Te(jt),Te(ft),Gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(Rh(an),an=null))),Th(t,e),at(e),null;case 5:Wf(e);var s=ts(Wo.current);if(n=e.type,t!==null&&e.stateNode!=null)hw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return at(e),null}if(t=ts(Nn.current),rl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[$o]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<uo.length;s++)Ee(uo[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Ig(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":jg(r,i),Ee("invalid",r)}Xd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&nl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&nl(r.textContent,c,t),s=["children",""+c]):Do.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Qa(r),Sg(r,i,!0);break;case"textarea":Qa(r),Ag(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[bn]=e,t[$o]=r,dw(t,e,!1,!1),e.stateNode=t;e:{switch(a=Zd(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<uo.length;s++)Ee(uo[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":Ig(t,r),s=Gd(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":jg(t,r),s=Yd(t,r),Ee("invalid",t);break;default:s=r}Xd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?$v(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Lo(t,u):typeof u=="number"&&Lo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Do.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&Ef(t,i,u,a))}switch(n){case"input":Qa(t),Sg(t,r,!1);break;case"textarea":Qa(t),Ag(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ti(t,!!r.multiple,i,!1):r.defaultValue!=null&&ti(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)fw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ts(Wo.current),ts(Nn.current),rl(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:nl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return at(e),null;case 13:if(Te(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Lt!==null&&e.mode&1&&!(e.flags&128))Cx(),pi(),e.flags|=98560,i=!1;else if(i=rl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[bn]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else an!==null&&(Rh(an),an=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?ze===0&&(ze=3):im())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return yi(),Th(t,e),t===null&&zo(e.stateNode.containerInfo),at(e),null;case 10:return zf(e.type._context),at(e),null;case 17:return At(e.type)&&Yl(),at(e),null;case 19:if(Te(je),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)so(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rc(t),a!==null){for(e.flags|=128,so(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&Le()>xi&&(e.flags|=128,r=!0,so(i,!1),e.lanes=4194304)}else{if(!r)if(t=rc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),so(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ie)return at(e),null}else 2*Le()-i.renderingStartTime>xi&&n!==1073741824&&(e.flags|=128,r=!0,so(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Le(),e.sibling=null,n=je.current,we(je,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return sm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function AN(t,e){switch(Of(e),e.tag){case 1:return At(e.type)&&Yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),Te(jt),Te(ft),Gf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wf(e),null;case 13:if(Te(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(je),null;case 4:return yi(),null;case 10:return zf(e.type._context),null;case 22:case 23:return sm(),null;case 24:return null;default:return null}}var ol=!1,dt=!1,kN=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function Ih(t,e,n){try{n()}catch(r){Re(t,e,r)}}var v0=!1;function CN(t,e){if(ch=Wl,t=vx(),Mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uh={focusedElem:t,selectionRange:n},Wl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,R=S.memoizedState,E=e.stateNode,b=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:sn(e.type,k),R);E.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(L){Re(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return S=v0,v0=!1,S}function To(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ih(e,n,i)}s=s.next}while(s!==r)}}function Hc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mw(t){var e=t.alternate;e!==null&&(t.alternate=null,mw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[$o],delete e[fh],delete e[fN],delete e[mN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pw(t){return t.tag===5||t.tag===3||t.tag===4}function x0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kl));else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}function Ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ah(t,e,n),t=t.sibling;t!==null;)Ah(t,e,n),t=t.sibling}var Ye=null,on=!1;function ar(t,e,n){for(n=n.child;n!==null;)gw(t,e,n),n=n.sibling}function gw(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Vc,n)}catch{}switch(n.tag){case 5:dt||Xs(n,e);case 6:var r=Ye,s=on;Ye=null,ar(t,e,n),Ye=r,on=s,Ye!==null&&(on?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(on?(t=Ye,n=n.stateNode,t.nodeType===8?id(t.parentNode,n):t.nodeType===1&&id(t,n),Fo(t)):id(Ye,n.stateNode));break;case 4:r=Ye,s=on,Ye=n.stateNode.containerInfo,on=!0,ar(t,e,n),Ye=r,on=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ih(n,e,a),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!dt&&(Xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Re(n,e,c)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,ar(t,e,n),dt=r):ar(t,e,n);break;default:ar(t,e,n)}}function w0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kN),e.forEach(function(r){var s=UN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Ye=c.stateNode,on=!1;break e;case 3:Ye=c.stateNode.containerInfo,on=!0;break e;case 4:Ye=c.stateNode.containerInfo,on=!0;break e}c=c.return}if(Ye===null)throw Error(z(160));gw(i,a,s),Ye=null,on=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Re(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yw(e,t),e=e.sibling}function yw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),xn(t),r&4){try{To(3,t,t.return),Hc(3,t)}catch(k){Re(t,t.return,k)}try{To(5,t,t.return)}catch(k){Re(t,t.return,k)}}break;case 1:rn(e,t),xn(t),r&512&&n!==null&&Xs(n,n.return);break;case 5:if(rn(e,t),xn(t),r&512&&n!==null&&Xs(n,n.return),t.flags&32){var s=t.stateNode;try{Lo(s,"")}catch(k){Re(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Fv(s,i),Zd(c,a);var d=Zd(c,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?$v(s,m):f==="dangerouslySetInnerHTML"?zv(s,m):f==="children"?Lo(s,m):Ef(s,f,m,d)}switch(c){case"input":Qd(s,i);break;case"textarea":Uv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?ti(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?ti(s,!!i.multiple,i.defaultValue,!0):ti(s,!!i.multiple,i.multiple?[]:"",!1))}s[$o]=i}catch(k){Re(t,t.return,k)}}break;case 6:if(rn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Re(t,t.return,k)}}break;case 3:if(rn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fo(e.containerInfo)}catch(k){Re(t,t.return,k)}break;case 4:rn(e,t),xn(t);break;case 13:rn(e,t),xn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(nm=Le())),r&4&&w0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,rn(e,t),dt=d):rn(e,t),xn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,_=g.child,g.tag){case 0:case 11:case 14:case 15:To(4,g,g.return);break;case 1:Xs(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(k){Re(r,n,k)}}break;case 5:Xs(g,g.return);break;case 22:if(g.memoizedState!==null){b0(m);continue}}_!==null?(_.return=g,Q=_):b0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Bv("display",a))}catch(k){Re(t,t.return,k)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){Re(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rn(e,t),xn(t),r&4&&w0(t);break;case 21:break;default:rn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lo(s,""),r.flags&=-33);var i=x0(t);Ah(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=x0(t);jh(t,c,a);break;default:throw Error(z(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PN(t,e,n){Q=t,vw(t)}function vw(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ol;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||dt;c=ol;var d=dt;if(ol=a,(dt=u)&&!d)for(Q=s;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?E0(s):u!==null?(u.return=a,Q=u):E0(s);for(;i!==null;)Q=i,vw(i),i=i.sibling;Q=s,ol=c,dt=d}_0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):_0(t)}}function _0(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Hc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&i0(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Fo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&Sh(e)}catch(g){Re(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function b0(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function E0(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hc(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Re(e,s,u)}}var i=e.return;try{Sh(e)}catch(u){Re(e,i,u)}break;case 5:var a=e.return;try{Sh(e)}catch(u){Re(e,a,u)}}}catch(u){Re(e,e.return,u)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var RN=Math.ceil,oc=er.ReactCurrentDispatcher,em=er.ReactCurrentOwner,Gt=er.ReactCurrentBatchConfig,de=0,Qe=null,Oe=null,Ze=0,Dt=0,Zs=Or(0),ze=0,Yo=null,hs=0,Wc=0,tm=0,Io=null,Tt=null,nm=0,xi=1/0,Pn=null,ac=!1,kh=null,Tr=null,al=!1,yr=null,lc=0,So=0,Ch=null,Il=-1,Sl=0;function xt(){return de&6?Le():Il!==-1?Il:Il=Le()}function Ir(t){return t.mode&1?de&2&&Ze!==0?Ze&-Ze:gN.transition!==null?(Sl===0&&(Sl=nx()),Sl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:cx(t.type)),t):1}function un(t,e,n,r){if(50<So)throw So=0,Ch=null,Error(z(185));fa(t,n,r),(!(de&2)||t!==Qe)&&(t===Qe&&(!(de&2)&&(Wc|=n),ze===4&&hr(t,Ze)),kt(t,r),n===1&&de===0&&!(e.mode&1)&&(xi=Le()+500,zc&&Fr()))}function kt(t,e){var n=t.callbackNode;gE(t,e);var r=Hl(t,t===Qe?Ze:0);if(r===0)n!==null&&Pg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pg(n),e===1)t.tag===0?pN(N0.bind(null,t)):jx(N0.bind(null,t)),dN(function(){!(de&6)&&Fr()}),n=null;else{switch(rx(r)){case 1:n=jf;break;case 4:n=ex;break;case 16:n=$l;break;case 536870912:n=tx;break;default:n=$l}n=Iw(n,xw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xw(t,e){if(Il=-1,Sl=0,de&6)throw Error(z(327));var n=t.callbackNode;if(oi()&&t.callbackNode!==n)return null;var r=Hl(t,t===Qe?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cc(t,r);else{e=r;var s=de;de|=2;var i=_w();(Qe!==t||Ze!==e)&&(Pn=null,xi=Le()+500,is(t,e));do try{MN();break}catch(c){ww(t,c)}while(!0);qf(),oc.current=i,de=s,Oe!==null?e=0:(Qe=null,Ze=0,e=ze)}if(e!==0){if(e===2&&(s=sh(t),s!==0&&(r=s,e=Ph(t,s))),e===1)throw n=Yo,is(t,0),hr(t,r),kt(t,Le()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!DN(s)&&(e=cc(t,r),e===2&&(i=sh(t),i!==0&&(r=i,e=Ph(t,i))),e===1))throw n=Yo,is(t,0),hr(t,r),kt(t,Le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Jr(t,Tt,Pn);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=nm+500-Le(),10<e)){if(Hl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hh(Jr.bind(null,t,Tt,Pn),e);break}Jr(t,Tt,Pn);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-cn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RN(r/1960))-r,10<r){t.timeoutHandle=hh(Jr.bind(null,t,Tt,Pn),r);break}Jr(t,Tt,Pn);break;case 5:Jr(t,Tt,Pn);break;default:throw Error(z(329))}}}return kt(t,Le()),t.callbackNode===n?xw.bind(null,t):null}function Ph(t,e){var n=Io;return t.current.memoizedState.isDehydrated&&(is(t,e).flags|=256),t=cc(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&Rh(e)),t}function Rh(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function DN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~tm,e&=~Wc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function N0(t){if(de&6)throw Error(z(327));oi();var e=Hl(t,0);if(!(e&1))return kt(t,Le()),null;var n=cc(t,e);if(t.tag!==0&&n===2){var r=sh(t);r!==0&&(e=r,n=Ph(t,r))}if(n===1)throw n=Yo,is(t,0),hr(t,e),kt(t,Le()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,Tt,Pn),kt(t,Le()),null}function rm(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(xi=Le()+500,zc&&Fr())}}function fs(t){yr!==null&&yr.tag===0&&!(de&6)&&oi();var e=de;de|=1;var n=Gt.transition,r=ye;try{if(Gt.transition=null,ye=1,t)return t()}finally{ye=r,Gt.transition=n,de=e,!(de&6)&&Fr()}}function sm(){Dt=Zs.current,Te(Zs)}function is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uN(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yl();break;case 3:yi(),Te(jt),Te(ft),Gf();break;case 5:Wf(r);break;case 4:yi();break;case 13:Te(je);break;case 19:Te(je);break;case 10:zf(r.type._context);break;case 22:case 23:sm()}n=n.return}if(Qe=t,Oe=t=Sr(t.current,null),Ze=Dt=e,ze=0,Yo=null,tm=Wc=hs=0,Tt=Io=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}es=null}return t}function ww(t,e){do{var n=Oe;try{if(qf(),El.current=ic,sc){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sc=!1}if(ds=0,Ge=qe=Ae=null,No=!1,Go=0,em.current=null,n===null||n.return===null){ze=1,Yo=e,Oe=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=Ze,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=d0(a);if(_!==null){_.flags&=-257,h0(_,a,c,i,e),_.mode&1&&u0(i,d,e),e=_,u=d;var S=e.updateQueue;if(S===null){var k=new Set;k.add(u),e.updateQueue=k}else S.add(u);break e}else{if(!(e&1)){u0(i,d,e),im();break e}u=Error(z(426))}}else if(Ie&&c.mode&1){var R=d0(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),h0(R,a,c,i,e),Ff(vi(u,c));break e}}i=u=vi(u,c),ze!==4&&(ze=2),Io===null?Io=[i]:Io.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=rw(i,u,e);s0(i,E);break e;case 1:c=u;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Tr===null||!Tr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var L=sw(i,c,e);s0(i,L);break e}}i=i.return}while(i!==null)}Ew(n)}catch(D){e=D,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function _w(){var t=oc.current;return oc.current=ic,t===null?ic:t}function im(){(ze===0||ze===3||ze===2)&&(ze=4),Qe===null||!(hs&268435455)&&!(Wc&268435455)||hr(Qe,Ze)}function cc(t,e){var n=de;de|=2;var r=_w();(Qe!==t||Ze!==e)&&(Pn=null,is(t,e));do try{LN();break}catch(s){ww(t,s)}while(!0);if(qf(),de=n,oc.current=r,Oe!==null)throw Error(z(261));return Qe=null,Ze=0,ze}function LN(){for(;Oe!==null;)bw(Oe)}function MN(){for(;Oe!==null&&!aE();)bw(Oe)}function bw(t){var e=Tw(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Ew(t):Oe=e,em.current=null}function Ew(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AN(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Oe=null;return}}else if(n=jN(n,e,Dt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);ze===0&&(ze=5)}function Jr(t,e,n){var r=ye,s=Gt.transition;try{Gt.transition=null,ye=1,VN(t,e,n,r)}finally{Gt.transition=s,ye=r}return null}function VN(t,e,n,r){do oi();while(yr!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(yE(t,i),t===Qe&&(Oe=Qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,Iw($l,function(){return oi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var a=ye;ye=1;var c=de;de|=4,em.current=null,CN(t,n),yw(n,t),rN(uh),Wl=!!ch,uh=ch=null,t.current=n,PN(n),lE(),de=c,ye=a,Gt.transition=i}else t.current=n;if(al&&(al=!1,yr=t,lc=s),i=t.pendingLanes,i===0&&(Tr=null),dE(n.stateNode),kt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ac)throw ac=!1,t=kh,kh=null,t;return lc&1&&t.tag!==0&&oi(),i=t.pendingLanes,i&1?t===Ch?So++:(So=0,Ch=t):So=0,Fr(),null}function oi(){if(yr!==null){var t=rx(lc),e=Gt.transition,n=ye;try{if(Gt.transition=null,ye=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,lc=0,de&6)throw Error(z(331));var s=de;for(de|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:To(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,_=f.return;if(mw(f),f===d){Q=null;break}if(g!==null){g.return=_,Q=g;break}Q=_}}}var S=i.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var R=k.sibling;k.sibling=null,k=R}while(k!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:To(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Q=E;break e}Q=i.return}}var b=t.current;for(Q=b;Q!==null;){a=Q;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,Q=T;else e:for(a=b;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Hc(9,c)}}catch(D){Re(c,c.return,D)}if(c===a){Q=null;break e}var L=c.sibling;if(L!==null){L.return=c.return,Q=L;break e}Q=c.return}}if(de=s,Fr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Vc,t)}catch{}r=!0}return r}finally{ye=n,Gt.transition=e}}return!1}function T0(t,e,n){e=vi(n,e),e=rw(t,e,1),t=Nr(t,e,1),e=xt(),t!==null&&(fa(t,1,e),kt(t,e))}function Re(t,e,n){if(t.tag===3)T0(t,t,n);else for(;e!==null;){if(e.tag===3){T0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){t=vi(n,t),t=sw(e,t,1),e=Nr(e,t,1),t=xt(),e!==null&&(fa(e,1,t),kt(e,t));break}}e=e.return}}function ON(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(Ze&n)===n&&(ze===4||ze===3&&(Ze&130023424)===Ze&&500>Le()-nm?is(t,0):tm|=n),kt(t,e)}function Nw(t,e){e===0&&(t.mode&1?(e=Ja,Ja<<=1,!(Ja&130023424)&&(Ja=4194304)):e=1);var n=xt();t=Qn(t,e),t!==null&&(fa(t,e,n),kt(t,n))}function FN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nw(t,n)}function UN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Nw(t,n)}var Tw;Tw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,SN(t,e,n);St=!!(t.flags&131072)}else St=!1,Ie&&e.flags&1048576&&Ax(e,Zl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tl(t,e),t=e.pendingProps;var s=mi(e,ft.current);ii(e,n),s=Kf(null,e,r,t,s,n);var i=Yf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,Jl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$f(e),s.updater=$c,e.stateNode=s,s._reactInternals=e,xh(e,r,t,n),e=bh(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&Vf(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zN(r),t=sn(r,t),s){case 0:e=_h(null,e,r,t,n);break e;case 1:e=p0(null,e,r,t,n);break e;case 11:e=f0(null,e,r,t,n);break e;case 14:e=m0(null,e,r,sn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),_h(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),p0(t,e,r,s,n);case 3:e:{if(lw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Lx(t,e),nc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vi(Error(z(423)),e),e=g0(t,e,r,n,s);break e}else if(r!==s){s=vi(Error(z(424)),e),e=g0(t,e,r,n,s);break e}else for(Lt=Er(e.stateNode.containerInfo.firstChild),Vt=e,Ie=!0,an=null,n=Rx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pi(),r===s){e=Kn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return Mx(e),t===null&&gh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,dh(r,s)?a=null:i!==null&&dh(r,i)&&(e.flags|=32),aw(t,e),yt(t,e,a,n),e.child;case 6:return t===null&&gh(e),null;case 13:return cw(t,e,n);case 4:return Hf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),f0(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,we(ec,r._currentValue),r._currentValue=a,i!==null)if(hn(i.value,a)){if(i.children===s.children&&!jt.current){e=Kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Bn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),yh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),yh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ii(e,n),s=Yt(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=sn(r,e.pendingProps),s=sn(r.type,s),m0(t,e,r,s,n);case 15:return iw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),Tl(t,e),e.tag=1,At(r)?(t=!0,Jl(e)):t=!1,ii(e,n),nw(e,r,s),xh(e,r,s,n),bh(null,e,r,!0,t,n);case 19:return uw(t,e,n);case 22:return ow(t,e,n)}throw Error(z(156,e.tag))};function Iw(t,e){return Zv(t,e)}function qN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new qN(t,e,n,r)}function om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zN(t){if(typeof t=="function")return om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===If)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jl(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")om(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Bs:return os(n.children,s,i,e);case Nf:a=8,s|=8;break;case Bd:return t=Wt(12,n,e,s|2),t.elementType=Bd,t.lanes=i,t;case $d:return t=Wt(13,n,e,s),t.elementType=$d,t.lanes=i,t;case Hd:return t=Wt(19,n,e,s),t.elementType=Hd,t.lanes=i,t;case Mv:return Gc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dv:a=10;break e;case Lv:a=9;break e;case Tf:a=11;break e;case If:a=14;break e;case cr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Wt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function os(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Gc(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=Mv,t.lanes=n,t.stateNode={isHidden:!1},t}function fd(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function md(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function am(t,e,n,r,s,i,a,c,u){return t=new BN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(i),t}function $N(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sw(t){if(!t)return Rr;t=t._reactInternals;e:{if(Ns(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(At(n))return Sx(t,n,e)}return e}function jw(t,e,n,r,s,i,a,c,u){return t=am(n,r,!0,t,s,i,a,c,u),t.context=Sw(null),n=t.current,r=xt(),s=Ir(n),i=Bn(r,s),i.callback=e??null,Nr(n,i,s),t.current.lanes=s,fa(t,s,r),kt(t,r),t}function Qc(t,e,n,r){var s=e.current,i=xt(),a=Ir(s);return n=Sw(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(s,e,a),t!==null&&(un(t,s,a,i),bl(t,s,a)),a}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function I0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lm(t,e){I0(t,e),(t=t.alternate)&&I0(t,e)}function HN(){return null}var Aw=typeof reportError=="function"?reportError:function(t){console.error(t)};function cm(t){this._internalRoot=t}Kc.prototype.render=cm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Qc(t,e,null,null)};Kc.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Qc(null,t,null,null)}),e[Gn]=null}};function Kc(t){this._internalRoot=t}Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=ox();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&lx(t)}};function um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S0(){}function WN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=uc(a);i.call(d)}}var a=jw(e,r,t,0,null,!1,!1,"",S0);return t._reactRootContainer=a,t[Gn]=a.current,zo(t.nodeType===8?t.parentNode:t),fs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=uc(u);c.call(d)}}var u=am(t,0,!1,null,null,!1,!1,"",S0);return t._reactRootContainer=u,t[Gn]=u.current,zo(t.nodeType===8?t.parentNode:t),fs(function(){Qc(e,u,n,r)}),u}function Jc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=uc(a);c.call(u)}}Qc(e,a,t,s)}else a=WN(n,e,t,s,r);return uc(a)}sx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=co(e.pendingLanes);n!==0&&(Af(e,n|1),kt(e,Le()),!(de&6)&&(xi=Le()+500,Fr()))}break;case 13:fs(function(){var r=Qn(t,1);if(r!==null){var s=xt();un(r,t,1,s)}}),lm(t,1)}};kf=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=xt();un(e,t,134217728,n)}lm(t,134217728)}};ix=function(t){if(t.tag===13){var e=Ir(t),n=Qn(t,e);if(n!==null){var r=xt();un(n,t,e,r)}lm(t,e)}};ox=function(){return ye};ax=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};th=function(t,e,n){switch(e){case"input":if(Qd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qc(r);if(!s)throw Error(z(90));Ov(r),Qd(r,s)}}}break;case"textarea":Uv(t,n);break;case"select":e=n.value,e!=null&&ti(t,!!n.multiple,e,!1)}};Gv=rm;Qv=fs;var GN={usingClientEntryPoint:!1,Events:[pa,Gs,qc,Hv,Wv,rm]},io={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QN={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jv(t),t===null?null:t.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||HN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{Vc=ll.inject(QN),En=ll}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GN;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!um(e))throw Error(z(200));return $N(t,e,null,n)};Ut.createRoot=function(t,e){if(!um(t))throw Error(z(299));var n=!1,r="",s=Aw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=am(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,zo(t.nodeType===8?t.parentNode:t),new cm(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Jv(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return fs(t)};Ut.hydrate=function(t,e,n){if(!Yc(e))throw Error(z(200));return Jc(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!um(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Aw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=jw(e,null,t,1,n??null,s,!1,i,a),t[Gn]=e.current,zo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kc(e)};Ut.render=function(t,e,n){if(!Yc(e))throw Error(z(200));return Jc(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(z(40));return t._reactRootContainer?(fs(function(){Jc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};Ut.unstable_batchedUpdates=rm;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Jc(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function kw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kw)}catch(t){console.error(t)}}kw(),kv.exports=Ut;var KN=kv.exports,Cw,j0=KN;Cw=j0.createRoot,j0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jo.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const A0="popstate";function YN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Dh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:dc(s)}return XN(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JN(){return Math.random().toString(36).substr(2,8)}function k0(t,e){return{usr:t.state,key:t.key,idx:e}}function Dh(t,e,n,r){return n===void 0&&(n=null),Jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ki(e):e,{state:n,key:e&&e.key||r||JN()})}function dc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=vr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(Jo({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){c=vr.Pop;let R=f(),E=R==null?null:R-d;d=R,u&&u({action:c,location:k.location,delta:E})}function g(R,E){c=vr.Push;let b=Dh(k.location,R,E);d=f()+1;let T=k0(b,d),L=k.createHref(b);try{a.pushState(T,"",L)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(L)}i&&u&&u({action:c,location:k.location,delta:1})}function _(R,E){c=vr.Replace;let b=Dh(k.location,R,E);d=f();let T=k0(b,d),L=k.createHref(b);a.replaceState(T,"",L),i&&u&&u({action:c,location:k.location,delta:0})}function S(R){let E=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof R=="string"?R:dc(R);return b=b.replace(/ $/,"%20"),Me(E,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,E)}let k={get action(){return c},get location(){return t(s,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(A0,m),u=R,()=>{s.removeEventListener(A0,m),u=null}},createHref(R){return e(s,R)},createURL:S,encodeLocation(R){let E=S(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:_,go(R){return a.go(R)}};return k}var C0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(C0||(C0={}));function ZN(t,e,n){return n===void 0&&(n="/"),eT(t,e,n,!1)}function eT(t,e,n,r){let s=typeof e=="string"?ki(e):e,i=dm(s.pathname||"/",n);if(i==null)return null;let a=Rw(t);tT(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=hT(i);c=uT(a[u],d,r)}return c}function Rw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Me(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=jr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Me(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Rw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:lT(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of Dw(i.path))s(i,a,u)}),e}function Dw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Dw(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function tT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nT=/^:[\w-]+$/,rT=3,sT=2,iT=1,oT=10,aT=-2,P0=t=>t==="*";function lT(t,e){let n=t.split("/"),r=n.length;return n.some(P0)&&(r+=aT),e&&(r+=sT),n.filter(s=>!P0(s)).reduce((s,i)=>s+(nT.test(i)?rT:i===""?iT:oT),r)}function cT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function uT(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=R0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=R0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:jr([i,m.pathname]),pathnameBase:gT(jr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=jr([i,m.pathnameBase]))}return a}function R0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let k=c[m]||"";a=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const S=c[m];return _&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function dT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Pw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ki(t):t;return{pathname:n?n.startsWith("/")?n:mT(n,e):e,search:yT(r),hash:vT(s)}}function mT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hm(t,e){let n=pT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ki(t):(s=Jo({},t),Me(!s.pathname||!s.pathname.includes("?"),pd("?","pathname","search",s)),Me(!s.pathname||!s.pathname.includes("#"),pd("#","pathname","hash",s)),Me(!s.search||!s.search.includes("#"),pd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=fT(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),gT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Lw=["post","put","patch","delete"];new Set(Lw);const wT=["get",...Lw];new Set(wT);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xo(){return Xo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xo.apply(this,arguments)}const mm=C.createContext(null),_T=C.createContext(null),Ur=C.createContext(null),Xc=C.createContext(null),tr=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Mw=C.createContext(null);function bT(t,e){let{relative:n}=e===void 0?{}:e;Ci()||Me(!1);let{basename:r,navigator:s}=C.useContext(Ur),{hash:i,pathname:a,search:c}=Ow(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:jr([r,a])),s.createHref({pathname:u,search:c,hash:i})}function Ci(){return C.useContext(Xc)!=null}function Ts(){return Ci()||Me(!1),C.useContext(Xc).location}function Vw(t){C.useContext(Ur).static||C.useLayoutEffect(t)}function gn(){let{isDataRoute:t}=C.useContext(tr);return t?MT():ET()}function ET(){Ci()||Me(!1);let t=C.useContext(mm),{basename:e,future:n,navigator:r}=C.useContext(Ur),{matches:s}=C.useContext(tr),{pathname:i}=Ts(),a=JSON.stringify(hm(s,n.v7_relativeSplatPath)),c=C.useRef(!1);return Vw(()=>{c.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=fm(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:jr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}function NT(){let{matches:t}=C.useContext(tr),e=t[t.length-1];return e?e.params:{}}function Ow(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Ur),{matches:s}=C.useContext(tr),{pathname:i}=Ts(),a=JSON.stringify(hm(s,r.v7_relativeSplatPath));return C.useMemo(()=>fm(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function TT(t,e){return IT(t,e)}function IT(t,e,n,r){Ci()||Me(!1);let{navigator:s,static:i}=C.useContext(Ur),{matches:a}=C.useContext(tr),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=Ts(),m;if(e){var g;let E=typeof e=="string"?ki(e):e;d==="/"||(g=E.pathname)!=null&&g.startsWith(d)||Me(!1),m=E}else m=f;let _=m.pathname||"/",S=_;if(d!=="/"){let E=d.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(E.length).join("/")}let k=!i&&n&&n.matches&&n.matches.length>0?n.matches:ZN(t,{pathname:S}),R=CT(k&&k.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:jr([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:jr([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,n,r);return e&&R?C.createElement(Xc.Provider,{value:{location:Xo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:vr.Pop}},R):R}function ST(){let t=LT(),e=xT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const jT=C.createElement(ST,null);class AT extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(tr.Provider,{value:this.props.routeContext},C.createElement(Mw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kT(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(mm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(tr.Provider,{value:e},r)}function CT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Me(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:_}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||S){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let _,S=!1,k=null,R=null;n&&(_=c&&m.route.id?c[m.route.id]:void 0,k=m.route.errorElement||jT,u&&(d<0&&g===0?(S=!0,R=null):d===g&&(S=!0,R=m.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,g+1)),b=()=>{let T;return _?T=k:S?T=R:m.route.Component?T=C.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=f,C.createElement(kT,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(AT,{location:n.location,revalidation:n.revalidation,component:k,error:_,children:b(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):b()},null)}var Fw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Fw||{}),hc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hc||{});function PT(t){let e=C.useContext(mm);return e||Me(!1),e}function RT(t){let e=C.useContext(_T);return e||Me(!1),e}function DT(t){let e=C.useContext(tr);return e||Me(!1),e}function Uw(t){let e=DT(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function LT(){var t;let e=C.useContext(Mw),n=RT(hc.UseRouteError),r=Uw(hc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function MT(){let{router:t}=PT(Fw.UseNavigateStable),e=Uw(hc.UseNavigateStable),n=C.useRef(!1);return Vw(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xo({fromRouteId:e},i)))},[t,e])}function VT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Lh(t){let{to:e,replace:n,state:r,relative:s}=t;Ci()||Me(!1);let{future:i,static:a}=C.useContext(Ur),{matches:c}=C.useContext(tr),{pathname:u}=Ts(),d=gn(),f=fm(e,hm(c,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return C.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function He(t){Me(!1)}function OT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vr.Pop,navigator:i,static:a=!1,future:c}=t;Ci()&&Me(!1);let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:i,static:a,future:Xo({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=ki(r));let{pathname:f="/",search:m="",hash:g="",state:_=null,key:S="default"}=r,k=C.useMemo(()=>{let R=dm(f,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:_,key:S},navigationType:s}},[u,f,m,g,_,S,s]);return k==null?null:C.createElement(Ur.Provider,{value:d},C.createElement(Xc.Provider,{children:n,value:k}))}function FT(t){let{children:e,location:n}=t;return TT(Mh(e),n)}new Promise(()=>{});function Mh(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,Mh(r.props.children,i));return}r.type!==He&&Me(!1),!r.props.index||!r.props.children||Me(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Mh(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vh.apply(this,arguments)}function UT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function qT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zT(t,e){return t.button===0&&(!e||e==="_self")&&!qT(t)}function Oh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function BT(t,e){let n=Oh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const $T=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HT="6";try{window.__reactRouterVersion=HT}catch{}const WT="startTransition",D0=O2[WT];function GT(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=YN({window:s,v5Compat:!0}));let a=i.current,[c,u]=C.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=C.useCallback(m=>{d&&D0?D0(()=>u(m)):u(m)},[u,d]);return C.useLayoutEffect(()=>a.listen(f),[a,f]),C.useEffect(()=>VT(r),[r]),C.createElement(OT,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const QT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=UT(e,$T),{basename:_}=C.useContext(Ur),S,k=!1;if(typeof d=="string"&&KT.test(d)&&(S=d,QT))try{let T=new URL(window.location.href),L=d.startsWith("//")?new URL(T.protocol+d):new URL(d),D=dm(L.pathname,_);L.origin===T.origin&&D!=null?d=D+L.search+L.hash:k=!0}catch{}let R=bT(d,{relative:s}),E=YT(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function b(T){r&&r(T),T.defaultPrevented||E(T)}return C.createElement("a",Vh({},g,{href:S||R,onClick:k||i?r:b,ref:n,target:u}))});var L0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(L0||(L0={}));var M0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(M0||(M0={}));function YT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=gn(),d=Ts(),f=Ow(t,{relative:a});return C.useCallback(m=>{if(zT(m,n)){m.preventDefault();let g=r!==void 0?r:dc(d)===dc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function qw(t){let e=C.useRef(Oh(t)),n=C.useRef(!1),r=Ts(),s=C.useMemo(()=>BT(r.search,n.current?null:e.current),[r.search]),i=gn(),a=C.useCallback((c,u)=>{const d=Oh(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var V0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,a||(g=64)),r.push(n[f],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new XT;const g=i<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),m!==64){const S=d<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZT=function(t){const e=zw(t);return Bw.encodeByteArray(e,!0)},fc=function(t){return ZT(t).replace(/\./g,"")},$w=function(t){try{return Bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=()=>eI().__FIREBASE_DEFAULTS__,nI=()=>{if(typeof process>"u"||typeof V0>"u")return;const t=V0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$w(t[1]);return e&&JSON.parse(e)},Zc=()=>{try{return tI()||nI()||rI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hw=t=>{var e,n;return(n=(e=Zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sI=t=>{const e=Hw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ww=()=>{var t;return(t=Zc())===null||t===void 0?void 0:t.config},Gw=t=>{var e;return(e=Zc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fc(JSON.stringify(n)),fc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function lI(){var t;const e=(t=Zc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uI(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dI(){return!lI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gm(){try{return typeof indexedDB=="object"}catch{return!1}}function ym(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Qw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="FirebaseError";class yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hI,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Is.prototype.create)}}class Is{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?fI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new yn(s,c,r)}}function fI(t,e){return t.replace(mI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mI=/\{\$([^}]+)}/g;function pI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(O0(i)&&O0(a)){if(!Zo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gI(t,e){const n=new yI(t,e);return n.subscribe.bind(n)}class yI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gd),s.error===void 0&&(s.error=gd),s.complete===void 0&&(s.complete=gd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=1e3,wI=2,_I=4*60*60*1e3,bI=.5;function F0(t,e=xI,n=wI){const r=e*Math.pow(n,t),s=Math.round(bI*r*(Math.random()-.5)*2);return Math.min(_I,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class fn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TI(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(t){return t===Xr?void 0:t}function TI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const SI={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},jI=ae.INFO,AI={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},kI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eu{constructor(e){this.name=e,this._logLevel=jI,this._logHandler=kI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const CI=(t,e)=>e.some(n=>t instanceof n);let U0,q0;function PI(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RI(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kw=new WeakMap,Fh=new WeakMap,Yw=new WeakMap,yd=new WeakMap,vm=new WeakMap;function DI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ar(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Kw.set(n,t)}).catch(()=>{}),vm.set(e,t),e}function LI(t){if(Fh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Fh.set(t,e)}let Uh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MI(t){Uh=t(Uh)}function VI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vd(this),e,...n);return Yw.set(r,e.sort?e.sort():[e]),Ar(r)}:RI().includes(t)?function(...e){return t.apply(vd(this),e),Ar(Kw.get(this))}:function(...e){return Ar(t.apply(vd(this),e))}}function OI(t){return typeof t=="function"?VI(t):(t instanceof IDBTransaction&&LI(t),CI(t,PI())?new Proxy(t,Uh):t)}function Ar(t){if(t instanceof IDBRequest)return DI(t);if(yd.has(t))return yd.get(t);const e=OI(t);return e!==t&&(yd.set(t,e),vm.set(e,t)),e}const vd=t=>vm.get(t);function Jw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Ar(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Ar(a.result),u.oldVersion,u.newVersion,Ar(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const FI=["get","getKey","getAll","getAllKeys","count"],UI=["put","add","delete","clear"],xd=new Map;function z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xd.get(e))return xd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=UI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FI.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return xd.set(e,i),i}MI(t=>({...t,get:(e,n,r)=>z0(e,n)||t.get(e,n,r),has:(e,n)=>!!z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",B0="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new eu("@firebase/app"),BI="@firebase/app-compat",$I="@firebase/analytics-compat",HI="@firebase/analytics",WI="@firebase/app-check-compat",GI="@firebase/app-check",QI="@firebase/auth",KI="@firebase/auth-compat",YI="@firebase/database",JI="@firebase/database-compat",XI="@firebase/functions",ZI="@firebase/functions-compat",eS="@firebase/installations",tS="@firebase/installations-compat",nS="@firebase/messaging",rS="@firebase/messaging-compat",sS="@firebase/performance",iS="@firebase/performance-compat",oS="@firebase/remote-config",aS="@firebase/remote-config-compat",lS="@firebase/storage",cS="@firebase/storage-compat",uS="@firebase/firestore",dS="@firebase/vertexai-preview",hS="@firebase/firestore-compat",fS="firebase",mS="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="[DEFAULT]",pS={[qh]:"fire-core",[BI]:"fire-core-compat",[HI]:"fire-analytics",[$I]:"fire-analytics-compat",[GI]:"fire-app-check",[WI]:"fire-app-check-compat",[QI]:"fire-auth",[KI]:"fire-auth-compat",[YI]:"fire-rtdb",[JI]:"fire-rtdb-compat",[XI]:"fire-fn",[ZI]:"fire-fn-compat",[eS]:"fire-iid",[tS]:"fire-iid-compat",[nS]:"fire-fcm",[rS]:"fire-fcm-compat",[sS]:"fire-perf",[iS]:"fire-perf-compat",[oS]:"fire-rc",[aS]:"fire-rc-compat",[lS]:"fire-gcs",[cS]:"fire-gcs-compat",[uS]:"fire-fst",[hS]:"fire-fst-compat",[dS]:"fire-vertex","fire-js":"fire-js",[fS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,gS=new Map,Bh=new Map;function $0(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jn(t){const e=t.name;if(Bh.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Bh.set(e,t);for(const n of mc.values())$0(n,t);for(const n of gS.values())$0(n,t);return!0}function Ss(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ln(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new Is("app","Firebase",yS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=mS;function Xw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=Ww()),!n)throw kr.create("no-options");const i=mc.get(s);if(i){if(Zo(n,i.options)&&Zo(r,i.config))return i;throw kr.create("duplicate-app",{appName:s})}const a=new II(s);for(const u of Bh.values())a.addComponent(u);const c=new vS(n,r,a);return mc.set(s,c),c}function xm(t=zh){const e=mc.get(t);if(!e&&t===zh&&Ww())return Xw();if(!e)throw kr.create("no-app",{appName:t});return e}function Qt(t,e,n){var r;let s=(r=pS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(c.join(" "));return}jn(new fn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebase-heartbeat-database",wS=1,ea="firebase-heartbeat-store";let wd=null;function Zw(){return wd||(wd=Jw(xS,wS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),wd}async function _S(t){try{const n=(await Zw()).transaction(ea),r=await n.objectStore(ea).get(e_(t));return await n.done,r}catch(e){if(e instanceof yn)Yn.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function H0(t,e){try{const r=(await Zw()).transaction(ea,"readwrite");await r.objectStore(ea).put(e,e_(t)),await r.done}catch(n){if(n instanceof yn)Yn.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function e_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=1024,ES=30*24*60*60*1e3;class NS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=W0();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=ES}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Yn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=W0(),{heartbeatsToSend:r,unsentEntries:s}=TS(this._heartbeatsCache.heartbeats),i=fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yn.warn(n),""}}}function W0(){return new Date().toISOString().substring(0,10)}function TS(t,e=bS){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),G0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),G0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gm()?ym().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _S(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return H0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return H0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function G0(t){return fc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){jn(new fn("platform-logger",e=>new qI(e),"PRIVATE")),jn(new fn("heartbeat",e=>new NS(e),"PRIVATE")),Qt(qh,B0,t),Qt(qh,B0,"esm2017"),Qt("fire-js","")}SS("");function wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function t_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jS=t_,n_=new Is("auth","Firebase",t_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new eu("@firebase/auth");function AS(t,...e){pc.logLevel<=ae.WARN&&pc.warn(`Auth (${Pi}): ${t}`,...e)}function Al(t,...e){pc.logLevel<=ae.ERROR&&pc.error(`Auth (${Pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,...e){throw bm(t,...e)}function dn(t,...e){return bm(t,...e)}function _m(t,e,n){const r=Object.assign(Object.assign({},jS()),{[e]:n});return new Is("auth","Firebase",r).create(e,{appName:t.name})}function $n(t){return _m(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xt(t,"argument-error"),_m(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return n_.create(t,...e)}function ee(t,e,...n){if(!t)throw bm(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Al(e),new Error(e)}function Jn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CS(){return Q0()==="http:"||Q0()==="https:"}function Q0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CS()||pm()||"connection"in navigator)?navigator.onLine:!0}function RS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=aI()||cI()}get(){return PS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new va(3e4,6e4);function nr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vn(t,e,n,r,s={}){return s_(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=ya(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),r_.fetch()(i_(t,t.config.apiHost,n,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function s_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DS),e);try{const s=new VS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw cl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw cl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw cl(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _m(t,f,d);Xt(t,f)}}catch(s){if(s instanceof yn)throw s;Xt(t,"network-request-failed",{message:String(s)})}}async function xa(t,e,n,r,s={}){const i=await vn(t,e,n,r,s);return"mfaPendingCredential"in i&&Xt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function i_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Em(t.config,s):`${t.config.apiScheme}://${s}`}function MS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),LS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dn(t,e,r);return s.customData._tokenResponse=n,s}function K0(t){return t!==void 0&&t.enterprise!==void 0}class OS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function FS(t,e){return vn(t,"GET","/v2/recaptchaConfig",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e){return vn(t,"POST","/v1/accounts:delete",e)}async function o_(t,e){return vn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qS(t,e=!1){const n=Se(t),r=await n.getIdToken(e),s=Nm(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:jo(_d(s.auth_time)),issuedAtTime:jo(_d(s.iat)),expirationTime:jo(_d(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _d(t){return Number(t)*1e3}function Nm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Al("JWT malformed, contained fewer than 3 sections"),null;try{const s=$w(n);return s?JSON.parse(s):(Al("Failed to decode base64 JWT payload"),null)}catch(s){return Al("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Y0(t){const e=Nm(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ms(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yn&&zS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jo(this.lastLoginAt),this.creationTime=jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ms(t,o_(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?a_(i.providerUserInfo):[],c=HS(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Hh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function $S(t){const e=Se(t);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function a_(t){return t.map(e=>{var{providerId:n}=e,r=wm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e){const n=await s_(t,{},async()=>{const r=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=i_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",r_.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GS(t,e){return vn(t,"POST","/v2/accounts:revokeToken",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Y0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await WS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new ai;return r&&(ee(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ai,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Un{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ms(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qS(this,e)}reload(){return $S(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Un(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await ms(this,US(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,b=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:L,isAnonymous:D,providerData:V,stsTokenManager:N}=n;ee(T&&N,e,"internal-error");const y=ai.fromJSON(this.name,N);ee(typeof T=="string",e,"internal-error"),lr(m,e.name),lr(g,e.name),ee(typeof L=="boolean",e,"internal-error"),ee(typeof D=="boolean",e,"internal-error"),lr(_,e.name),lr(S,e.name),lr(k,e.name),lr(R,e.name),lr(E,e.name),lr(b,e.name);const v=new Un({uid:T,auth:e,email:g,emailVerified:L,displayName:m,isAnonymous:D,photoURL:S,phoneNumber:_,tenantId:k,stsTokenManager:y,createdAt:E,lastLoginAt:b});return V&&Array.isArray(V)&&(v.providerData=V.map(x=>Object.assign({},x))),R&&(v._redirectEventId=R),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new ai;s.updateFromServerResponse(n);const i=new Un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?a_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new ai;c.updateFromIdToken(r);const u=new Un({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;function qn(t){Jn(t instanceof Function,"Expected a class definition");let e=J0.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,J0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l_.type="NONE";const X0=l_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e,n){return`firebase:${t}:${e}:${n}`}class li{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=kl(this.userKey,s.apiKey,i),this.fullPersistenceKey=kl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Un._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new li(qn(X0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||qn(X0);const a=kl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const m=Un._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new li(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new li(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(p_(e))return"Webos";if(u_(e))return"Safari";if((e.includes("chrome/")||d_(e))&&!e.includes("edge/"))return"Chrome";if(f_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c_(t=mt()){return/firefox\//i.test(t)}function u_(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d_(t=mt()){return/crios\//i.test(t)}function h_(t=mt()){return/iemobile/i.test(t)}function f_(t=mt()){return/android/i.test(t)}function m_(t=mt()){return/blackberry/i.test(t)}function p_(t=mt()){return/webos/i.test(t)}function Tm(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QS(t=mt()){var e;return Tm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KS(){return uI()&&document.documentMode===10}function g_(t=mt()){return Tm(t)||f_(t)||p_(t)||m_(t)||/windows phone/i.test(t)||h_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e=[]){let n;switch(t){case"Browser":n=Z0(mt());break;case"Worker":n=`${Z0(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t,e={}){return vn(t,"GET","/v2/passwordPolicy",nr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=6;class ZS{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:XS,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ey(this),this.idTokenSubscription=new ey(this),this.beforeStateQueue=new YS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await li.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await o_(this,{idToken:e}),r=await Un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ln(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject($n(this));const n=e?Se(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JS(this),n=new ZS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Is("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await li.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rr(t){return Se(t)}class ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=gI(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tj(t){tu=t}function v_(t){return tu.loadJS(t)}function nj(){return tu.recaptchaEnterpriseScript}function rj(){return tu.gapiScript}function sj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ij="recaptcha-enterprise",oj="NO_RECAPTCHA";class aj{constructor(e){this.type=ij,this.auth=rr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{FS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new OS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;K0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(oj)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&K0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=nj();u.length!==0&&(u+=c),v_(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function ty(t,e,n,r=!1){const s=new aj(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ty(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ty(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t,e){const n=Ss(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Zo(i,e??{}))return s;Xt(s,"already-initialized")}return n.initialize({options:e})}function cj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uj(t,e,n){const r=rr(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=x_(e),{host:a,port:c}=dj(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),hj()}function x_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dj(t){const e=x_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ny(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:ny(a)}}}function ny(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function fj(t,e){return vn(t,"POST","/v1/accounts:update",e)}async function mj(t,e){return vn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){return xa(t,"POST","/v1/accounts:signInWithPassword",nr(t,e))}async function w_(t,e){return vn(t,"POST","/v1/accounts:sendOobCode",nr(t,e))}async function gj(t,e){return w_(t,e)}async function yj(t,e){return w_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return xa(t,"POST","/v1/accounts:signInWithEmailLink",nr(t,e))}async function xj(t,e){return xa(t,"POST","/v1/accounts:signInWithEmailLink",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Im{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ta(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ta(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yc(e,n,"signInWithPassword",pj);case"emailLink":return vj(e,{email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yc(e,r,"signUpPassword",mj);case"emailLink":return xj(e,{idToken:n,email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t,e){return xa(t,"POST","/v1/accounts:signInWithIdp",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="http://localhost";class ps extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=wm(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new ps(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ci(e,n)}buildRequest(){const e={requestUri:wj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ya(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bj(t){const e=ho(fo(t)).link,n=e?ho(fo(e)).deep_link_id:null,r=ho(fo(t)).deep_link_id;return(r?ho(fo(r)).link:null)||r||n||e||t}class Sm{constructor(e){var n,r,s,i,a,c;const u=ho(fo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=_j((s=u.mode)!==null&&s!==void 0?s:null);ee(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=bj(e);try{return new Sm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.providerId=js.PROVIDER_ID}static credential(e,n){return ta._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sm.parseLink(n);return ee(r,"argument-error"),ta._fromEmailAndCode(e,r.code,r.tenantId)}}js.PROVIDER_ID="password";js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends wa{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ln.credential(n,r)}catch{return null}}}Ln.GOOGLE_SIGN_IN_METHOD="google.com";Ln.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends wa{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends wa{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ej(t,e){return xa(t,"POST","/v1/accounts:signUp",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Un._fromIdTokenResponse(e,r,s),a=ry(r);return new gs({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ry(r);return new gs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ry(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends yn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new vc(e,n,r,s)}}function __(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(t,i,e,r):i})}async function Nj(t,e,n=!1){const r=await ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(t,e,n=!1){const{auth:r}=t;if(ln(r.app))return Promise.reject($n(r));const s="reauthenticate";try{const i=await ms(t,__(r,s,e,t),n);ee(i.idToken,r,"internal-error");const a=Nm(i.idToken);ee(a,r,"internal-error");const{sub:c}=a;return ee(t.uid===c,r,"user-mismatch"),gs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(t,e,n=!1){if(ln(t.app))return Promise.reject($n(t));const r="signIn",s=await __(t,r,e),i=await gs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Tj(t,e){return E_(rr(t),e)}async function Ij(t,e){return b_(Se(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(t){const e=rr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wh(t,e,n){const r=rr(t);await yc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",yj)}async function T_(t,e,n){if(ln(t.app))return Promise.reject($n(t));const r=rr(t),a=await yc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ej).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&N_(t),u}),c=await gs._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Gh(t,e,n){return ln(t.app)?Promise.reject($n(t)):Tj(Se(t),js.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N_(t),r})}async function sy(t,e){const n=Se(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await gj(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return vn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Se(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await ms(r,Sj(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function jj(t,e){return Aj(Se(t),null,e)}async function Aj(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const a=await ms(t,fj(r,i));await t._updateTokensIfNecessary(a,!0)}function kj(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function Cj(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function Pj(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function Rj(t){return Se(t).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=1e3,Lj=10;class j_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);KS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Lj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j_.type="LOCAL";const Mj=j_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}A_.type="SESSION";const k_=A_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await Vj(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Am("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function Fj(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function Uj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zj(){return C_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="firebaseLocalStorageDb",Bj=1,wc="firebaseLocalStorage",R_="fbase_key";class _a{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ru(t,e){return t.transaction([wc],e?"readwrite":"readonly").objectStore(wc)}function $j(){const t=indexedDB.deleteDatabase(P_);return new _a(t).toPromise()}function Qh(){const t=indexedDB.open(P_,Bj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wc,{keyPath:R_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wc)?e(r):(r.close(),await $j(),e(await Qh()))})})}async function iy(t,e,n){const r=ru(t,!0).put({[R_]:e,value:n});return new _a(r).toPromise()}async function Hj(t,e){const n=ru(t,!1).get(e),r=await new _a(n).toPromise();return r===void 0?null:r.value}function oy(t,e){const n=ru(t,!0).delete(e);return new _a(n).toPromise()}const Wj=800,Gj=3;class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Gj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nu._getInstance(zj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Uj(),!this.activeServiceWorker)return;this.sender=new Oj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qh();return await iy(e,xc,"1"),await oy(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Hj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>oy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ru(s,!1).getAll();return new _a(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Wj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D_.type="LOCAL";const Qj=D_;new va(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e){return e?qn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Kj(t){return E_(t.auth,new km(t),t.bypassAuthState)}function Yj(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),b_(n,new km(t),t.bypassAuthState)}async function Jj(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),Nj(n,new km(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kj;case"linkViaPopup":case"linkViaRedirect":return Jj;case"reauthViaPopup":case"reauthViaRedirect":return Yj;default:Xt(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new va(2e3,1e4);async function Zj(t,e,n){if(ln(t.app))return Promise.reject(dn(t,"operation-not-supported-in-this-environment"));const r=rr(t);kS(t,e,jm);const s=L_(r,n);return new ns(r,"signInViaPopup",e,s).executeNotNull()}class ns extends M_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xj.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="pendingRedirect",Cl=new Map;class tA extends M_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cl.get(this.auth._key());if(!e){try{const r=await nA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cl.set(this.auth._key(),e)}return this.bypassAuthState||Cl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nA(t,e){const n=iA(e),r=sA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function rA(t,e){Cl.set(t._key(),e)}function sA(t){return qn(t._redirectPersistence)}function iA(t){return kl(eA,t.config.apiKey,t.name)}async function oA(t,e,n=!1){if(ln(t.app))return Promise.reject($n(t));const r=rr(t),s=L_(r,e),a=await new tA(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=10*60*1e3;class lA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!V_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aA&&this.cachedEventUids.clear(),this.cachedEventUids.has(ay(e))}saveEventToCache(e){this.cachedEventUids.add(ay(e)),this.lastProcessedEventTime=Date.now()}}function ay(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function V_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e={}){return vn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hA=/^https?/;async function fA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uA(t);for(const n of e)try{if(mA(n))return}catch{}Xt(t,"unauthorized-domain")}function mA(t){const e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!hA.test(n))return!1;if(dA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new va(3e4,6e4);function ly(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gA(t){return new Promise((e,n)=>{var r,s,i;function a(){ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ly(),n(dn(t,"network-request-failed"))},timeout:pA.get()})}if(!((s=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)a();else{const c=sj("iframefcb");return Tn()[c]=()=>{gapi.load?a():n(dn(t,"network-request-failed"))},v_(`${rj()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Pl=null,e})}let Pl=null;function yA(t){return Pl=Pl||gA(t),Pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new va(5e3,15e3),xA="__/auth/iframe",wA="emulator/auth/iframe",_A={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EA(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Em(e,wA):`https://${t.config.authDomain}/${xA}`,r={apiKey:e.apiKey,appName:t.name,v:Pi},s=bA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ya(r).slice(1)}`}async function NA(t){const e=await yA(t),n=Tn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:EA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_A,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=dn(t,"network-request-failed"),c=Tn().setTimeout(()=>{i(a)},vA.get());function u(){Tn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IA=500,SA=600,jA="_blank",AA="http://localhost";class cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kA(t,e,n,r=IA,s=SA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},TA),{width:r.toString(),height:s.toString(),top:i,left:a}),d=mt().toLowerCase();n&&(c=d_(d)?jA:n),c_(d)&&(e=e||AA,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,S])=>`${g}${_}=${S},`,"");if(QS(d)&&c!=="_self")return CA(e||"",c),new cy(null);const m=window.open(e||"",c,f);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new cy(m)}function CA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="__/auth/handler",RA="emulator/auth/handler",DA=encodeURIComponent("fac");async function uy(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pi,eventId:s};if(e instanceof jm){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",pI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof wa){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${DA}=${encodeURIComponent(u)}`:"";return`${LA(t)}?${ya(c).slice(1)}${d}`}function LA({config:t}){return t.emulator?Em(t,RA):`https://${t.authDomain}/${PA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="webStorageSupport";class MA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k_,this._completeRedirectFn=oA,this._overrideRedirectResult=rA}async _openPopup(e,n,r,s){var i;Jn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await uy(e,n,r,$h(),s);return kA(e,a,Am())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await uy(e,n,r,$h(),s);return Fj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NA(e),r=new lA(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bd,{type:bd},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[bd];a!==void 0&&n(!!a),Xt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g_()||u_()||Tm()}}const VA=MA;var dy="@firebase/auth",hy="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UA(t){jn(new fn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y_(t)},d=new ej(r,s,i,u);return cj(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jn(new fn("auth-internal",e=>{const n=rr(e.getProvider("auth").getImmediate());return(r=>new OA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qt(dy,hy,FA(t)),Qt(dy,hy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=5*60,zA=Gw("authIdTokenMaxAge")||qA;let fy=null;const BA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zA)return;const s=n==null?void 0:n.token;fy!==s&&(fy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $A(t=xm()){const e=Ss(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lj(t,{popupRedirectResolver:VA,persistence:[Qj,Mj,k_]}),r=Gw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=BA(i.toString());Cj(n,a,()=>a(n.currentUser)),kj(n,c=>a(c))}}const s=Hw("auth");return s&&uj(n,`http://${s}`),n}function HA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",HA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UA("Browser");var WA="firebase",GA="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt(WA,GA,"app");var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,O_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,y){function v(){}v.prototype=y.prototype,N.D=y.prototype,N.prototype=new v,N.prototype.constructor=N,N.C=function(x,A,P){for(var j=Array(arguments.length-2),le=2;le<arguments.length;le++)j[le-2]=arguments[le];return y.prototype[A].apply(x,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,y,v){v||(v=0);var x=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)x[A]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(A=0;16>A;++A)x[A]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=N.g[0],v=N.g[1],A=N.g[2];var P=N.g[3],j=y+(P^v&(A^P))+x[0]+3614090360&4294967295;y=v+(j<<7&4294967295|j>>>25),j=P+(A^y&(v^A))+x[1]+3905402710&4294967295,P=y+(j<<12&4294967295|j>>>20),j=A+(v^P&(y^v))+x[2]+606105819&4294967295,A=P+(j<<17&4294967295|j>>>15),j=v+(y^A&(P^y))+x[3]+3250441966&4294967295,v=A+(j<<22&4294967295|j>>>10),j=y+(P^v&(A^P))+x[4]+4118548399&4294967295,y=v+(j<<7&4294967295|j>>>25),j=P+(A^y&(v^A))+x[5]+1200080426&4294967295,P=y+(j<<12&4294967295|j>>>20),j=A+(v^P&(y^v))+x[6]+2821735955&4294967295,A=P+(j<<17&4294967295|j>>>15),j=v+(y^A&(P^y))+x[7]+4249261313&4294967295,v=A+(j<<22&4294967295|j>>>10),j=y+(P^v&(A^P))+x[8]+1770035416&4294967295,y=v+(j<<7&4294967295|j>>>25),j=P+(A^y&(v^A))+x[9]+2336552879&4294967295,P=y+(j<<12&4294967295|j>>>20),j=A+(v^P&(y^v))+x[10]+4294925233&4294967295,A=P+(j<<17&4294967295|j>>>15),j=v+(y^A&(P^y))+x[11]+2304563134&4294967295,v=A+(j<<22&4294967295|j>>>10),j=y+(P^v&(A^P))+x[12]+1804603682&4294967295,y=v+(j<<7&4294967295|j>>>25),j=P+(A^y&(v^A))+x[13]+4254626195&4294967295,P=y+(j<<12&4294967295|j>>>20),j=A+(v^P&(y^v))+x[14]+2792965006&4294967295,A=P+(j<<17&4294967295|j>>>15),j=v+(y^A&(P^y))+x[15]+1236535329&4294967295,v=A+(j<<22&4294967295|j>>>10),j=y+(A^P&(v^A))+x[1]+4129170786&4294967295,y=v+(j<<5&4294967295|j>>>27),j=P+(v^A&(y^v))+x[6]+3225465664&4294967295,P=y+(j<<9&4294967295|j>>>23),j=A+(y^v&(P^y))+x[11]+643717713&4294967295,A=P+(j<<14&4294967295|j>>>18),j=v+(P^y&(A^P))+x[0]+3921069994&4294967295,v=A+(j<<20&4294967295|j>>>12),j=y+(A^P&(v^A))+x[5]+3593408605&4294967295,y=v+(j<<5&4294967295|j>>>27),j=P+(v^A&(y^v))+x[10]+38016083&4294967295,P=y+(j<<9&4294967295|j>>>23),j=A+(y^v&(P^y))+x[15]+3634488961&4294967295,A=P+(j<<14&4294967295|j>>>18),j=v+(P^y&(A^P))+x[4]+3889429448&4294967295,v=A+(j<<20&4294967295|j>>>12),j=y+(A^P&(v^A))+x[9]+568446438&4294967295,y=v+(j<<5&4294967295|j>>>27),j=P+(v^A&(y^v))+x[14]+3275163606&4294967295,P=y+(j<<9&4294967295|j>>>23),j=A+(y^v&(P^y))+x[3]+4107603335&4294967295,A=P+(j<<14&4294967295|j>>>18),j=v+(P^y&(A^P))+x[8]+1163531501&4294967295,v=A+(j<<20&4294967295|j>>>12),j=y+(A^P&(v^A))+x[13]+2850285829&4294967295,y=v+(j<<5&4294967295|j>>>27),j=P+(v^A&(y^v))+x[2]+4243563512&4294967295,P=y+(j<<9&4294967295|j>>>23),j=A+(y^v&(P^y))+x[7]+1735328473&4294967295,A=P+(j<<14&4294967295|j>>>18),j=v+(P^y&(A^P))+x[12]+2368359562&4294967295,v=A+(j<<20&4294967295|j>>>12),j=y+(v^A^P)+x[5]+4294588738&4294967295,y=v+(j<<4&4294967295|j>>>28),j=P+(y^v^A)+x[8]+2272392833&4294967295,P=y+(j<<11&4294967295|j>>>21),j=A+(P^y^v)+x[11]+1839030562&4294967295,A=P+(j<<16&4294967295|j>>>16),j=v+(A^P^y)+x[14]+4259657740&4294967295,v=A+(j<<23&4294967295|j>>>9),j=y+(v^A^P)+x[1]+2763975236&4294967295,y=v+(j<<4&4294967295|j>>>28),j=P+(y^v^A)+x[4]+1272893353&4294967295,P=y+(j<<11&4294967295|j>>>21),j=A+(P^y^v)+x[7]+4139469664&4294967295,A=P+(j<<16&4294967295|j>>>16),j=v+(A^P^y)+x[10]+3200236656&4294967295,v=A+(j<<23&4294967295|j>>>9),j=y+(v^A^P)+x[13]+681279174&4294967295,y=v+(j<<4&4294967295|j>>>28),j=P+(y^v^A)+x[0]+3936430074&4294967295,P=y+(j<<11&4294967295|j>>>21),j=A+(P^y^v)+x[3]+3572445317&4294967295,A=P+(j<<16&4294967295|j>>>16),j=v+(A^P^y)+x[6]+76029189&4294967295,v=A+(j<<23&4294967295|j>>>9),j=y+(v^A^P)+x[9]+3654602809&4294967295,y=v+(j<<4&4294967295|j>>>28),j=P+(y^v^A)+x[12]+3873151461&4294967295,P=y+(j<<11&4294967295|j>>>21),j=A+(P^y^v)+x[15]+530742520&4294967295,A=P+(j<<16&4294967295|j>>>16),j=v+(A^P^y)+x[2]+3299628645&4294967295,v=A+(j<<23&4294967295|j>>>9),j=y+(A^(v|~P))+x[0]+4096336452&4294967295,y=v+(j<<6&4294967295|j>>>26),j=P+(v^(y|~A))+x[7]+1126891415&4294967295,P=y+(j<<10&4294967295|j>>>22),j=A+(y^(P|~v))+x[14]+2878612391&4294967295,A=P+(j<<15&4294967295|j>>>17),j=v+(P^(A|~y))+x[5]+4237533241&4294967295,v=A+(j<<21&4294967295|j>>>11),j=y+(A^(v|~P))+x[12]+1700485571&4294967295,y=v+(j<<6&4294967295|j>>>26),j=P+(v^(y|~A))+x[3]+2399980690&4294967295,P=y+(j<<10&4294967295|j>>>22),j=A+(y^(P|~v))+x[10]+4293915773&4294967295,A=P+(j<<15&4294967295|j>>>17),j=v+(P^(A|~y))+x[1]+2240044497&4294967295,v=A+(j<<21&4294967295|j>>>11),j=y+(A^(v|~P))+x[8]+1873313359&4294967295,y=v+(j<<6&4294967295|j>>>26),j=P+(v^(y|~A))+x[15]+4264355552&4294967295,P=y+(j<<10&4294967295|j>>>22),j=A+(y^(P|~v))+x[6]+2734768916&4294967295,A=P+(j<<15&4294967295|j>>>17),j=v+(P^(A|~y))+x[13]+1309151649&4294967295,v=A+(j<<21&4294967295|j>>>11),j=y+(A^(v|~P))+x[4]+4149444226&4294967295,y=v+(j<<6&4294967295|j>>>26),j=P+(v^(y|~A))+x[11]+3174756917&4294967295,P=y+(j<<10&4294967295|j>>>22),j=A+(y^(P|~v))+x[2]+718787259&4294967295,A=P+(j<<15&4294967295|j>>>17),j=v+(P^(A|~y))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+y&4294967295,N.g[1]=N.g[1]+(A+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+A&4294967295,N.g[3]=N.g[3]+P&4294967295}r.prototype.u=function(N,y){y===void 0&&(y=N.length);for(var v=y-this.blockSize,x=this.B,A=this.h,P=0;P<y;){if(A==0)for(;P<=v;)s(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<y;)if(x[A++]=N.charCodeAt(P++),A==this.blockSize){s(this,x),A=0;break}}else for(;P<y;)if(x[A++]=N[P++],A==this.blockSize){s(this,x),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var y=1;y<N.length-8;++y)N[y]=0;var v=8*this.o;for(y=N.length-8;y<N.length;++y)N[y]=v&255,v/=256;for(this.u(N),N=Array(16),y=v=0;4>y;++y)for(var x=0;32>x;x+=8)N[v++]=this.g[y]>>>x&255;return N};function i(N,y){var v=c;return Object.prototype.hasOwnProperty.call(v,N)?v[N]:v[N]=y(N)}function a(N,y){this.h=y;for(var v=[],x=!0,A=N.length-1;0<=A;A--){var P=N[A]|0;x&&P==y||(v[A]=P,x=!1)}this.g=v}var c={};function u(N){return-128<=N&&128>N?i(N,function(y){return new a([y|0],0>y?-1:0)}):new a([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return R(d(-N));for(var y=[],v=1,x=0;N>=v;x++)y[x]=N/v|0,v*=4294967296;return new a(y,0)}function f(N,y){if(N.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(N.charAt(0)=="-")return R(f(N.substring(1),y));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(y,8)),x=m,A=0;A<N.length;A+=8){var P=Math.min(8,N.length-A),j=parseInt(N.substring(A,A+P),y);8>P?(P=d(Math.pow(y,P)),x=x.j(P).add(d(j))):(x=x.j(v),x=x.add(d(j)))}return x}var m=u(0),g=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-R(this).m();for(var N=0,y=1,v=0;v<this.g.length;v++){var x=this.i(v);N+=(0<=x?x:4294967296+x)*y,y*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S(this))return"0";if(k(this))return"-"+R(this).toString(N);for(var y=d(Math.pow(N,6)),v=this,x="";;){var A=L(v,y).g;v=E(v,A.j(y));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(N);if(v=A,S(v))return P+x;for(;6>P.length;)P="0"+P;x=P+x}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function S(N){if(N.h!=0)return!1;for(var y=0;y<N.g.length;y++)if(N.g[y]!=0)return!1;return!0}function k(N){return N.h==-1}t.l=function(N){return N=E(this,N),k(N)?-1:S(N)?0:1};function R(N){for(var y=N.g.length,v=[],x=0;x<y;x++)v[x]=~N.g[x];return new a(v,~N.h).add(g)}t.abs=function(){return k(this)?R(this):this},t.add=function(N){for(var y=Math.max(this.g.length,N.g.length),v=[],x=0,A=0;A<=y;A++){var P=x+(this.i(A)&65535)+(N.i(A)&65535),j=(P>>>16)+(this.i(A)>>>16)+(N.i(A)>>>16);x=j>>>16,P&=65535,j&=65535,v[A]=j<<16|P}return new a(v,v[v.length-1]&-2147483648?-1:0)};function E(N,y){return N.add(R(y))}t.j=function(N){if(S(this)||S(N))return m;if(k(this))return k(N)?R(this).j(R(N)):R(R(this).j(N));if(k(N))return R(this.j(R(N)));if(0>this.l(_)&&0>N.l(_))return d(this.m()*N.m());for(var y=this.g.length+N.g.length,v=[],x=0;x<2*y;x++)v[x]=0;for(x=0;x<this.g.length;x++)for(var A=0;A<N.g.length;A++){var P=this.i(x)>>>16,j=this.i(x)&65535,le=N.i(A)>>>16,pe=N.i(A)&65535;v[2*x+2*A]+=j*pe,b(v,2*x+2*A),v[2*x+2*A+1]+=P*pe,b(v,2*x+2*A+1),v[2*x+2*A+1]+=j*le,b(v,2*x+2*A+1),v[2*x+2*A+2]+=P*le,b(v,2*x+2*A+2)}for(x=0;x<y;x++)v[x]=v[2*x+1]<<16|v[2*x];for(x=y;x<2*y;x++)v[x]=0;return new a(v,0)};function b(N,y){for(;(N[y]&65535)!=N[y];)N[y+1]+=N[y]>>>16,N[y]&=65535,y++}function T(N,y){this.g=N,this.h=y}function L(N,y){if(S(y))throw Error("division by zero");if(S(N))return new T(m,m);if(k(N))return y=L(R(N),y),new T(R(y.g),R(y.h));if(k(y))return y=L(N,R(y)),new T(R(y.g),y.h);if(30<N.g.length){if(k(N)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,x=y;0>=x.l(N);)v=D(v),x=D(x);var A=V(v,1),P=V(x,1);for(x=V(x,2),v=V(v,2);!S(x);){var j=P.add(x);0>=j.l(N)&&(A=A.add(v),P=j),x=V(x,1),v=V(v,1)}return y=E(N,A.j(y)),new T(A,y)}for(A=m;0<=N.l(y);){for(v=Math.max(1,Math.floor(N.m()/y.m())),x=Math.ceil(Math.log(v)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),P=d(v),j=P.j(y);k(j)||0<j.l(N);)v-=x,P=d(v),j=P.j(y);S(P)&&(P=g),A=A.add(P),N=E(N,j)}return new T(A,N)}t.A=function(N){return L(this,N).h},t.and=function(N){for(var y=Math.max(this.g.length,N.g.length),v=[],x=0;x<y;x++)v[x]=this.i(x)&N.i(x);return new a(v,this.h&N.h)},t.or=function(N){for(var y=Math.max(this.g.length,N.g.length),v=[],x=0;x<y;x++)v[x]=this.i(x)|N.i(x);return new a(v,this.h|N.h)},t.xor=function(N){for(var y=Math.max(this.g.length,N.g.length),v=[],x=0;x<y;x++)v[x]=this.i(x)^N.i(x);return new a(v,this.h^N.h)};function D(N){for(var y=N.g.length+1,v=[],x=0;x<y;x++)v[x]=N.i(x)<<1|N.i(x-1)>>>31;return new a(v,N.h)}function V(N,y){var v=y>>5;y%=32;for(var x=N.g.length-v,A=[],P=0;P<x;P++)A[P]=0<y?N.i(P+v)>>>y|N.i(P+v+1)<<32-y:N.i(P+v);return new a(A,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,O_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,as=a}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F_,U_,mo,q_,Rl,Kh,z_,B_,$_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ul=="object"&&ul];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var M=l[w];if(!(M in p))break e;p=p[M]}l=l[l.length-1],w=p[l],h=h(w),h!=w&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,w=!1,M={next:function(){if(!w&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,M,O){for(var $=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)$[ve-2]=arguments[ve];return h.prototype[M].apply(w,$)}}function k(l){const h=l.length;if(0<h){const p=Array(h);for(let w=0;w<h;w++)p[w]=l[w];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const M=l.length||0,O=w.length||0;l.length=M+O;for(let $=0;$<O;$++)l[M+$]=w[$]}else l.push(w)}}class E{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function b(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function L(l){return L[" "](l),l}L[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(l,h,p){for(const w in l)h.call(p,l[w],w,l)}function N(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,h){let p,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(p in w)l[p]=w[p];for(let O=0;O<v.length;O++)p=v[O],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function A(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){c.setTimeout(()=>{throw l},0)}function j(){var l=W;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class le{constructor(){this.h=this.g=null}add(h,p){const w=pe.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var pe=new E(()=>new $e,l=>l.reset());class $e{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let H,B=!1,W=new le,X=()=>{const l=c.Promise.resolve(void 0);H=()=>{l.then(he)}};var he=()=>{for(var l;l=j();){try{l.h.call(l.g)}catch(p){P(p)}var h=pe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Nt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function Zt(l,h){if(_e.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{L(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:en[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Zt.aa.h.call(this)}}S(Zt,_e);var en={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Aa=0;function ka(l,h,p,w,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=M,this.key=++Aa,this.da=this.fa=!1}function Ps(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Rs(l){this.src=l,this.g={},this.h=0}Rs.prototype.add=function(l,h,p,w,M){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var $=Pt(l,h,w,M);return-1<$?(h=l[$],p||(h.fa=!1)):(h=new ka(h,this.src,O,!!w,M),h.fa=p,l.push(h)),h};function Br(l,h){var p=h.type;if(p in l.g){var w=l.g[p],M=Array.prototype.indexOf.call(w,h,void 0),O;(O=0<=M)&&Array.prototype.splice.call(w,M,1),O&&(Ps(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Pt(l,h,p,w){for(var M=0;M<l.length;++M){var O=l[M];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==w)return M}return-1}var U="closure_lm_"+(1e6*Math.random()|0),ie={};function zt(l,h,p,w,M){if(Array.isArray(h)){for(var O=0;O<h.length;O++)zt(l,h[O],p,w,M);return null}return p=Np(p),l&&l[tn]?l.K(h,p,d(w)?!!w.capture:!!w,M):Bt(l,h,p,!1,w,M)}function Bt(l,h,p,w,M,O){if(!h)throw Error("Invalid event type");var $=d(M)?!!M.capture:!!M,ve=Tu(l);if(ve||(l[U]=ve=new Rs(l)),p=ve.add(h,p,w,$,O),p.proxy)return p;if(w=W1(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)Nt||(M=$),M===void 0&&(M=!1),l.addEventListener(h.toString(),w,M);else if(l.attachEvent)l.attachEvent(Ep(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function W1(){function l(p){return h.call(l.src,l.listener,p)}const h=G1;return l}function bp(l,h,p,w,M){if(Array.isArray(h))for(var O=0;O<h.length;O++)bp(l,h[O],p,w,M);else w=d(w)?!!w.capture:!!w,p=Np(p),l&&l[tn]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Pt(O,p,w,M),-1<p&&(Ps(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Tu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Pt(h,p,w,M)),(p=-1<l?h[l]:null)&&Nu(p))}function Nu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[tn])Br(h.i,l);else{var p=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(p,w,l.capture):h.detachEvent?h.detachEvent(Ep(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=Tu(h))?(Br(p,l),p.h==0&&(p.src=null,h[U]=null)):Ps(l)}}}function Ep(l){return l in ie?ie[l]:ie[l]="on"+l}function G1(l,h){if(l.da)l=!0;else{h=new Zt(h,this);var p=l.listener,w=l.ha||l.src;l.fa&&Nu(l),l=p.call(w,h)}return l}function Tu(l){return l=l[U],l instanceof Rs?l:null}var Iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Np(l){return typeof l=="function"?l:(l[Iu]||(l[Iu]=function(h){return l.handleEvent(h)}),l[Iu])}function rt(){ge.call(this),this.i=new Rs(this),this.M=this,this.F=null}S(rt,ge),rt.prototype[tn]=!0,rt.prototype.removeEventListener=function(l,h,p,w){bp(this,l,h,p,w)};function pt(l,h){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new _e(h,l);else if(h instanceof _e)h.target=h.target||l;else{var M=h;h=new _e(w,l),x(h,M)}if(M=!0,p)for(var O=p.length-1;0<=O;O--){var $=h.g=p[O];M=Ca($,w,!0,h)&&M}if($=h.g=l,M=Ca($,w,!0,h)&&M,M=Ca($,w,!1,h)&&M,p)for(O=0;O<p.length;O++)$=h.g=p[O],M=Ca($,w,!1,h)&&M}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],w=0;w<p.length;w++)Ps(p[w]);delete l.g[h],l.h--}}this.F=null},rt.prototype.K=function(l,h,p,w){return this.i.add(String(l),h,!1,p,w)},rt.prototype.L=function(l,h,p,w){return this.i.add(String(l),h,!0,p,w)};function Ca(l,h,p,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,O=0;O<h.length;++O){var $=h[O];if($&&!$.da&&$.capture==p){var ve=$.listener,Ke=$.ha||$.src;$.fa&&Br(l.i,$),M=ve.call(Ke,w)!==!1&&M}}return M&&!w.defaultPrevented}function Tp(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Ip(l){l.g=Tp(()=>{l.g=null,l.i&&(l.i=!1,Ip(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Q1 extends ge{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ip(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(l){ge.call(this),this.h=l,this.g={}}S(Oi,ge);var Sp=[];function jp(l){V(l.g,function(h,p){this.g.hasOwnProperty(p)&&Nu(h)},l),l.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),jp(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Su=c.JSON.stringify,K1=c.JSON.parse,Y1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function ju(){}ju.prototype.h=null;function Ap(l){return l.h||(l.h=l.i())}function kp(){}var Fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Au(){_e.call(this,"d")}S(Au,_e);function ku(){_e.call(this,"c")}S(ku,_e);var $r={},Cp=null;function Pa(){return Cp=Cp||new rt}$r.La="serverreachability";function Pp(l){_e.call(this,$r.La,l)}S(Pp,_e);function Ui(l){const h=Pa();pt(h,new Pp(h))}$r.STAT_EVENT="statevent";function Rp(l,h){_e.call(this,$r.STAT_EVENT,l),this.stat=h}S(Rp,_e);function gt(l){const h=Pa();pt(h,new Rp(h,l))}$r.Ma="timingevent";function Dp(l,h){_e.call(this,$r.Ma,l),this.size=h}S(Dp,_e);function qi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function J1(l,h,p,w,M,O){l.info(function(){if(l.g)if(O)for(var $="",ve=O.split("&"),Ke=0;Ke<ve.length;Ke++){var fe=ve[Ke].split("=");if(1<fe.length){var st=fe[0];fe=fe[1];var it=st.split("_");$=2<=it.length&&it[1]=="type"?$+(st+"="+fe+"&"):$+(st+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+h+`
`+p+`
`+$})}function X1(l,h,p,w,M,O,$){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+h+`
`+p+`
`+O+" "+$})}function Ds(l,h,p,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+e2(l,p)+(w?" "+w:"")})}function Z1(l,h){l.info(function(){return"TIMEOUT: "+h})}zi.prototype.info=function(){};function e2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return Su(p)}catch{return h}}var Ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cu;function Da(){}S(Da,ju),Da.prototype.g=function(){return new XMLHttpRequest},Da.prototype.i=function(){return{}},Cu=new Da;function sr(l,h,p,w){this.j=l,this.i=h,this.l=p,this.R=w||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mp}function Mp(){this.i=null,this.g="",this.h=!1}var Vp={},Pu={};function Ru(l,h,p){l.L=1,l.v=Oa(kn(h)),l.m=p,l.P=!0,Op(l,null)}function Op(l,h){l.F=Date.now(),La(l),l.A=kn(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Xp(p.i,"t",w),l.C=0,p=l.j.J,l.h=new Mp,l.g=gg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Q1(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,w=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Sp[0]=M.toString()),M=Sp);for(var O=0;O<M.length;O++){var $=zt(p,M[O],w||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ui(),J1(l.i,l.u,l.A,l.l,l.R,l.m)}sr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Cn(l)==3?h.j():this.Y(l)},sr.prototype.Y=function(l){try{if(l==this.g)e:{const it=Cn(this.g);var h=this.g.Ba();const Vs=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||ig(this.g)))){this.J||it!=4||h==7||(h==8||0>=Vs?Ui(3):Ui(2)),Du(this);var p=this.g.Z();this.X=p;t:if(Fp(this)){var w=ig(this.g);l="";var M=w.length,O=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Bi(this);var $="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(w[h],{stream:!(O&&h==M-1)});w.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,X1(this.i,this.u,this.A,this.l,this.R,it,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Ke=this.g;if((ve=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ve)){var fe=ve;break t}}fe=null}if(p=fe)Ds(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lu(this,p);else{this.o=!1,this.s=3,gt(12),Hr(this),Bi(this);break e}}if(this.P){p=!0;let nn;for(;!this.J&&this.C<$.length;)if(nn=t2(this,$),nn==Pu){it==4&&(this.s=4,gt(14),p=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Vp){this.s=4,gt(15),Ds(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Ds(this.i,this.l,nn,null),Lu(this,nn);if(Fp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||$.length!=0||this.h.h||(this.s=1,gt(16),p=!1),this.o=this.o&&p,!p)Ds(this.i,this.l,$,"[Invalid Chunked Response]"),Hr(this),Bi(this);else if(0<$.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),qu(st),st.M=!0,gt(11))}}else Ds(this.i,this.l,$,null),Lu(this,$);it==4&&Hr(this),this.o&&!this.J&&(it==4?hg(this.j,this):(this.o=!1,La(this)))}else v2(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Hr(this),Bi(this)}}}catch{}finally{}};function Fp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function t2(l,h){var p=l.C,w=h.indexOf(`
`,p);return w==-1?Pu:(p=Number(h.substring(p,w)),isNaN(p)?Vp:(w+=1,w+p>h.length?Pu:(h=h.slice(w,w+p),l.C=w+p,h)))}sr.prototype.cancel=function(){this.J=!0,Hr(this)};function La(l){l.S=Date.now()+l.I,Up(l,l.I)}function Up(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=qi(g(l.ba,l),h)}function Du(l){l.B&&(c.clearTimeout(l.B),l.B=null)}sr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Z1(this.i,this.A),this.L!=2&&(Ui(),gt(17)),Hr(this),this.s=2,Bi(this)):Up(this,this.S-l)};function Bi(l){l.j.G==0||l.J||hg(l.j,l)}function Hr(l){Du(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,jp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Lu(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Mu(p.h,l))){if(!l.K&&Mu(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ba(p),qa(p);else break e;Uu(p),gt(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=qi(g(p.Za,p),6e3));if(1>=Bp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Gr(p,11)}else if((l.K||p.g==l)&&Ba(p),!b(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let fe=M[h];if(p.T=fe[0],fe=fe[1],p.G==2)if(fe[0]=="c"){p.K=fe[1],p.ia=fe[2];const st=fe[3];st!=null&&(p.la=st,p.j.info("VER="+p.la));const it=fe[4];it!=null&&(p.Aa=it,p.j.info("SVER="+p.Aa));const Vs=fe[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(w=1.5*Vs,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const nn=l.g;if(nn){const Ha=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var O=w.h;O.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Vu(O,O.h),O.h=null))}if(w.D){const zu=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(w.ya=zu,be(w.I,w.D,zu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var $=l;if(w.qa=pg(w,w.J?w.ia:null,w.W),$.K){$p(w.h,$);var ve=$,Ke=w.L;Ke&&(ve.I=Ke),ve.B&&(Du(ve),La(ve)),w.g=$}else ug(w);0<p.i.length&&za(p)}else fe[0]!="stop"&&fe[0]!="close"||Gr(p,7);else p.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Gr(p,7):Fu(p):fe[0]!="noop"&&p.l&&p.l.ta(fe),p.v=0)}}Ui(4)}catch{}}var n2=class{constructor(l,h){this.g=l,this.map=h}};function qp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Bp(l){return l.h?1:l.g?l.g.size:0}function Mu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Vu(l,h){l.g?l.g.add(h):l.h=h}function $p(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}qp.prototype.cancel=function(){if(this.i=Hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Hp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return k(l.i)}function r2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,w=0;w<p;w++)h.push(l[w]);return h}h=[],p=0;for(w in l)h[p++]=l[w];return h}function s2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const w in l)h[p++]=w;return h}}}function Wp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=s2(l),w=r2(l),M=w.length,O=0;O<M;O++)h.call(void 0,w[O],p&&p[O],l)}var Gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function i2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),M=null;if(0<=w){var O=l[p].substring(0,w);M=l[p].substring(w+1)}else O=l[p];h(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Wr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Wr){this.h=l.h,Ma(this,l.j),this.o=l.o,this.g=l.g,Va(this,l.s),this.l=l.l;var h=l.i,p=new Wi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Qp(this,p),this.m=l.m}else l&&(h=String(l).match(Gp))?(this.h=!1,Ma(this,h[1]||"",!0),this.o=$i(h[2]||""),this.g=$i(h[3]||"",!0),Va(this,h[4]),this.l=$i(h[5]||"",!0),Qp(this,h[6]||"",!0),this.m=$i(h[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Wr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Hi(h,Kp,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Hi(h,Kp,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Hi(p,p.charAt(0)=="/"?l2:a2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Hi(p,u2)),l.join("")};function kn(l){return new Wr(l)}function Ma(l,h,p){l.j=p?$i(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Va(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Qp(l,h,p){h instanceof Wi?(l.i=h,d2(l.i,l.h)):(p||(h=Hi(h,c2)),l.i=new Wi(h,l.h))}function be(l,h,p){l.i.set(h,p)}function Oa(l){return be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $i(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Hi(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,o2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function o2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Kp=/[#\/\?@]/g,a2=/[#\?:]/g,l2=/[#\?]/g,c2=/[#\?@]/g,u2=/#/g;function Wi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ir(l){l.g||(l.g=new Map,l.h=0,l.i&&i2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Wi.prototype,t.add=function(l,h){ir(this),this.i=null,l=Ls(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Yp(l,h){ir(l),h=Ls(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Jp(l,h){return ir(l),h=Ls(l,h),l.g.has(h)}t.forEach=function(l,h){ir(this),this.g.forEach(function(p,w){p.forEach(function(M){l.call(h,M,w,this)},this)},this)},t.na=function(){ir(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){const M=l[w];for(let O=0;O<M.length;O++)p.push(h[w])}return p},t.V=function(l){ir(this);let h=[];if(typeof l=="string")Jp(this,l)&&(h=h.concat(this.g.get(Ls(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return ir(this),this.i=null,l=Ls(this,l),Jp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Xp(l,h,p){Yp(l,h),0<p.length&&(l.i=null,l.g.set(Ls(l,h),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];const O=encodeURIComponent(String(w)),$=this.V(w);for(w=0;w<$.length;w++){var M=O;$[w]!==""&&(M+="="+encodeURIComponent(String($[w]))),l.push(M)}}return this.i=l.join("&")};function Ls(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function d2(l,h){h&&!l.j&&(ir(l),l.i=null,l.g.forEach(function(p,w){var M=w.toLowerCase();w!=M&&(Yp(this,w),Xp(this,M,p))},l)),l.j=h}function h2(l,h){const p=new zi;if(c.Image){const w=new Image;w.onload=_(or,p,"TestLoadImage: loaded",!0,h,w),w.onerror=_(or,p,"TestLoadImage: error",!1,h,w),w.onabort=_(or,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=_(or,p,"TestLoadImage: timeout",!1,h,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function f2(l,h){const p=new zi,w=new AbortController,M=setTimeout(()=>{w.abort(),or(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(O=>{clearTimeout(M),O.ok?or(p,"TestPingServer: ok",!0,h):or(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),or(p,"TestPingServer: error",!1,h)})}function or(l,h,p,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(p)}catch{}}function m2(){this.g=new Y1}function p2(l,h,p){const w=p||"";try{Wp(l,function(M,O){let $=M;d(M)&&($=Su(M)),h.push(w+O+"="+encodeURIComponent($))})}catch(M){throw h.push(w+"type="+encodeURIComponent("_badmap")),M}}function Gi(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Gi,ju),Gi.prototype.g=function(){return new Fa(this.l,this.j)},Gi.prototype.i=function(l){return function(){return l}}({});function Fa(l,h){rt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Fa,rt),t=Fa.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ki(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Qi(this):Ki(this),this.readyState==3&&Zp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Qi(this))},t.Qa=function(l){this.g&&(this.response=l,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ki(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ki(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function eg(l){let h="";return V(l,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function Ou(l,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=eg(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):be(l,h,p))}function Pe(l){rt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,rt);var g2=/^https?$/i,y2=["POST","PUT"];t=Pe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cu.g(),this.v=this.o?Ap(this.o):Ap(Cu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){tg(this,O);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)p.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const O of w.keys())p.set(O,w.get(O));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(y2,h,void 0))||w||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of p)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sg(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){tg(this,O)}};function tg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,ng(l),Ua(l)}function ng(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),Ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ua(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rg(this):this.bb())},t.bb=function(){rg(this)};function rg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Cn(l)!=4||l.Z()!=2)){if(l.u&&Cn(l)==4)Tp(l.Ea,0,l);else if(pt(l,"readystatechange"),Cn(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=$===0){var M=String(l.D).match(Gp)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),w=!g2.test(M?M.toLowerCase():"")}p=w}if(p)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var O=2<Cn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",ng(l)}}finally{Ua(l)}}}}function Ua(l,h){if(l.g){sg(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||pt(l,"ready");try{p.onreadystatechange=w}catch{}}}function sg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Cn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),K1(h)}};function ig(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function v2(l){const h={};l=(l.g&&2<=Cn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(b(l[w]))continue;var p=A(l[w]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[M]||[];h[M]=O,O.push(p)}N(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function og(l){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yi("baseRetryDelayMs",5e3,l),this.cb=Yi("retryDelaySeedMs",1e4,l),this.Wa=Yi("forwardChannelMaxRetries",2,l),this.wa=Yi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new qp(l&&l.concurrentRequestLimit),this.Da=new m2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=og.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,w){gt(0),this.W=l,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=pg(this,null,this.W),za(this)};function Fu(l){if(ag(l),l.G==3){var h=l.U++,p=kn(l.I);if(be(p,"SID",l.K),be(p,"RID",h),be(p,"TYPE","terminate"),Ji(l,p),h=new sr(l,l.j,h),h.L=2,h.v=Oa(kn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=gg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),La(h)}mg(l)}function qa(l){l.g&&(qu(l),l.g.cancel(),l.g=null)}function ag(l){qa(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ba(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function za(l){if(!zp(l.h)&&!l.s){l.s=!0;var h=l.Ga;H||X(),B||(H(),B=!0),W.add(h,l),l.B=0}}function x2(l,h){return Bp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=qi(g(l.Ga,l,h),fg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new sr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=y(O),x(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=cg(this,M,h),p=kn(this.I),be(p,"RID",l),be(p,"CVER",22),this.D&&be(p,"X-HTTP-Session-Id",this.D),Ji(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(eg(O)))+"&"+h:this.m&&Ou(p,this.m,O)),Vu(this.h,M),this.Ua&&be(p,"TYPE","init"),this.P?(be(p,"$req",h),be(p,"SID","null"),M.T=!0,Ru(M,p,null)):Ru(M,p,h),this.G=2}}else this.G==3&&(l?lg(this,l):this.i.length==0||zp(this.h)||lg(this))};function lg(l,h){var p;h?p=h.l:p=l.U++;const w=kn(l.I);be(w,"SID",l.K),be(w,"RID",p),be(w,"AID",l.T),Ji(l,w),l.m&&l.o&&Ou(w,l.m,l.o),p=new sr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=cg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Vu(l.h,p),Ru(p,w,h)}function Ji(l,h){l.H&&V(l.H,function(p,w){be(h,w,p)}),l.l&&Wp({},function(p,w){be(h,w,p)})}function cg(l,h,p){p=Math.min(l.i.length,p);var w=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let O=-1;for(;;){const $=["count="+p];O==-1?0<p?(O=M[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let ve=!0;for(let Ke=0;Ke<p;Ke++){let fe=M[Ke].g;const st=M[Ke].map;if(fe-=O,0>fe)O=Math.max(0,M[Ke].g-100),ve=!1;else try{p2(st,$,"req"+fe+"_")}catch{w&&w(st)}}if(ve){w=$.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,w}function ug(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;H||X(),B||(H(),B=!0),W.add(h,l),l.v=0}}function Uu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=qi(g(l.Fa,l),fg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=qi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),qa(this),dg(this))};function qu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function dg(l){l.g=new sr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=kn(l.qa);be(h,"RID","rpc"),be(h,"SID",l.K),be(h,"AID",l.T),be(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&be(h,"TO",l.ja),be(h,"TYPE","xmlhttp"),Ji(l,h),l.m&&l.o&&Ou(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Oa(kn(h)),p.m=null,p.P=!0,Op(p,l)}t.Za=function(){this.C!=null&&(this.C=null,qa(this),Uu(this),gt(19))};function Ba(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function hg(l,h){var p=null;if(l.g==h){Ba(l),qu(l),l.g=null;var w=2}else if(Mu(l.h,h))p=h.D,$p(l.h,h),w=1;else return;if(l.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;w=Pa(),pt(w,new Dp(w,p)),za(l)}else ug(l);else if(M=h.s,M==3||M==0&&0<h.X||!(w==1&&x2(l,h)||w==2&&Uu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:Gr(l,5);break;case 4:Gr(l,10);break;case 3:Gr(l,6);break;default:Gr(l,2)}}}function fg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Gr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),w=l.Xa;const M=!w;w=new Wr(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ma(w,"https"),Oa(w),M?h2(w.toString(),p):f2(w.toString(),p)}else gt(2);l.G=0,l.l&&l.l.sa(h),mg(l),ag(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function mg(l){if(l.G=0,l.ka=[],l.l){const h=Hp(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function pg(l,h,p){var w=p instanceof Wr?kn(p):new Wr(p);if(w.g!="")h&&(w.g=h+"."+w.g),Va(w,w.s);else{var M=c.location;w=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var O=new Wr(null);w&&Ma(O,w),h&&(O.g=h),M&&Va(O,M),p&&(O.l=p),w=O}return p=l.D,h=l.ya,p&&h&&be(w,p,h),be(w,"VER",l.la),Ji(l,w),w}function gg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Pe(new Gi({eb:p})):new Pe(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yg(){}t=yg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $a(){}$a.prototype.g=function(l,h){return new Rt(l,h)};function Rt(l,h){rt.call(this),this.g=new og(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!b(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!b(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ms(this)}S(Rt,rt),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Fu(this.g)},Rt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Su(l),l=p);h.i.push(new n2(h.Ya++,l)),h.G==3&&za(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Fu(this.g),delete this.g,Rt.aa.N.call(this)};function vg(l){Au.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(vg,Au);function xg(){ku.call(this),this.status=1}S(xg,ku);function Ms(l){this.g=l}S(Ms,yg),Ms.prototype.ua=function(){pt(this.g,"a")},Ms.prototype.ta=function(l){pt(this.g,new vg(l))},Ms.prototype.sa=function(l){pt(this.g,new xg)},Ms.prototype.ra=function(){pt(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,$_=function(){return new $a},B_=function(){return Pa()},z_=$r,Kh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Rl=Ra,Lp.COMPLETE="complete",q_=Lp,kp.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",rt.prototype.listen=rt.prototype.K,mo=kp,U_=Gi,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,F_=Pe}).apply(typeof ul<"u"?ul:typeof self<"u"?self:typeof window<"u"?window:{});const py="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new eu("@firebase/firestore");function oo(){return ys.logLevel}function K(t,...e){if(ys.logLevel<=ae.DEBUG){const n=e.map(Cm);ys.debug(`Firestore (${Ri}): ${t}`,...n)}}function Xn(t,...e){if(ys.logLevel<=ae.ERROR){const n=e.map(Cm);ys.error(`Firestore (${Ri}): ${t}`,...n)}}function wi(t,...e){if(ys.logLevel<=ae.WARN){const n=e.map(Cm);ys.warn(`Firestore (${Ri}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Ri}) INTERNAL ASSERTION FAILED: `+t;throw Xn(e),new Error(e)}function xe(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class KA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YA{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new H_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new ct(e)}}class JA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ek{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new ZA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=tk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function _i(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Be(0,0))}static max(){return new ne(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends na{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends na{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return nk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ne.fromString(e))}static fromName(e){return new Y(Ne.fromString(e).popFirst(5))}static empty(){return new Y(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ne(e.slice()))}}function rk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Dr(s,Y.empty(),e)}function sk(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(ne.min(),Y.empty(),-1)}static max(){return new Dr(ne.max(),Y.empty(),-1)}}function ik(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ak{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==ok)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pm.oe=-1;function su(t){return t==null}function _c(t){return t===0&&1/t==-1/0}function ck(t){return typeof t=="number"&&Number.isInteger(t)&&!_c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dl(this.root,e,this.comparator,!0)}}class dl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yy(this.data.getIterator())}getIteratorFrom(e){return new yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new et(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _i(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Q_("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const uk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(xe(!!t),typeof t=="string"){let e=0;const n=uk.exec(t);if(xe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dm(t){const e=t.mapValue.fields.__previous_value__;return Rm(e)?Dm(e):e}function ra(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rm(t)?4:fk(t)?9007199254740991:hk(t)?10:11:te()}function An(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ra(t).isEqual(ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Lr(s.timestampValue),c=Lr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vs(s.bytesValue).isEqual(vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=De(s.doubleValue),c=De(i.doubleValue);return a===c?_c(a)===_c(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return _i(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(gy(a)!==gy(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!An(a[u],c[u])))return!1;return!0}(t,e);default:return te()}}function ia(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=xs(t),r=xs(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=De(i.integerValue||i.doubleValue),u=De(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return vy(t.timestampValue,e.timestampValue);case 4:return vy(ra(t),ra(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,a){const c=vs(i),u=vs(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=me(c[d],u[d]);if(f!==0)return f}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=me(De(i.latitude),De(a.latitude));return c!==0?c:me(De(i.longitude),De(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xy(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const m=i.fields||{},g=a.fields||{},_=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,k=me(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:xy(_,S)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===hl.mapValue&&a===hl.mapValue)return 0;if(i===hl.mapValue)return 1;if(a===hl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=me(u[m],f[m]);if(g!==0)return g;const _=bi(c[u[m]],d[f[m]]);if(_!==0)return _}return me(u.length,f.length)}(t.mapValue,e.mapValue);default:throw te()}}function vy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Lr(t),r=Lr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function xy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Ei(t){return Yh(t)}function Yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Yh(n.fields[a])}`;return s+"}"}(t.mapValue):te()}function wy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jh(t){return!!t&&"integerValue"in t}function Lm(t){return!!t&&"arrayValue"in t}function _y(t){return!!t&&"nullValue"in t}function by(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dl(t){return!!t&&"mapValue"in t}function hk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ao(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ao(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Dl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){As(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new It(Ao(this.value))}}function K_(t){const e=[];return As(t.fields,(n,r)=>{const s=new Xe([n]);if(Dl(r)){const i=K_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new ht(e,0,ne.min(),ne.min(),ne.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,ne.min(),ne.min(),It.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ne.min(),ne.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.position=e,this.inclusive=n}}function Ey(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),n.key):r=bi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ny(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n="asc"){this.field=e,this.dir=n}}function mk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y_=class{};class Fe extends Y_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gk(e,n,r):n==="array-contains"?new xk(e,r):n==="in"?new wk(e,r):n==="not-in"?new _k(e,r):n==="array-contains-any"?new bk(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yk(e,r):new vk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bi(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends Y_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mn(e,n)}matches(e){return J_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J_(t){return t.op==="and"}function X_(t){return pk(t)&&J_(t)}function pk(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function Xh(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Ei(t.value);if(X_(t))return t.filters.map(e=>Xh(e)).join(",");{const e=t.filters.map(n=>Xh(n)).join(",");return`${t.op}(${e})`}}function Z_(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&An(r.value,s.value)}(t,e):t instanceof mn?function(r,s){return s instanceof mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&Z_(a,s.filters[c]),!0):!1}(t,e):void te()}function eb(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ei(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(eb).join(" ,")+"}"}(t):"Filter"}class gk extends Fe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class yk extends Fe{constructor(e,n){super(e,"in",n),this.keys=tb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vk extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=tb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class xk extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lm(n)&&ia(n.arrayValue,this.value)}}class wk extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class _k extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ia(this.value.arrayValue,n)}}class bk extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ia(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function Ty(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Ek(t,e,n,r,s,i,a)}function Mm(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ei(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ei(r)).join(",")),e.ue=n}return e.ue}function Vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Z_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ny(t.startAt,e.startAt)&&Ny(t.endAt,e.endAt)}function Zh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Nk(t,e,n,r,s,i,a,c){return new Di(t,e,n,r,s,i,a,c)}function Om(t){return new Di(t)}function Iy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nb(t){return t.collectionGroup!==null}function ko(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new et(Xe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new oa(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new oa(Xe.keyField(),r))}return e.ce}function In(t){const e=re(t);return e.le||(e.le=Tk(e,ko(t))),e.le}function Tk(t,e){if(t.limitType==="F")return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new oa(s.field,i)});const n=t.endAt?new bc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bc(t.startAt.position,t.startAt.inclusive):null;return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ef(t,e){const n=t.filters.concat([e]);return new Di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ec(t,e,n){return new Di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iu(t,e){return Vm(In(t),In(e))&&t.limitType===e.limitType}function rb(t){return`${Mm(In(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>eb(s)).join(", ")}]`),su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ei(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ei(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ko(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=Ey(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,ko(r),s)||r.endAt&&!function(a,c,u){const d=Ey(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,ko(r),s))}(t,e)}function Ik(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sb(t){return(e,n)=>{let r=!1;for(const s of ko(t)){const i=Sk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Sk(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?bi(u,d):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return G_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Ce(Y.comparator);function Zn(){return jk}const ib=new Ce(Y.comparator);function po(...t){let e=ib;for(const n of t)e=e.insert(n.key,n);return e}function ob(t){let e=ib;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return Co()}function ab(){return Co()}function Co(){return new Li(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ak=new Ce(Y.comparator),kk=new et(Y.comparator);function oe(...t){let e=kk;for(const n of t)e=e.add(n);return e}const Ck=new et(me);function Pk(){return Ck}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function lb(t){return{integerValue:""+t}}function Rk(t,e){return ck(e)?lb(e):Fm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this._=void 0}}function Dk(t,e,n){return t instanceof aa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rm(i)&&(i=Dm(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof la?ub(t,e):t instanceof ca?db(t,e):function(s,i){const a=cb(s,i),c=Sy(a)+Sy(s.Pe);return Jh(a)&&Jh(s.Pe)?lb(c):Fm(s.serializer,c)}(t,e)}function Lk(t,e,n){return t instanceof la?ub(t,e):t instanceof ca?db(t,e):n}function cb(t,e){return t instanceof Nc?function(r){return Jh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class aa extends au{}class la extends au{constructor(e){super(),this.elements=e}}function ub(t,e){const n=hb(e);for(const r of t.elements)n.some(s=>An(s,r))||n.push(r);return{arrayValue:{values:n}}}class ca extends au{constructor(e){super(),this.elements=e}}function db(t,e){let n=hb(e);for(const r of t.elements)n=n.filter(s=>!An(s,r));return{arrayValue:{values:n}}}class Nc extends au{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Sy(t){return De(t.integerValue||t.doubleValue)}function hb(t){return Lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.field=e,this.transform=n}}function Vk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof la&&s instanceof la||r instanceof ca&&s instanceof ca?_i(r.elements,s.elements,An):r instanceof Nc&&s instanceof Nc?An(r.Pe,s.Pe):r instanceof aa&&s instanceof aa}(t.transform,e.transform)}class Ok{constructor(e,n){this.version=e,this.transformResults=n}}class Kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lu{}function fb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Um(t.key,Kt.none()):new Na(t.key,t.data,Kt.none());{const n=t.data,r=It.empty();let s=new et(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new qr(t.key,r,new Mt(s.toArray()),Kt.none())}}function Fk(t,e,n){t instanceof Na?function(s,i,a){const c=s.value.clone(),u=Ay(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof qr?function(s,i,a){if(!Ll(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Ay(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(mb(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Po(t,e,n,r){return t instanceof Na?function(i,a,c,u){if(!Ll(i.precondition,a))return c;const d=i.value.clone(),f=ky(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qr?function(i,a,c,u){if(!Ll(i.precondition,a))return c;const d=ky(i.fieldTransforms,u,a),f=a.data;return f.setAll(mb(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Ll(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function Uk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cb(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function jy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_i(r,s,(i,a)=>Vk(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Na extends lu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qr extends lu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ay(t,e,n){const r=new Map;xe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,Lk(a,c,n[s]))}return r}function ky(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Dk(i,a,e))}return r}class Um extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qk extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Fk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Po(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Po(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ab();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=fb(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&_i(this.mutations,e.mutations,(n,r)=>jy(n,r))&&_i(this.baseMutations,e.baseMutations,(n,r)=>jy(n,r))}}class qm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length);let s=function(){return Ak}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new qm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ce;function Hk(t){switch(t){default:return te();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function pb(t){if(t===void 0)return Xn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ve.OK:return F.OK;case Ve.CANCELLED:return F.CANCELLED;case Ve.UNKNOWN:return F.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return F.INTERNAL;case Ve.UNAVAILABLE:return F.UNAVAILABLE;case Ve.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ve.NOT_FOUND:return F.NOT_FOUND;case Ve.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ve.ABORTED:return F.ABORTED;case Ve.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ve.DATA_LOSS:return F.DATA_LOSS;default:return te()}}(ce=Ve||(Ve={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new as([4294967295,4294967295],0);function Cy(t){const e=Wk().encode(t),n=new O_;return n.update(e),new Uint8Array(n.digest())}function Py(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new as([n,r],0),new as([s,i],0)]}class zm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(r<0)throw new go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(as.fromNumber(r)));return s.compare(Gk)===1&&(s=new as([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Cy(e),[r,s]=Py(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new zm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=Cy(e),[r,s]=Py(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ta.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cu(ne.min(),s,new Ce(me),Zn(),oe())}}class Ta{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ta(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class gb{constructor(e,n){this.targetId=e,this.me=n}}class yb{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ry{constructor(){this.fe=0,this.ge=Ly(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new Ta(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ly()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Qk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=Dy(),this.Qe=new Ce(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Zh(i))if(r===0){const a=new Y(i.path);this.Ue(n,a,ht.newNoDocument(a,ne.min()))}else xe(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=vs(r).toUint8Array()}catch(u){if(u instanceof Q_)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new zm(a,s,i)}catch(u){return wi(u instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&Zh(c.target)){const u=new Y(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ht.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=oe();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new cu(e,n,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=Dy(),this.Qe=new Ce(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ry,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ry),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Dy(){return new Ce(Y.comparator)}function Ly(){return new Ce(Y.comparator)}const Kk={asc:"ASCENDING",desc:"DESCENDING"},Yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jk={and:"AND",or:"OR"};class Xk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tf(t,e){return t.useProto3Json||su(e)?e:{value:e}}function Tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Zk(t,e){return Tc(t,e.toTimestamp())}function Sn(t){return xe(!!t),ne.fromTimestamp(function(n){const r=Lr(n);return new Be(r.seconds,r.nanos)}(t))}function Bm(t,e){return nf(t,e).canonicalString()}function nf(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xb(t){const e=Ne.fromString(t);return xe(Nb(e)),e}function rf(t,e){return Bm(t.databaseId,e.path)}function Ed(t,e){const n=xb(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(_b(n))}function wb(t,e){return Bm(t.databaseId,e)}function eC(t){const e=xb(t);return e.length===4?Ne.emptyPath():_b(e)}function sf(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _b(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function My(t,e,n){return{name:rf(t,e),fields:n.value.mapValue.fields}}function tC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(xe(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?F.UNKNOWN:pb(d.code);return new G(f,d.message||"")}(a);n=new yb(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ed(t,r.document.name),i=Sn(r.document.updateTime),a=r.document.createTime?Sn(r.document.createTime):ne.min(),c=new It({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Ml(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ed(t,r.document),i=r.readTime?Sn(r.readTime):ne.min(),a=ht.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Ml([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ed(t,r.document),i=r.removedTargetIds||[];n=new Ml([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new $k(s,i),c=r.targetId;n=new gb(c,a)}}return n}function nC(t,e){let n;if(e instanceof Na)n={update:My(t,e.key,e.value)};else if(e instanceof Um)n={delete:rf(t,e.key)};else if(e instanceof qr)n={update:My(t,e.key,e.data),updateMask:dC(e.fieldMask)};else{if(!(e instanceof qk))return te();n={verify:rf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof aa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof la)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ca)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Zk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function rC(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Sn(s.updateTime):Sn(i);return a.isEqual(ne.min())&&(a=Sn(i)),new Ok(a,s.transformResults||[])}(n,e))):[]}function sC(t,e){return{documents:[wb(t,e.path)]}}function iC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wb(t,s);const i=function(d){if(d.length!==0)return Eb(mn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Us(g.field),direction:lC(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=tf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function oC(t){let e=eC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=bb(m);return g instanceof mn&&X_(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(S){return new oa(qs(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,su(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new bc(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,_=m.values||[];return new bc(_,g)}(n.endAt)),Nk(e,s,a,i,c,"F",u,d)}function aC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qs(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qs(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qs(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qs(n.unaryFilter.field);return Fe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(qs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>bb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function lC(t){return Kk[t]}function cC(t){return Yk[t]}function uC(t){return Jk[t]}function Us(t){return{fieldPath:t.canonicalString()}}function qs(t){return Xe.fromServerFormat(t.fieldPath)}function Eb(t){return t instanceof Fe?function(n){if(n.op==="=="){if(by(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(_y(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(by(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(_y(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:cC(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(s=>Eb(s));return r.length===1?r[0]:{compositeFilter:{op:uC(n.op),filters:r}}}(t):te()}function dC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Nb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,s,i=ne.min(),a=ne.min(),c=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.ct=e}}function fC(t){const e=oC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ec(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.un=new pC}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Dr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class pC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ni(0)}static kn(){return new Ni(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Po(r.mutation,s,Mt.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=po();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Zn();const a=Co(),c=function(){return Co()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof qr)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Po(f.mutation,d,f.mutation.getFieldMask(),Be.now())):a.set(d.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new yC(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Co();let s=new Ce((a,c)=>a-c),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Mt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||oe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=ab();f.forEach(g=>{if(!i.has(g)){const _=fb(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(rs());let c=-1,u=i;return a.next(d=>q.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,oe())).next(f=>({batchId:c,changes:ob(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=po();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=po();return this.indexManager.getCollectionParents(e,i).next(c=>q.forEach(c,u=>{const d=function(m,g){return new Di(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,ht.newInvalidDocument(f)))});let c=po();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Po(f.mutation,d,Mt.empty(),Be.now()),ou(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Sn(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:fC(s.bundledQuery),readTime:Sn(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.overlays=new Ce(Y.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rs();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=rs(),i=n.length+1,a=new Y(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ce((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=rs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=rs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return q.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Bk(n,r));let i=this.Ir.get(n);i===void 0&&(i=oe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Tr=new et(We.Er),this.dr=new et(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new Ne([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ne([])),r=new We(n,e),s=new We(n,e+1);let i=oe();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(We.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new zk(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new We(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(me);return n.forEach(s=>{const i=new We(s,0),a=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new We(new Y(i),0);let c=new et(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),q.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.Mr=e,this.docs=function(){return new Ce(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zn();const a=n.path,c=new Y(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||ik(sk(f),r)<=0||(s.has(f.key)||ou(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NC(this)}getSize(e){return q.resolve(this.size)}}class NC extends gC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.persistence=e,this.Nr=new Li(n=>Mm(n),Vm),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $m,this.targetCount=0,this.kr=Ni.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ni(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Pm(0),this.Kr=!1,this.Kr=!0,this.$r=new _C,this.referenceDelegate=e(this),this.Ur=new TC(this),this.indexManager=new mC,this.remoteDocumentCache=function(s){return new EC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hC(n),this.Gr=new xC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new SC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class SC extends ak{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Jr=new $m,this.Yr=null}static Zr(e){return new Hm(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return dI()?8:lk(mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new jC;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(oo()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(oo()<=ae.DEBUG&&K("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(oo()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):q.resolve())}Yi(e,n){if(Iy(n))return q.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ec(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=oe(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,Ec(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Iy(n)||s.isEqual(ne.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?q.resolve(null):(oo()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fs(n)),this.rs(e,a,n,rk(s,-1)).next(c=>c))})}ts(e,n){let r=new et(sb(e));return n.forEach((s,i)=>{ou(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return oo()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ce(me),this._s=new Li(i=>Mm(i),Vm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function CC(t,e,n,r){return new kC(t,e,n,r)}async function Tb(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=oe();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function PC(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let _=q.resolve();return g.forEach(S=>{_=_.next(()=>f.getEntry(u,S)).next(k=>{const R=d.docVersions.get(S);xe(R!==null),k.version.compareTo(R)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ib(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function RC(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(nt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(m,_),function(k,R,E){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,_,f)&&c.push(n.Ur.updateTargetData(i,_))});let u=Zn(),d=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(DC(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ne.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return q.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function DC(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Zn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):K("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function LC(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MC(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new xr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function of(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ea(a))throw a;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Vy(t,e,n){const r=re(t);let s=ne.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=re(u),g=m._s.get(f);return g!==void 0?q.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,a,In(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:ne.min(),n?i:oe())).next(c=>(VC(r,Ik(e),c),{documents:c,Ts:i})))}function VC(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Oy{constructor(){this.activeTargetIds=Pk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OC{constructor(){this.so=new Oy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Oy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl=null;function Nd(){return fl===null?fl=function(){return 268435456+Math.round(2147483648*Math.random())}():fl++,"0x"+fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class zC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=Nd(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw wi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ri}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=UC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Nd();return new Promise((a,c)=>{const u=new F_;u.setWithCredentials(!0),u.listenOnce(q_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rl.NO_ERROR:const f=u.getResponseJson();K(lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case Rl.TIMEOUT:K(lt,`RPC '${e}' ${i} timed out`),c(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const m=u.getStatus();if(K(lt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const S=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(_.status);c(new G(S,_.message))}else c(new G(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new G(F.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{K(lt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);K(lt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Nd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$_(),c=B_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new U_({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(lt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let g=!1,_=!1;const S=new qC({Io:R=>{_?K(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(K(lt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(lt,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},To:()=>m.close()}),k=(R,E,b)=>{R.listen(E,T=>{try{b(T)}catch(L){setTimeout(()=>{throw L},0)}})};return k(m,mo.EventType.OPEN,()=>{_||(K(lt,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),k(m,mo.EventType.CLOSE,()=>{_||(_=!0,K(lt,`RPC '${e}' stream ${s} transport closed`),S.So())}),k(m,mo.EventType.ERROR,R=>{_||(_=!0,wi(lt,`RPC '${e}' stream ${s} transport errored:`,R),S.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),k(m,mo.EventType.MESSAGE,R=>{var E;if(!_){const b=R.data[0];xe(!!b);const T=b,L=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(L){K(lt,`RPC '${e}' stream ${s} received error:`,L);const D=L.status;let V=function(v){const x=Ve[v];if(x!==void 0)return pb(x)}(D),N=L.message;V===void 0&&(V=F.INTERNAL,N="Unknown error status: "+D+" with message "+L.message),_=!0,S.So(new G(V,N)),m.close()}else K(lt,`RPC '${e}' stream ${s} received:`,b),S.bo(b)}}),k(c,z_.STAT_EVENT,R=>{R.stat===Kh.PROXY?K(lt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Kh.NOPROXY&&K(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){return new Xk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Xn(n.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BC extends jb{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=tC(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?Sn(a.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=sf(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Zh(u)?{documents:sC(i,u)}:{query:iC(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=vb(i,a.resumeToken);const d=tf(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ne.min())>0){c.readTime=Tc(i,a.snapshotVersion.toTimestamp());const d=tf(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=aC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=sf(this.serializer),n.removeTarget=e,this.a_(n)}}class $C extends jb{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=rC(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=sf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,nf(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,nf(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class WC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{ks(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=re(u);d.L_.add(4),await Ia(d),d.q_.set("Unknown"),d.L_.delete(4),await du(d)}(this))})}),this.q_=new WC(r,s)}}async function du(t){if(ks(t))for(const e of t.B_)await e(!0)}async function Ia(t){for(const e of t.B_)await e(!1)}function Ab(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ym(n)?Km(n):Mi(n).r_()&&Qm(n,e))}function Gm(t,e){const n=re(t),r=Mi(n);n.N_.delete(e),r.r_()&&kb(n,e),n.N_.size===0&&(r.r_()?r.o_():ks(n)&&n.q_.set("Unknown"))}function Qm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mi(t).A_(e)}function kb(t,e){t.Q_.xe(e),Mi(t).R_(e)}function Km(t){t.Q_=new Qk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mi(t).start(),t.q_.v_()}function Ym(t){return ks(t)&&!Mi(t).n_()&&t.N_.size>0}function ks(t){return re(t).L_.size===0}function Cb(t){t.Q_=void 0}async function QC(t){t.q_.set("Online")}async function KC(t){t.N_.forEach((e,n)=>{Qm(t,e)})}async function YC(t,e){Cb(t),Ym(t)?(t.q_.M_(e),Km(t)):t.q_.set("Unknown")}async function JC(t,e,n){if(t.q_.set("Online"),e instanceof yb&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ic(t,r)}else if(e instanceof Ml?t.Q_.Ke(e):e instanceof gb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await Ib(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),kb(i,u);const m=new xr(f.target,u,d,f.sequenceNumber);Qm(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Ic(t,r)}}async function Ic(t,e,n){if(!Ea(e))throw e;t.L_.add(1),await Ia(t),t.q_.set("Offline"),n||(n=()=>Ib(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await du(t)})}function Pb(t,e){return e().catch(n=>Ic(t,n,e))}async function hu(t){const e=re(t),n=Mr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XC(e);)try{const s=await LC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,ZC(e,s)}catch(s){await Ic(e,s)}Rb(e)&&Db(e)}function XC(t){return ks(t)&&t.O_.length<10}function ZC(t,e){t.O_.push(e);const n=Mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Rb(t){return ks(t)&&!Mr(t).n_()&&t.O_.length>0}function Db(t){Mr(t).start()}async function eP(t){Mr(t).p_()}async function tP(t){const e=Mr(t);for(const n of t.O_)e.m_(n.mutations)}async function nP(t,e,n){const r=t.O_.shift(),s=qm.from(r,e,n);await Pb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hu(t)}async function rP(t,e){e&&Mr(t).V_&&await async function(r,s){if(function(a){return Hk(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();Mr(r).s_(),await Pb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await hu(r)}}(t,e),Rb(t)&&Db(t)}async function Uy(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=ks(n);n.L_.add(3),await Ia(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await du(n)}async function sP(t,e){const n=re(t);e?(n.L_.delete(2),await du(n)):e||(n.L_.add(2),await Ia(n),n.q_.set("Unknown"))}function Mi(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new BC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:QC.bind(null,t),Ro:KC.bind(null,t),mo:YC.bind(null,t),d_:JC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ym(t)?Km(t):t.q_.set("Unknown")):(await t.K_.stop(),Cb(t))})),t.K_}function Mr(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new $C(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eP.bind(null,t),mo:rP.bind(null,t),f_:tP.bind(null,t),g_:nP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new Jm(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(Xn("AsyncQueue",`${e}: ${t}`),Ea(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=po(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new ui(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.W_=new Ce(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ti{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ti(e,n,ui.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class oP{constructor(){this.queries=zy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=zy(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function zy(){return new Li(t=>rb(t),iu)}async function Lb(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new iP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Xm(a,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Zm(n)}async function Mb(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aP(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&Zm(n)}function lP(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Zm(t){t.Y_.forEach(e=>{e.next()})}var af,By;(By=af||(af={})).ea="default",By.Cache="cache";class Vb{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ti(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ti.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.key=e}}class Fb{constructor(e){this.key=e}}class cP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=sb(e),this.Ra=new ui(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new qy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),_=ou(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let R=!1;g&&_?g.data.isEqual(_.data)?S!==k&&(r.track({type:3,doc:_}),R=!0):this.ga(g,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),R=!0):g&&!_&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(c=!0)),R&&(_?(a=a.add(_),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(_,S){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return k(_)-k(S)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Ti(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Fb(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ob(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ti.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dP{constructor(e){this.key=e,this.va=!1}}class hP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Li(c=>rb(c),iu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ce(Y.comparator),this.Na=new Map,this.La=new $m,this.Ba={},this.ka=new Map,this.qa=Ni.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fP(t,e,n=!0){const r=Hb(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Ub(r,e,n,!0),s}async function mP(t,e){const n=Hb(t);await Ub(n,e,!0,!1)}async function Ub(t,e,n,r){const s=await MC(t.localStore,In(e)),i=s.targetId,a=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let c;return r&&(c=await pP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ab(t.remoteStore,s),c}async function pP(t,e,n,r,s){t.Ka=(m,g,_)=>async function(k,R,E,b){let T=R.view.ma(E);T.ns&&(T=await Vy(k.localStore,R.query,!1).then(({documents:N})=>R.view.ma(N,T)));const L=b&&b.targetChanges.get(R.targetId),D=b&&b.targetMismatches.get(R.targetId)!=null,V=R.view.applyChanges(T,k.isPrimaryClient,L,D);return Hy(k,R.targetId,V.wa),V.snapshot}(t,m,g,_);const i=await Vy(t.localStore,e,!0),a=new cP(e,i.Ts),c=a.ma(i.documents),u=Ta.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Hy(t,n,d.wa);const f=new uP(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function gP(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!iu(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await of(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gm(r.remoteStore,s.targetId),lf(r,s.targetId)}).catch(ba)):(lf(r,s.targetId),await of(r.localStore,s.targetId,!0))}async function yP(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gm(n.remoteStore,r.targetId))}async function vP(t,e,n){const r=TP(t);try{const s=await function(a,c){const u=re(a),d=Be.now(),f=c.reduce((_,S)=>_.add(S.key),oe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=Zn(),k=oe();return u.cs.getEntries(_,f).next(R=>{S=R,S.forEach((E,b)=>{b.isValidDocument()||(k=k.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(R=>{m=R;const E=[];for(const b of c){const T=Uk(b,m.get(b.key).overlayedDocument);T!=null&&E.push(new qr(b.key,T,K_(T.value.mapValue),Kt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,E,c)}).next(R=>{g=R;const E=R.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(_,R.batchId,E)})}).then(()=>({batchId:g.batchId,changes:ob(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new Ce(me)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await Sa(r,s.changes),await hu(r.remoteStore)}catch(s){const i=Xm(s,"Failed to persist write");n.reject(i)}}async function qb(t,e){const n=re(t);try{const r=await RC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?xe(a.va):s.removedDocuments.size>0&&(xe(a.va),a.va=!1))}),await Sa(n,r,e)}catch(r){await ba(r)}}function $y(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=re(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(c)&&(d=!0)}),d&&Zm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xP(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ce(Y.comparator);a=a.insert(i,ht.newNoDocument(i,ne.min()));const c=oe().add(i),u=new cu(ne.min(),new Map,new Ce(me),a,c);await qb(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),ep(r)}else await of(r.localStore,e,!1).then(()=>lf(r,e,n)).catch(ba)}async function wP(t,e){const n=re(t),r=e.batch.batchId;try{const s=await PC(n.localStore,e);Bb(n,r,null),zb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sa(n,s)}catch(s){await ba(s)}}async function _P(t,e,n){const r=re(t);try{const s=await function(a,c){const u=re(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(xe(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Bb(r,e,n),zb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sa(r,s)}catch(s){await ba(s)}}function zb(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Bb(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$b(t,r)})}function $b(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ep(t))}function Hy(t,e,n){for(const r of n)r instanceof Ob?(t.La.addReference(r.key,e),bP(t,r)):r instanceof Fb?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$b(t,r.key)):te()}function bP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),ep(t))}function ep(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new dP(n)),t.Oa=t.Oa.insert(n,r),Ab(t.remoteStore,new xr(In(Om(n.path)),r,"TargetPurposeLimboResolution",Pm.oe))}}async function Sa(t,e,n){const r=re(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Wm.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(d,g=>q.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>q.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!Ea(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const _=f.os.get(g),S=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(g,k)}}}(r.localStore,i))}async function EP(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await Tb(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new G(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sa(n,r.hs)}}function NP(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let s=oe();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function Hb(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xP.bind(null,e),e.Ca.d_=aP.bind(null,e.eventManager),e.Ca.$a=lP.bind(null,e.eventManager),e}function TP(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_P.bind(null,e),e}class Wy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=uu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return CC(this.persistence,new AC,e.initialUser,this.serializer)}createPersistence(e){return new IC(Hm.Zr,this.serializer)}createSharedClientState(e){return new OC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class IP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$y(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EP.bind(null,this.syncEngine),await sP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oP}()}createDatastore(e){const n=uu(e.databaseInfo.databaseId),r=function(i){return new zC(i)}(e.databaseInfo);return function(i,a,c,u){return new HC(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new GC(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>$y(this.syncEngine,n,0),function(){return Fy.D()?new Fy:new FC}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const m=new hP(s,i,a,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ia(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{K("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(K("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Tb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AP(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Uy(e.remoteStore,s)),t._onlineComponents=e}function jP(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function AP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!jP(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new Wy)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Id(t,new Wy);return t._offlineComponents}async function Gb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Gy(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Gy(t,new IP))),t._onlineComponents}function kP(t){return Gb(t).then(e=>e.syncEngine)}async function Qb(t){const e=await Gb(t),n=e.eventManager;return n.onListen=fP.bind(null,e.syncEngine),n.onUnlisten=gP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yP.bind(null,e.syncEngine),n}function CP(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new Wb({next:g=>{a.enqueueAndForget(()=>Mb(i,m));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Vb(Om(c.path),f,{includeMetadataChanges:!0,_a:!0});return Lb(i,m)}(await Qb(t),t.asyncQueue,e,n,r)),r.promise}function PP(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new Wb({next:g=>{a.enqueueAndForget(()=>Mb(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Vb(c,f,{includeMetadataChanges:!0,_a:!0});return Lb(i,m)}(await Qb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RP(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ky(t){if(!Y.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yy(t){if(Y.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fu(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DP(t,e){if(e<=0)throw new G(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QA;switch(r.type){case"firstParty":return new XA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qy.get(n);r&&(K("ComponentProvider","Removing Datastore"),Qy.delete(n),r.terminate())}(this),Promise.resolve()}}function LP(t,e,n,r={}){var s;const i=(t=pn(t,mu))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=ct.MOCK_USER;else{c=oI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(d)}t._authCredentials=new KA(new H_(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class Cr extends zr{constructor(e,n,r){super(e,n,Om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new Y(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function Ue(t,e,...n){if(t=Se(t),Yb("collection","path",e),t instanceof mu){const r=Ne.fromString(e,...n);return Yy(r),new Cr(t,null,r)}{if(!(t instanceof wt||t instanceof Cr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Yy(r),new Cr(t.firestore,null,r)}}function vt(t,e,...n){if(t=Se(t),arguments.length===1&&(e=W_.newId()),Yb("doc","path",e),t instanceof mu){const r=Ne.fromString(e,...n);return Ky(r),new wt(t,null,new Y(r))}{if(!(t instanceof wt||t instanceof Cr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Ky(r),new wt(t.firestore,t instanceof Cr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Sb(this,"async_queue_retry"),this.Eu=()=>{const n=Td();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Td();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Hn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Ea(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Xn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=Jm.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&te()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Cs extends mu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new MP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Jb(this),this._firestoreClient.terminate()}}function VP(t,e){const n=typeof t=="object"?t:xm(),r=typeof t=="string"?t:"(default)",s=Ss(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=sI("firestore");i&&LP(s,...i)}return s}function tp(t){return t._firestoreClient||Jb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Jb(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new dk(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Kb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new SP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ii(nt.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ii(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=/^__.*__$/;class FP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Na(e,this.data,n,this.fieldTransforms)}}class Xb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Zb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class sp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Sc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Zb(this.wu)&&OP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class UP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uu(e)}Nu(e,n,r,s=!1){return new sp({wu:e,methodName:n,Ou:r,path:Xe.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yu(t){const e=t._freezeSettings(),n=uu(t._databaseId);return new UP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function e1(t,e,n,r,s,i={}){const a=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);op("Data must be an object, but it was:",a,r);const c=t1(r,a);let u,d;if(i.merge)u=new Mt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=cf(e,m,n);if(!a.contains(g))throw new G(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);r1(f,g)||f.push(g)}u=new Mt(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new FP(new It(c),u,d)}class vu extends gu{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vu}}class ip extends gu{_toFieldTransform(e){return new Mk(e.path,new aa)}isEqual(e){return e instanceof ip}}function qP(t,e,n,r){const s=t.Nu(1,e,n);op("Data must be an object, but it was:",s,r);const i=[],a=It.empty();As(r,(u,d)=>{const f=ap(e,u,n);d=Se(d);const m=s.Cu(f);if(d instanceof vu)i.push(f);else{const g=ja(d,m);g!=null&&(i.push(f),a.set(f,g))}});const c=new Mt(i);return new Xb(a,c,s.fieldTransforms)}function zP(t,e,n,r,s,i){const a=t.Nu(1,e,n),c=[cf(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(cf(e,i[g])),u.push(i[g+1]);const d=[],f=It.empty();for(let g=c.length-1;g>=0;--g)if(!r1(d,c[g])){const _=c[g];let S=u[g];S=Se(S);const k=a.Cu(_);if(S instanceof vu)d.push(_);else{const R=ja(S,k);R!=null&&(d.push(_),f.set(_,R))}}const m=new Mt(d);return new Xb(f,m,a.fieldTransforms)}function BP(t,e,n,r=!1){return ja(n,t.Nu(r?4:3,e))}function ja(t,e){if(n1(t=Se(t)))return op("Unsupported field value:",e,t),t1(t,e);if(t instanceof gu)return function(r,s){if(!Zb(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=ja(c,s.Fu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Tc(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tc(s.serializer,i)}}if(r instanceof np)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ii)return{bytesValue:vb(s.serializer,r._byteString)};if(r instanceof wt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rp)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return Fm(c.serializer,u)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${fu(r)}`)}(t,e)}function t1(t,e){const n={};return G_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(r,s)=>{const i=ja(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function n1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof np||t instanceof Ii||t instanceof wt||t instanceof gu||t instanceof rp)}function op(t,e,n){if(!n1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=fu(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function cf(t,e,n){if((e=Se(e))instanceof pu)return e._internalPath;if(typeof e=="string")return ap(t,e);throw Sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const $P=new RegExp("[~\\*/\\[\\]]");function ap(t,e,n){if(e.search($P)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,c+t+u)}function r1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HP extends s1{data(){return super.data()}}function xu(t,e){return typeof e=="string"?ap(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lp{}class cp extends lp{}function yo(t,e,...n){let r=[];e instanceof lp&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof up).length,c=i.filter(u=>u instanceof wu).length;if(a>1||a>0&&c>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class wu extends cp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wu(e,n,r)}_apply(e){const n=this._parse(e);return o1(e._query,n),new zr(e.firestore,e.converter,ef(e._query,n))}_parse(e){const n=yu(e.firestore);return function(i,a,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Zy(m,f);const _=[];for(const S of m)_.push(Xy(u,i,S));g={arrayValue:{values:_}}}else g=Xy(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Zy(m,f),g=BP(c,a,m,f==="in"||f==="not-in");return Fe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GP(t,e,n){const r=e,s=xu("where",t);return wu._create(s,r,n)}class up extends lp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new up(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)o1(a,u),a=ef(a,u)}(e._query,n),new zr(e.firestore,e.converter,ef(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dp extends cp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oa(i,a)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Di(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function i1(t,e="asc"){const n=e,r=xu("orderBy",t);return dp._create(r,n)}class hp extends cp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hp(e,n,r)}_apply(e){return new zr(e.firestore,e.converter,Ec(e._query,this._limit,this._limitType))}}function uf(t){return DP("limit",t),hp._create("limit",t,"F")}function Xy(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nb(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!Y.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wy(t,new Y(r))}if(n instanceof wt)return wy(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fu(n)}.`)}function Zy(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o1(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QP{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>De(a.doubleValue));return new rp(i)}convertGeoPoint(e){return new np(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);xe(Nb(r));const s=new sa(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Xn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l1 extends s1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vl extends l1{data(e={}){return super.data(e)}}class KP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vl(this._firestore,this._userDataWriter,r.key,r,new vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Vl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Vl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:YP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t){t=pn(t,wt);const e=pn(t.firestore,Cs);return CP(tp(e),t._key).then(n=>JP(e,t,n))}class c1 extends QP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function _n(t){t=pn(t,zr);const e=pn(t.firestore,Cs),n=tp(e),r=new c1(e);return WP(t._query),PP(n,t._query).then(s=>new KP(e,r,t,s))}function ev(t,e,n){t=pn(t,wt);const r=pn(t.firestore,Cs),s=a1(t.converter,e);return _u(r,[e1(yu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kt.none())])}function di(t,e,n,...r){t=pn(t,wt);const s=pn(t.firestore,Cs),i=yu(s);let a;return a=typeof(e=Se(e))=="string"||e instanceof pu?zP(i,"updateDoc",t._key,e,n,r):qP(i,"updateDoc",t._key,e),_u(s,[a.toMutation(t._key,Kt.exists(!0))])}function Ol(t){return _u(pn(t.firestore,Cs),[new Um(t._key,Kt.none())])}function Mn(t,e){const n=pn(t.firestore,Cs),r=vt(t),s=a1(t.converter,e);return _u(n,[e1(yu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function _u(t,e){return function(r,s){const i=new Hn;return r.asyncQueue.enqueueAndForget(async()=>vP(await kP(r),s,i)),i.promise}(tp(t),e)}function JP(t,e,n){const r=n.docs.get(e._key),s=new c1(t);return new l1(t,s,e._key,r,new vo(n.hasPendingWrites,n.fromCache),e.converter)}function Sd(){return new ip("serverTimestamp")}(function(e,n=!0){(function(s){Ri=s})(Pi),jn(new fn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Cs(new YA(r.getProvider("auth-internal")),new ek(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Qt(py,"4.7.0",e),Qt(py,"4.7.0","esm2017")})();const u1="@firebase/installations",mp="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1e4,h1=`w:${mp}`,f1="FIS_v2",XP="https://firebaseinstallations.googleapis.com/v1",ZP=60*60*1e3,eR="installations",tR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ws=new Is(eR,tR,nR);function m1(t){return t instanceof yn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1({projectId:t}){return`${XP}/projects/${t}/installations`}function g1(t){return{token:t.token,requestStatus:2,expiresIn:sR(t.expiresIn),creationTime:Date.now()}}async function y1(t,e){const r=(await e.json()).error;return ws.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function v1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function rR(t,{refreshToken:e}){const n=v1(t);return n.append("Authorization",iR(e)),n}async function x1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function sR(t){return Number(t.replace("s","000"))}function iR(t){return`${f1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=p1(t),s=v1(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:f1,appId:t.appId,sdkVersion:h1},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await x1(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:g1(d.authToken)}}else throw await y1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=/^[cdef][\w-]{21}$/,df="";function cR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=uR(t);return lR.test(n)?n:df}catch{return df}}function uR(t){return aR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Map;function b1(t,e){const n=bu(t);E1(n,e),dR(n,e)}function E1(t,e){const n=_1.get(t);if(n)for(const r of n)r(e)}function dR(t,e){const n=hR();n&&n.postMessage({key:t,fid:e}),fR()}let ss=null;function hR(){return!ss&&"BroadcastChannel"in self&&(ss=new BroadcastChannel("[Firebase] FID Change"),ss.onmessage=t=>{E1(t.data.key,t.data.fid)}),ss}function fR(){_1.size===0&&ss&&(ss.close(),ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firebase-installations-database",pR=1,_s="firebase-installations-store";let jd=null;function pp(){return jd||(jd=Jw(mR,pR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_s)}}})),jd}async function jc(t,e){const n=bu(t),s=(await pp()).transaction(_s,"readwrite"),i=s.objectStore(_s),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&b1(t,e.fid),e}async function N1(t){const e=bu(t),r=(await pp()).transaction(_s,"readwrite");await r.objectStore(_s).delete(e),await r.done}async function Eu(t,e){const n=bu(t),s=(await pp()).transaction(_s,"readwrite"),i=s.objectStore(_s),a=await i.get(n),c=e(a);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!a||a.fid!==c.fid)&&b1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(t){let e;const n=await Eu(t.appConfig,r=>{const s=gR(r),i=yR(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===df?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function gR(t){const e=t||{fid:cR(),registrationStatus:0};return T1(e)}function yR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ws.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=vR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xR(t)}:{installationEntry:e}}async function vR(t,e){try{const n=await oR(t,e);return jc(t.appConfig,n)}catch(n){throw m1(n)&&n.customData.serverCode===409?await N1(t.appConfig):await jc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function xR(t){let e=await tv(t.appConfig);for(;e.registrationStatus===1;)await w1(100),e=await tv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await gp(t);return r||n}return e}function tv(t){return Eu(t,e=>{if(!e)throw ws.create("installation-not-found");return T1(e)})}function T1(t){return wR(t)?{fid:t.fid,registrationStatus:0}:t}function wR(t){return t.registrationStatus===1&&t.registrationTime+d1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R({appConfig:t,heartbeatServiceProvider:e},n){const r=bR(t,n),s=rR(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:h1,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await x1(()=>fetch(r,c));if(u.ok){const d=await u.json();return g1(d)}else throw await y1("Generate Auth Token",u)}function bR(t,{fid:e}){return`${p1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(t,e=!1){let n;const r=await Eu(t.appConfig,i=>{if(!I1(i))throw ws.create("not-registered");const a=i.authToken;if(!e&&TR(a))return i;if(a.requestStatus===1)return n=ER(t,e),i;{if(!navigator.onLine)throw ws.create("app-offline");const c=SR(i);return n=NR(t,c),c}});return n?await n:r.authToken}async function ER(t,e){let n=await nv(t.appConfig);for(;n.authToken.requestStatus===1;)await w1(100),n=await nv(t.appConfig);const r=n.authToken;return r.requestStatus===0?yp(t,e):r}function nv(t){return Eu(t,e=>{if(!I1(e))throw ws.create("not-registered");const n=e.authToken;return jR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function NR(t,e){try{const n=await _R(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await jc(t.appConfig,r),n}catch(n){if(m1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await N1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jc(t.appConfig,r)}throw n}}function I1(t){return t!==void 0&&t.registrationStatus===2}function TR(t){return t.requestStatus===2&&!IR(t)}function IR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ZP}function SR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function jR(t){return t.requestStatus===1&&t.requestTime+d1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t){const e=t,{installationEntry:n,registrationPromise:r}=await gp(e);return r?r.catch(console.error):yp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e=!1){const n=t;return await CR(n),(await yp(n,e)).token}async function CR(t){const{registrationPromise:e}=await gp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){if(!t||!t.options)throw Ad("App Configuration");if(!t.name)throw Ad("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ad(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ad(t){return ws.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="installations",RR="installations-internal",DR=t=>{const e=t.getProvider("app").getImmediate(),n=PR(e),r=Ss(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LR=t=>{const e=t.getProvider("app").getImmediate(),n=Ss(e,S1).getImmediate();return{getId:()=>AR(n),getToken:s=>kR(n,s)}};function MR(){jn(new fn(S1,DR,"PUBLIC")),jn(new fn(RR,LR,"PRIVATE"))}MR();Qt(u1,mp);Qt(u1,mp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="analytics",VR="firebase_id",OR="origin",FR=60*1e3,UR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new eu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ot=new Is("analytics","Analytics",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){if(!t.startsWith(vp)){const e=Ot.create("invalid-gtag-resource",{gtagURL:t});return Ct.warn(e.message),""}return t}function j1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function BR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function $R(t,e){const n=BR("firebase-js-sdk-policy",{createScriptURL:zR}),r=document.createElement("script"),s=`${vp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WR(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await j1(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){Ct.error(c)}t("config",s,i)}async function GR(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await j1(n);for(const u of a){const d=c.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ct.error(i)}}function QR(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[c,u]=a;await GR(t,e,n,c,u)}else if(i==="config"){const[c,u]=a;await WR(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=a;t("consent",c,u)}else if(i==="get"){const[c,u,d]=a;t("get",c,u,d)}else if(i==="set"){const[c]=a;t("set",c)}else t(i,...a)}catch(c){Ct.error(c)}}return s}function KR(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=QR(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function YR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(vp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=30,XR=1e3;class ZR{constructor(e={},n=XR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const A1=new ZR;function e4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function t4(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:e4(r)},i=UR.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Ot.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function n4(t,e=A1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Ot.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ot.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new i4;return setTimeout(async()=>{c.abort()},FR),k1({appId:r,apiKey:s,measurementId:i},a,c,e)}async function k1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=A1){var i;const{appId:a,measurementId:c}=t;try{await r4(r,e)}catch(u){if(c)return Ct.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await t4(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!s4(d)){if(s.deleteThrottleMetadata(a),c)return Ct.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?F0(n,s.intervalMillis,JR):F0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,m),Ct.debug(`Calling attemptFetch again in ${f} millis`),k1(t,m,r,s)}}function r4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Ot.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function s4(t){if(!(t instanceof yn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class i4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function o4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(){if(gm())try{await ym()}catch(t){return Ct.warn(Ot.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ct.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function l4(t,e,n,r,s,i,a){var c;const u=n4(t);u.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Ct.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ct.error(_)),e.push(u);const d=a4().then(_=>{if(_)return r.getId()}),[f,m]=await Promise.all([u,d]);YR(i)||$R(i,f.measurementId),s("js",new Date);const g=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return g[OR]="firebase",g.update=!0,m!=null&&(g[VR]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.app=e}_delete(){return delete Ro[this.app.options.appId],Promise.resolve()}}let Ro={},rv=[];const sv={};let kd="dataLayer",u4="gtag",iv,C1,ov=!1;function d4(){const t=[];if(pm()&&t.push("This is a browser extension environment."),Qw()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ot.create("invalid-analytics-context",{errorInfo:e});Ct.warn(n.message)}}function h4(t,e,n){d4();const r=t.options.appId;if(!r)throw Ot.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ct.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ot.create("no-api-key");if(Ro[r]!=null)throw Ot.create("already-exists",{id:r});if(!ov){HR(kd);const{wrappedGtag:i,gtagCore:a}=KR(Ro,rv,sv,kd,u4);C1=i,iv=a,ov=!0}return Ro[r]=l4(t,rv,sv,e,iv,kd,n),new c4(t)}function f4(t=xm()){t=Se(t);const e=Ss(t,Ac);return e.isInitialized()?e.getImmediate():m4(t)}function m4(t,e={}){const n=Ss(t,Ac);if(n.isInitialized()){const s=n.getImmediate();if(Zo(e,n.getOptions()))return s;throw Ot.create("already-initialized")}return n.initialize({options:e})}async function p4(){if(pm()||!Qw()||!gm())return!1;try{return await ym()}catch{return!1}}function g4(t,e,n,r){t=Se(t),o4(C1,Ro[t.app.options.appId],e,n,r).catch(s=>Ct.error(s))}const av="@firebase/analytics",lv="0.10.7";function y4(){jn(new fn(Ac,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return h4(r,s,n)},"PUBLIC")),jn(new fn("analytics-internal",t,"PRIVATE")),Qt(av,lv),Qt(av,lv,"esm2017");function t(e){try{const n=e.getProvider(Ac).getImmediate();return{logEvent:(r,s,i)=>g4(n,r,s,i)}}catch(n){throw Ot.create("interop-component-reg-failed",{reason:n})}}}y4();const v4={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},xp=Xw(v4),ue=VP(xp),ut=$A(xp);typeof window<"u"&&p4().then(t=>{t&&f4(xp)});const P1=C.createContext(void 0),Et=()=>{const t=C.useContext(P1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Cd=async t=>{var r,s;if(!t)return null;const n=(await fp(vt(ue,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(n==null?void 0:n.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(n==null?void 0:n.isAdmin)||!1,photoURL:t.photoURL||(n==null?void 0:n.photoURL),createdAt:(s=n==null?void 0:n.createdAt)==null?void 0:s.toDate()}},x4=({children:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>{const g=Pj(ut,async _=>{if(_){const S=await Cd(_);n(S)}else n(null);s(!1)});return()=>g()},[]);const m={currentUser:e,loading:r,register:async(g,_,S)=>{try{const k=await T_(ut,g,_),{user:R}=k;await I_(R,{displayName:S}),await sy(R);const E={uid:R.uid,email:R.email,displayName:S,emailVerified:R.emailVerified,isAdmin:!1,createdAt:Sd(),updatedAt:Sd()};await ev(vt(ue,"users",R.uid),E);const b=await Cd(R);return n(b),R}catch(k){throw console.error("Erreur lors de l'inscription:",k),k}},login:async(g,_)=>{try{const S=await Gh(ut,g,_),k=await Cd(S.user);return n(k),k}catch(S){throw console.error("Erreur de connexion:",S),S}},loginWithGoogle:async()=>{const g=new Ln;let _=null;try{_=(await Zj(ut,g)).user,console.log("[Google] Utilisateur connecté:",_);const k=vt(ue,"users",_.uid),R=await fp(k);console.log("[Google] Document utilisateur existe:",R.exists()),R.exists()||(await ev(k,{uid:_.uid,email:_.email,displayName:_.displayName,emailVerified:_.emailVerified,isAdmin:!1,createdAt:Sd(),photoURL:_.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore"));const E={uid:_.uid,email:_.email||"",displayName:_.displayName||"",emailVerified:_.emailVerified,isAdmin:R.exists()?R.data().isAdmin:!1,createdAt:_.metadata.creationTime?new Date(_.metadata.creationTime):void 0,photoURL:_.photoURL??void 0};return console.log("[Google] AppUser retourné:",E),E}catch(S){throw console.error("[Google] Erreur dans loginWithGoogle:",S,_),S}},logout:async()=>{try{await Rj(ut),n(null)}catch(g){throw console.error("Erreur lors de la déconnexion:",g),g}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(ut.currentUser)try{await sy(ut.currentUser)}catch(g){throw console.error("Erreur lors de l'envoi de l'email de vérification:",g),g}}};return o.jsx(P1.Provider,{value:m,children:t})},R1=C.createContext(void 0),Vi=()=>{const t=C.useContext(R1);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},w4=({children:t})=>{const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState([]),[c,u]=C.useState(!0);C.useEffect(()=>{(async()=>{u(!0);const v=await _n(Ue(ue,"guideSections"));s(v.docs.map(P=>({id:P.id,...P.data()})));const x=await _n(Ue(ue,"resources"));n(x.docs.map(P=>({id:P.id,...P.data()})));const A=await _n(Ue(ue,"faq"));a(A.docs.map(P=>({id:P.id,...P.data()}))),u(!1)})()},[]);const d=async()=>{const y=await _n(Ue(ue,"guideSections"));s(y.docs.map(A=>({id:A.id,...A.data()})));const v=await _n(Ue(ue,"resources"));n(v.docs.map(A=>({id:A.id,...A.data()})));const x=await _n(Ue(ue,"faq"));a(x.docs.map(A=>({id:A.id,...A.data()})))},N={resources:e,guideSections:r,faqItems:i,addResource:async y=>{await Mn(Ue(ue,"resources"),y),await d()},updateResource:async(y,v)=>{await di(vt(ue,"resources",y),v),await d()},deleteResource:async y=>{await Ol(vt(ue,"resources",y)),await d()},addGuideSection:async y=>{await Mn(Ue(ue,"guideSections"),y),await d()},updateGuideSection:async(y,v)=>{await di(vt(ue,"guideSections",y),v),await d()},deleteGuideSection:async y=>{await Ol(vt(ue,"guideSections",y)),await d()},addFAQItem:async y=>{await Mn(Ue(ue,"faq"),y),await d()},updateFAQItem:async(y,v)=>{await di(vt(ue,"faq",y),v),await d()},deleteFAQItem:async y=>{await Ol(vt(ue,"faq",y)),await d()},getResourcesByPhase:y=>e.filter(v=>v.phase===y),getGuideSectionsByPhase:y=>r.filter(v=>v.phase===y).sort((v,x)=>v.order-x.order),getFAQItemsByPhase:y=>i.filter(v=>v.phase===y),searchResources:y=>{const v=y.toLowerCase();return e.filter(x=>x.title.toLowerCase().includes(v)||x.description.toLowerCase().includes(v)||x.category.toLowerCase().includes(v))}};return c?o.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):o.jsx(R1.Provider,{value:N,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},f)=>C.createElement("svg",{ref:f,..._4,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${b4(t)}`,c].join(" "),...d},[...e.map(([m,g])=>C.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Z("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Z("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=Z("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Z("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=Z("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Z("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=Z("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Z("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=Z("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=Z("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Z("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=Z("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=Z("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Z("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Z("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K4=()=>{var m,g;const{currentUser:t,logout:e,isAdmin:n}=Et(),[r,s]=C.useState(!1),[i,a]=C.useState(!1),[c,u]=C.useState(!1),d=Ts();C.useEffect(()=>{const _=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]),C.useEffect(()=>{s(!1),a(!1)},[d]);const f=async()=>{try{await e()}catch(_){console.error("Logout failed",_)}};return o.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:o.jsxs("div",{className:"container mx-auto px-4 py-3",children:[o.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[o.jsx(J,{to:"/",className:"flex items-center",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),o.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${c?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),o.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&o.jsxs(o.Fragment,{children:[o.jsx(J,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),o.jsx(J,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),o.jsx(J,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&o.jsx(J,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Admin"})]})}),o.jsx("div",{className:"hidden md:flex items-center",children:t?o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>a(!i),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${c?"text-blue-800":"text-white"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),o.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),o.jsx(hi,{className:"w-4 h-4"})]}),i&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[o.jsxs(J,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(ff,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Profil"})]}),n()&&o.jsxs(J,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(M1,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Administration"})]}),o.jsxs("button",{onClick:f,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(hv,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Déconnexion"})]})]})]}):o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(J,{to:"/login",className:`font-medium transition-colors duration-300 ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),o.jsx(J,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),o.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?o.jsx(F1,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`}):o.jsx(B4,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`})})]}),r&&o.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:o.jsx("div",{className:"flex flex-col space-y-4",children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:(((m=t.displayName)==null?void 0:m.charAt(0))||((g=t.email)==null?void 0:g.charAt(0))||"U").toUpperCase()})}),o.jsx("span",{className:`ml-2 font-medium ${c?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),o.jsxs(J,{to:"/profile",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[o.jsx(ff,{className:"w-4 h-4 mr-2"}),"Profil"]}),o.jsx(J,{to:"/dashboard",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),o.jsx(J,{to:"/resources",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),o.jsx(J,{to:"/faq",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&o.jsx(J,{to:"/admin",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Administration"}),o.jsxs("button",{onClick:f,className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[o.jsx(hv,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Déconnexion"})]})]}):o.jsxs("div",{className:"flex flex-col space-y-4",children:[o.jsx(J,{to:"/login",className:`font-medium ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),o.jsx(J,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},Y4=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"bg-blue-900 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"col-span-1 md:col-span-1",children:[o.jsxs(J,{to:"/",className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:o.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),o.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),o.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(J,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),o.jsx("li",{children:o.jsx(J,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),o.jsx("li",{children:o.jsx(J,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(J,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),o.jsx("li",{children:o.jsx(J,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),o.jsx("li",{children:o.jsx(J,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(q4,{className:"w-4 h-4 mr-2"}),o.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),o.jsxs("div",{className:"flex space-x-4 mt-4",children:[o.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:o.jsx(U4,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:o.jsx(L4,{className:"w-5 h-5"})})]})]})]}),o.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),o.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",o.jsx(M4,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF"]})]})]})})},ml=({children:t})=>{const{currentUser:e,loading:n}=Et();return n?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Lh,{to:"/login"})},Qr=({children:t})=>{const{currentUser:e,loading:n,isAdmin:r}=Et();return n?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?o.jsx(o.Fragment,{children:t}):o.jsx(Lh,{to:"/dashboard"}):o.jsx(Lh,{to:"/login"})},J4=()=>{const{currentUser:t}=Et();return o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[o.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide complet pour passer de CPS à l'ESIGELEC"}),o.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),o.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?o.jsxs(J,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",o.jsx(cv,{className:"ml-2 w-5 h-5"})]}):o.jsxs(o.Fragment,{children:[o.jsxs(J,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",o.jsx(cv,{className:"ml-2 w-5 h-5"})]}),o.jsx(J,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),o.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:o.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Q4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),o.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(S4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),o.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(z4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),o.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Pc,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),o.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),o.jsxs("div",{className:"flex flex-col space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),o.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Préparation dossier Campus France"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Candidature ESIGELEC"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),o.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Demande de visa étudiant"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Recherche de logement"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),o.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Transport vers la France"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),o.jsx("section",{className:"py-16 bg-gradient-to-r from-red-800 to-red-700 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),o.jsx("p",{className:"text-xl text-red-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),o.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?o.jsx(J,{to:"/dashboard",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):o.jsxs(o.Fragment,{children:[o.jsx(J,{to:"/register",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),o.jsx(J,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})})]})},X4=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(!1),[a,c]=C.useState(""),[u,d]=C.useState(!1),[f,m]=C.useState(!1),g=gn(),{login:_,loginWithGoogle:S}=Et();Mc.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const k=async E=>{E.preventDefault();try{c(""),d(!0),await _(t,n),g("/dashboard")}catch(b){c("Identifiants invalides. Veuillez réessayer."),console.error(b)}finally{d(!1)}},R=async()=>{c(""),m(!0);try{await S(),g("/dashboard")}catch(E){let b="Erreur lors de la connexion avec Google.";E&&typeof E=="object"&&"message"in E&&(b+=`
${E.message}`),c(b),console.error(E)}finally{m(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),o.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",o.jsx(J,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[a&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:o.jsx("div",{className:"flex",children:o.jsx("div",{children:o.jsx("p",{className:"text-sm text-red-700",children:a})})})}),o.jsxs("button",{type:"button",onClick:R,disabled:f,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${f?"opacity-70 cursor-not-allowed":""}`,children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:o.jsxs("g",{children:[o.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),o.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),o.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),o.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),f?"Connexion Google...":"Se connecter avec Google"]}),o.jsxs("form",{className:"space-y-6",onSubmit:k,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:E=>e(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:E=>r(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>i(E=>!E),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":s?"Masquer le mot de passe":"Afficher le mot de passe",children:s?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),o.jsx("div",{className:"text-sm",children:o.jsx(J,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},Z4=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,c]=C.useState(""),[u,d]=C.useState(!1),[f,m]=C.useState(!1),[g,_]=C.useState(""),[S,k]=C.useState(!1),R=gn(),{register:E,loginWithGoogle:b}=Et(),T=async()=>{try{await b(),R("/dashboard")}catch{_("Erreur lors de l'inscription avec Google"),console.error()}},L=async D=>{if(D.preventDefault(),s!==a)return _("Les mots de passe ne correspondent pas");try{_(""),k(!0),await E(n,s,t),R("/dashboard")}catch{_("Erreur lors de la création du compte"),console.error()}finally{k(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),o.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",o.jsx(J,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[g&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:o.jsx("div",{className:"flex",children:o.jsx("div",{children:o.jsx("p",{className:"text-sm text-red-700",children:g})})})}),o.jsxs("button",{type:"button",onClick:T,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:o.jsxs("g",{children:[o.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),o.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),o.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),o.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),o.jsxs("form",{className:"space-y-6",onSubmit:L,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:D=>e(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:D=>r(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:s,onChange:D=>i(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:D=>c(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>m(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":f?"Masquer le mot de passe":"Afficher le mot de passe",children:f?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",o.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:S,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${S?"opacity-70 cursor-not-allowed":""}`,children:S?"Création en cours...":"Créer un compte"})})]})]})})]})},e5=()=>{const{currentUser:t}=Et(),{guideSections:e,resources:n,getGuideSectionsByPhase:r,faqItems:s}=Vi(),[i,a]=C.useState("post-cps"),[c,u]=C.useState([]),d=g=>{c.includes(g)?u(c.filter(_=>_!==g)):u([...c,g])},f=r?r(i):[],m=g=>{const _=r?r(g):[];if(!_||_.length===0)return 0;const S=_.filter(k=>c.includes(k.id));return Math.round(S.length/_.length*100)};return!n||!s||!e?o.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),o.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",o.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:o.jsxs("div",{className:"flex flex-wrap",children:[o.jsx("button",{onClick:()=>a("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),o.jsx("button",{onClick:()=>a("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),o.jsx("button",{onClick:()=>a("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsxs("div",{className:"border-b border-gray-200 p-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[i==="post-cps"&&"Après votre CPS",i==="during-process"&&"Pendant vos démarches administratives",i==="pre-arrival"&&"Avant votre arrivée en France"]}),o.jsxs("p",{className:"text-gray-600",children:[i==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",i==="during-process"&&"Les démarches à effectuer pour préparer votre départ",i==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),o.jsx("div",{className:"divide-y divide-gray-200",children:f&&f.length>0?f.map(g=>o.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:o.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[o.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:o.jsx("button",{onClick:()=>d(g.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${c.includes(g.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:o.jsx(D1,{className:"w-5 h-5"})})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g.title}),o.jsx("p",{className:"text-gray-600 mb-4",children:g.content}),Array.isArray(g.resources)&&g.resources.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),o.jsx("div",{className:"space-y-2",children:g.resources.map(_=>{const S=n.find(k=>k.id===_);return S?o.jsxs("a",{href:S.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(zn,{className:"w-4 h-4 mr-2"}),S.title]},S.id):null})})]})]})]})},g.id)):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m("post-cps"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${m("post-cps")}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m("during-process"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${m("during-process")}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m("pre-arrival"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${m("pre-arrival")}%`}})})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),o.jsx(J,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),o.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,3).map(g=>o.jsxs("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:o.jsx(zn,{className:"w-5 h-5 text-blue-700"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:g.title}),o.jsx("p",{className:"text-xs text-gray-500",children:g.phase})]})]},g.id))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),o.jsx(J,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),o.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,2).map(g=>o.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:g.question}),o.jsx("p",{className:"text-xs text-gray-700",children:g.answer&&g.answer.length>100?`${g.answer.substring(0,100)}...`:g.answer})]},g.id))})]})]})]})})]})},t5=()=>{const{resources:t}=Vi(),[e,n]=C.useState(""),[r,s]=C.useState("all"),[i,a]=C.useState("all"),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[m,g]=C.useState(null),[_,S]=C.useState(!1),k=[...new Set(t.map(D=>D.category))],R=D=>{if(D.includes("dropbox.com")){let V=D.replace("www.dropbox.com","dl.dropboxusercontent.com");return V.includes("?dl=0")?V=V.replace("?dl=0","?raw=1"):V.includes("?")?V+="&raw=1":V+="?raw=1",V}return D},E=D=>`https://docs.google.com/viewer?url=${encodeURIComponent(D)}&embedded=true`,b=D=>{D.preventDefault()},T=t.filter(D=>r!=="all"&&D.phase!==r||i!=="all"&&D.category!==i?!1:e?D.title.toLowerCase().includes(e.toLowerCase())||D.description.toLowerCase().includes(e.toLowerCase()):!0),L=D=>{switch(D){case"pdf":return o.jsx(R4,{className:"w-6 h-6 text-red-500"});case"image":return o.jsx(O4,{className:"w-6 h-6 text-green-500"});case"video":return o.jsx(G4,{className:"w-6 h-6 text-purple-500"});case"archive":return o.jsx(T4,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return o.jsx(zn,{className:"w-6 h-6 text-blue-500"})}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),o.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx("div",{className:"p-6",children:o.jsx("form",{onSubmit:b,children:o.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(kc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:D=>n(D.target.value)})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!c),children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(dv,{className:"mr-2 h-4 w-4"}),r==="all"?"Toutes les phases":r==="post-cps"?"Post-CPS":r==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),o.jsx(hi,{className:"h-4 w-4"})]}),c&&o.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:o.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("all"),u(!1)},children:"Toutes les phases"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("post-cps"),u(!1)},children:"Post-CPS"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("during-process"),u(!1)},children:"Pendant les démarches"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>f(!d),children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(dv,{className:"mr-2 h-4 w-4"}),i==="all"?"Toutes les catégories":i]}),o.jsx(hi,{className:"h-4 w-4"})]}),d&&o.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:o.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a("all"),f(!1)},children:"Toutes les catégories"}),k.map(D=>o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a(D),f(!1)},children:D},D))]})})]})]})]})})})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.length>0?T.map(D=>o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{g(D),S(!0)},children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:L(D.fileType)}),o.jsx("div",{className:"ml-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.title})})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.phase==="post-cps"?"Post-CPS":D.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:D.category}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.fileType==="pdf"?"bg-red-100 text-red-800":D.fileType==="doc"||D.fileType==="docx"||D.fileType==="txt"?"bg-blue-100 text-blue-800":D.fileType==="xls"||D.fileType==="xlsx"?"bg-green-100 text-green-800":D.fileType==="ppt"||D.fileType==="pptx"?"bg-orange-100 text-orange-800":D.fileType==="image"?"bg-purple-100 text-purple-800":D.fileType==="video"?"bg-pink-100 text-pink-800":D.fileType==="audio"?"bg-indigo-100 text-indigo-800":D.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:D.fileType.toUpperCase()})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[o.jsxs("span",{children:["Mis à jour le ",D.updatedDate]}),o.jsxs("a",{href:D.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:V=>V.stopPropagation(),children:[o.jsx(uv,{className:"w-4 h-4 mr-1"}),o.jsx("span",{children:"Télécharger"})]})]})]})},D.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:o.jsx(kc,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),o.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),_&&m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m.title}),o.jsx("p",{className:"text-sm text-gray-500",children:m.category})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(k4,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),o.jsxs("a",{href:m.fileUrl,download:!0,className:"flex items-center bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(uv,{className:"w-4 h-4 mr-1"}),"Télécharger"]}),o.jsxs("button",{onClick:()=>S(!1),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(F1,{className:"w-4 h-4 mr-1"}),"Fermer"]})]})]}),o.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:m.fileType==="pdf"?o.jsxs("div",{className:"flex flex-col items-center h-full",children:[o.jsx("div",{className:"h-full w-full",children:o.jsx("object",{data:R(m.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:o.jsx("iframe",{src:E(m.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${m.title} (Google Viewer)`,allowFullScreen:!0})})}),o.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",o.jsx("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"télécharger"}),"ou l'",o.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(m.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):m.fileType==="image"?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("img",{src:R(m.fileUrl),alt:m.title,className:"max-w-full max-h-full object-contain rounded-md"})}):o.jsx("iframe",{src:R(m.fileUrl),className:"w-full h-full border-0 rounded-md",title:m.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},n5=()=>{const{faqItems:t,addFAQItem:e}=Vi(),{currentUser:n}=Et(),[r,s]=C.useState(""),[i,a]=C.useState("all"),[c,u]=C.useState(null),[d,f]=C.useState(!1),[m,g]=C.useState(!1),[_,S]=C.useState(!1),[k,R]=C.useState(""),[E,b]=C.useState("post-cps"),[T,L]=C.useState(""),[D,V,N]=t.reduce((x,A)=>(n&&(A.userId===n.uid||A.userEmail===n.email)&&(A.isAnswered?x[0].push(A):x[1].push(A)),A.isApproved&&A.isAnswered&&(i==="all"||A.phase===i)&&(!r||A.question.toLowerCase().includes(r.toLowerCase())||A.answer.toLowerCase().includes(r.toLowerCase())||A.category.toLowerCase().includes(r.toLowerCase()))&&x[2].push(A),x),[[],[],[]]),y=x=>{u(c===x?null:x)},v=x=>{x.preventDefault(),k.trim()&&(e({question:k,answer:"Cette question est en attente de réponse par notre équipe.",category:T||"général",phase:E,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:n==null?void 0:n.uid,userEmail:n==null?void 0:n.email}),R(""),L(""),g(!0),setTimeout(()=>{g(!1),f(!1)},5e3))};return C.useEffect(()=>{d||g(!1)},[d]),o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),o.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(kc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:r,onChange:x=>s(x.target.value)})]})}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("select",{value:i,onChange:x=>a(x.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:_,children:[o.jsx("option",{value:"all",children:"Toutes les phases"}),o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]}),n&&o.jsx("button",{type:"button",onClick:()=>S(!_),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${_?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:_?"Toutes les questions":"Mes questions"}),o.jsxs("button",{type:"button",onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(ls,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]}),d&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[o.jsx(ei,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),o.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),o.jsx("form",{onSubmit:v,className:"space-y-7",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),o.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:k,onChange:x=>R(x.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:x=>b(x.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:T,onChange:x=>L(x.target.value)})]})]}),m?o.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(D1,{className:"h-5 w-5 text-green-500 mr-2"}),o.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),o.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):o.jsxs("div",{className:"flex justify-end",children:[o.jsx("button",{type:"button",onClick:()=>f(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),o.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),_?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",o.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:D.length})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:D.length>0?D.map(x=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(x.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(ei,{className:"h-4 w-4 text-green-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:x.question}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:x.phase==="post-cps"?"Post-CPS":x.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),x.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:x.category})]})]})]}),c===x.id?o.jsx(Pd,{className:"h-5 w-5 text-gray-500"}):o.jsx(hi,{className:"h-5 w-5 text-gray-500"})]}),c===x.id&&o.jsxs("div",{className:"mt-4 ml-11",children:[o.jsx("p",{className:"text-gray-700",children:x.answer}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",x.updatedDate]})]})]},x.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",o.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:V.length})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:V.length>0?V.map(x=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(x.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:o.jsx(ei,{className:"h-4 w-4 text-yellow-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[x.question,o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:x.phase==="post-cps"?"Post-CPS":x.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),x.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:x.category}),o.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",x.createdDate]})]})]})]}),c===x.id?o.jsx(Pd,{className:"h-5 w-5 text-gray-500"}):o.jsx(hi,{className:"h-5 w-5 text-gray-500"})]}),c===x.id&&o.jsx("div",{className:"mt-4 ml-11",children:o.jsx("p",{className:"text-gray-700 italic",children:x.answer})})]},x.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),o.jsx("div",{className:"divide-y divide-gray-200",children:N.length>0?N.map(x=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(x.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx(ei,{className:"h-4 w-4 text-blue-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[x.question,_&&!x.isApproved&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:x.phase==="post-cps"?"Post-CPS":x.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),x.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:x.category})]})]})]}),c===x.id?o.jsx(Pd,{className:"h-5 w-5 text-gray-500"}):o.jsx(hi,{className:"h-5 w-5 text-gray-500"})]}),c===x.id&&o.jsxs("div",{className:"mt-4 ml-11",children:[o.jsx("p",{className:"text-gray-700",children:x.answer}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",x.updatedDate]})]})]},x.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})};function r5(t=20){const[e,n]=C.useState([]),[r,s]=C.useState(!0);return C.useEffect(()=>{(async()=>{s(!0);try{const a=yo(Ue(ue,"adminActivityLog"),i1("date","desc"),uf(t)),c=await _n(a);n(c.docs.map(u=>({id:u.id,...u.data()})))}catch{n([])}s(!1)})()},[t]),{recentActivity:e,loading:r}}function s5(t){const e={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",s=e[t.type]||t.type.toLowerCase(),i=n[t.target]||t.target.toLowerCase();return`${r} ${s} ${i}`}const i5=()=>{const{currentUser:t}=Et(),{resources:e,guideSections:n,faqItems:r}=Vi(),{recentActivity:s,loading:i}=r5();return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),o.jsxs(J,{to:"/admin/tutorial",className:"flex items-center px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors",title:"Consulter le guide d'administration",children:[o.jsx(L1,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]}),o.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",o.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[o.jsxs(J,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Dd,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),o.jsxs(J,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(zn,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),o.jsxs(J,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Pc,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),o.jsxs(J,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(j4,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(zn,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Dd,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(ei,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5&&o.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),o.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>a.isAnswered).length>0?r.filter(a=>a.isAnswered).map(a=>o.jsxs("li",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex-grow pr-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),a.isApproved?o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),o.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"})]}),o.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o.jsx(J,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},a.id)):o.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(r)&&o.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:r.filter(a=>!a.isAnswered).length})]}),Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5&&o.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),o.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>0?r.filter(a=>!a.isAnswered).map(a=>o.jsxs("li",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex-grow pr-2",children:[o.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"}),a.userEmail&&o.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",a.userEmail]})]})]}),o.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o.jsx(J,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},a.id)):o.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs(J,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Dd,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer le contenu"})]}),o.jsxs(J,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(zn,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer les ressources"})]}),o.jsxs(J,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(ei,{className:"h-5 w-5"})}),o.jsx("span",{children:"Modérer la FAQ"})]}),o.jsxs(J,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Pc,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[o.jsxs(J,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ls,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une section de guide"})]}),o.jsxs(J,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ls,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une ressource"})]}),o.jsxs(J,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ls,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),o.jsx("div",{className:`divide-y divide-gray-200 ${s.length>5?"max-h-80 overflow-y-auto":""}`,children:i?o.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):s.length===0?o.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):s.map(a=>{var c;return o.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(zn,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:s5(a)}),o.jsx("div",{className:"text-xs text-gray-500",children:new Date(a.date).toLocaleString()}),typeof((c=a.details)==null?void 0:c.title)=="string"&&o.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",a.details.title]})]})]})},a.id)})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="post-cps").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="post-cps").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="post-cps").length:0})]})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="during-process").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="during-process").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="during-process").length:0})]})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="pre-arrival").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="pre-arrival").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Dn({type:t,target:e,targetId:n,user:r,details:s}){await Mn(Ue(ue,"adminActivityLog"),{type:t,target:e,targetId:n||null,user:r||null,date:new Date().toISOString(),details:s||null})}const _p=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmButtonText:i="Confirmer",cancelButtonText:a="Annuler",type:c="danger"})=>{if(!t)return null;const d=(()=>{switch(c){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),f=m=>{m.target===m.currentTarget&&c!=="danger"&&e()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:f,children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[o.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[o.jsx(N4,{className:`mr-2 h-5 w-5 ${d.icon}`}),o.jsx("h3",{className:"text-lg font-medium",children:r})]}),o.jsx("div",{className:"px-6 py-4",children:o.jsx("p",{className:"text-gray-700",children:s})}),o.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[o.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:a}),o.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{n(),e()},autoFocus:!0,children:i})]})]})})},o5=()=>{const[t]=qw(),e=gn(),{currentUser:n}=Et(),{guideSections:r,addGuideSection:s,updateGuideSection:i,deleteGuideSection:a,resources:c,faqItems:u,addFAQItem:d,updateFAQItem:f,deleteFAQItem:m}=Vi(),g=t.get("new")==="section",_=t.get("new")==="faq",S=g?null:t.get("edit")&&r.some(U=>U.id===t.get("edit"))?t.get("edit"):null,k=_?null:t.get("edit")&&u.some(U=>U.id===t.get("edit"))?t.get("edit"):null,[R,E]=C.useState(""),[b,T]=C.useState("post-cps"),[L,D]=C.useState(""),[V,N]=C.useState(1),[y,v]=C.useState([]),[x,A]=C.useState(""),[P,j]=C.useState(""),[le,pe]=C.useState(""),[$e,H]=C.useState("post-cps"),[B,W]=C.useState(!0),[X,he]=C.useState(!1),[ge,_e]=C.useState(!1),[Nt,Zt]=C.useState("section");C.useEffect(()=>{if(S){const U=r.find(ie=>ie.id===S);U&&(E(U.title),T(U.phase),D(U.content),N(U.order),v(Array.isArray(U.resources)?U.resources:[]))}else if(g){E(""),T("post-cps"),D("");const U=r.filter(ie=>ie.phase==="post-cps");N(U.length>0?Math.max(...U.map(ie=>ie.order))+1:1),v([])}if(k){const U=u.find(ie=>ie.id===k);U&&(A(U.question),j(U.answer),pe(U.category||""),H(U.phase),W(!!U.isApproved),he(!!U.isAnswered))}else _&&(A(""),j(""),pe(""),H("post-cps"),W(!0),he(!1))},[S,g,r,k,_,u]);const en=()=>{j(""),he(!1)},tn=U=>{const ie=U.trim()!==""&&U!=="Cette question est en attente de réponse par notre équipe.";he(ie)},Aa=U=>{if(U.preventDefault(),_||k)if(k){const ie=P.trim()!==""&&P!=="Cette question est en attente de réponse par notre équipe.";he(ie),f(k,{question:x,answer:P,category:le,phase:$e,isApproved:B,isAnswered:ie}),Dn({type:"Modification",target:"FAQ",targetId:k,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:x}})}else{const ie=P.trim()!==""&&P!=="Cette question est en attente de réponse par notre équipe.";he(ie),d({question:x,answer:P,category:le,phase:$e,isApproved:B,isAnswered:ie,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),Dn({type:"Ajout",target:"FAQ",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:x}})}else S?(i(S,{title:R,phase:b,content:L,order:V,resources:y}),Dn({type:"Modification",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:R}})):(s({title:R,phase:b,content:L,order:V,resources:y}),Dn({type:"Ajout",target:"Section",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:R}}));e("/admin")},ka=U=>{Zt(U),_e(!0)},Ps=()=>{Nt==="section"&&S?(a(S),Dn({type:"Suppression",target:"Section",targetId:S,user:n==null?void 0:n.uid,details:{title:R}}),e("/admin/content")):Nt==="faq"&&k&&(m(k),Dn({type:"Suppression",target:"FAQ",targetId:k,user:n==null?void 0:n.uid,details:{question:x}}),e("/admin/content")),_e(!1)},Rs=U=>{y.includes(U)?v(y.filter(ie=>ie!==U)):v([...y,U])},Br=c.filter(U=>U.phase===b),Pt={"post-cps":r.filter(U=>U.phase==="post-cps").sort((U,ie)=>U.order-ie.order),"during-process":r.filter(U=>U.phase==="during-process").sort((U,ie)=>U.order-ie.order),"pre-arrival":r.filter(U=>U.phase==="pre-arrival").sort((U,ie)=>U.order-ie.order)};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:g?"Ajouter une nouvelle section":_?"Ajouter une question FAQ":k?"Modifier la FAQ":S?"Modifier la section":"Édition"}),o.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[o.jsx(bs,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_||k?o.jsx("form",{onSubmit:Aa,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),o.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:x,onChange:U=>A(U.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),k&&o.jsx("button",{type:"button",onClick:en,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),o.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:U=>{j(U.target.value),tn(U.target.value)},required:!0}),o.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${X?"bg-green-500":"bg-yellow-500"} mr-2`}),o.jsx("span",{className:"text-gray-600",children:X?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:le,onChange:U=>pe(U.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:$e,onChange:U=>H(U.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:B,onChange:U=>W(U.target.checked)}),o.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:k&&o.jsxs("button",{type:"button",onClick:()=>ka("faq"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[o.jsx(Cc,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(hf,{className:"mr-2 h-4 w-4"}),_?"Ajouter":"Enregistrer"]})]})]})]})}):o.jsx("form",{onSubmit:Aa,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),o.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:R,onChange:U=>E(U.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:U=>{const ie=U.target.value;T(ie);const zt=r.filter(Bt=>Bt.phase===ie);N(zt.length>0?Math.max(...zt.map(Bt=>Bt.order))+1:1),v([])},required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),o.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:V,onChange:U=>N(parseInt(U.target.value)),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),o.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:L,onChange:U=>D(U.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(Br)&&Br.length>0?o.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:Br.map(U=>o.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[o.jsx("input",{type:"checkbox",id:`resource-${U.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:y.includes(U.id),onChange:()=>Rs(U.id)}),o.jsx("label",{htmlFor:`resource-${U.id}`,className:"ml-3 block text-sm text-gray-700",children:U.title})]},U.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:S&&o.jsxs("button",{type:"button",onClick:()=>ka("section"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[o.jsx(Cc,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(hf,{className:"mr-2 h-4 w-4"}),g?"Ajouter":"Enregistrer"]})]})]})]})})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),o.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(ls,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Pt["post-cps"])&&Pt["post-cps"].length>0?o.jsx("ul",{className:"space-y-2",children:Pt["post-cps"].map(U=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===U.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),o.jsx("span",{className:"flex-grow",children:U.title}),o.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Pt["during-process"])&&Pt["during-process"].length>0?o.jsx("ul",{className:"space-y-2",children:Pt["during-process"].map(U=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===U.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),o.jsx("span",{className:"flex-grow",children:U.title}),o.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Pt["pre-arrival"])&&Pt["pre-arrival"].length>0?o.jsx("ul",{className:"space-y-2",children:Pt["pre-arrival"].map(U=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===U.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),o.jsx("span",{className:"flex-grow",children:U.title}),o.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{className:"mt-8 border-t pt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),o.jsxs("button",{onClick:()=>e("/admin/content?new=faq"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(ls,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),(()=>{const U={};return u.forEach(ie=>{const zt=ie.category||"Non catégorisé";U[zt]||(U[zt]=[]),U[zt].push(ie)}),Object.entries(U).map(([ie,zt])=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:ie}),zt.length>0?o.jsx("ul",{className:"space-y-2",children:zt.map(Bt=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${Bt.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${k===Bt.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("span",{className:"flex-grow",children:Bt.question}),!Bt.isAnswered&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mr-2",children:"En attente"}),Bt.isApproved?o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Approuvée"}):o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-2",children:"Non approuvée"})]})},Bt.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune question disponible"})]},ie))})()]})]})]})})]})}),o.jsx(_p,{isOpen:ge,onClose:()=>_e(!1),onConfirm:Ps,title:`Confirmer la suppression de ${Nt==="section"?"la section":"la question FAQ"}`,message:Nt==="section"?`Êtes-vous sûr de vouloir supprimer la section "${R}" ? Cette action est irréversible.`:`Êtes-vous sûr de vouloir supprimer la question "${x}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"})]})};var a5="rpc",l5="upload",c5="download",Ld="app",Md="user",Vd="team",u5="noauth",d5="cookie",Rc="dropboxapi.com",fv="dropbox.com",mf={api:"api",notify:"bolt",content:"api-content"},I={};I.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};I.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};I.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};I.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};I.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};I.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};I.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};I.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};I.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};I.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};I.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};I.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};I.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};I.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};I.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};I.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};I.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};I.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};I.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};I.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};I.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};I.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};I.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};I.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};I.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};I.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};I.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};I.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};I.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};I.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};I.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};I.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};I.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};I.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};I.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};I.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};I.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};I.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};I.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};I.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};I.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};I.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};I.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};I.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};I.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};I.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};I.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};I.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};I.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};I.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};I.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};I.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};I.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};I.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};I.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};I.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};I.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};I.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};I.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};I.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};I.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};I.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};I.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};I.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};I.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};I.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};I.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};I.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};I.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};I.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};I.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};I.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};I.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};I.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};I.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};I.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};I.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};I.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};I.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};I.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};I.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};I.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};I.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};I.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};I.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};I.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};I.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};I.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};I.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};I.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};I.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};I.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};I.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};I.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};I.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};I.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};I.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};I.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};I.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};I.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};I.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};I.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};I.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};I.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};I.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};I.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};I.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};I.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};I.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};I.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};I.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};I.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};I.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};I.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};I.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};I.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};I.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};I.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};I.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};I.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};I.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};I.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};I.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};I.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};I.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};I.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};I.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};I.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};I.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};I.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};I.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};I.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};I.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};I.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};I.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};I.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};I.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};I.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};I.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};I.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};I.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};I.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};I.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};I.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};I.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};I.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};I.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};I.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};I.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};I.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function h5(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var Od=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rc,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(n!==Rc&&mf[e]!==void 0&&(e=mf[e],r="-"),"https://".concat(e).concat(r).concat(n,"/2/")):"https://".concat(n,"/2/")},f5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fv;return e!==fv&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},mv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rc,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return e!==Rc&&(r=mf[r],n="-"),"https://".concat(r).concat(n).concat(e,"/oauth2/token")};function pv(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,h5)}function m5(t){return new Date(Date.now()+t*1e3)}function gv(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof H1>"u"||typeof window<"u"}function Fd(){return typeof window<"u"}function Ud(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function pl(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function Fl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fl=function(n){return typeof n}:Fl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fl(t)}function p5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ua(t,e)}function y5(t){var e=U1();return function(){var r=da(t),s;if(e){var i=da(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return v5(this,s)}}function v5(t,e){return e&&(Fl(e)==="object"||typeof e=="function")?e:x5(t)}function x5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pf(t){var e=typeof Map=="function"?new Map:void 0;return pf=function(r){if(r===null||!w5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return Ul(r,arguments,da(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),ua(s,r)},pf(t)}function Ul(t,e,n){return U1()?Ul=Reflect.construct:Ul=function(s,i,a){var c=[null];c.push.apply(c,i);var u=Function.bind.apply(s,c),d=new u;return a&&ua(d,a.prototype),d},Ul.apply(null,arguments)}function U1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w5(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function ua(t,e){return ua=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},ua(t,e)}function da(t){return da=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},da(t)}var _5=function(t){g5(n,t);var e=y5(n);function n(r,s,i){var a;return p5(this,n),a=e.call(this,"Response failed with a ".concat(r," code")),a.name="DropboxResponseError",a.status=r,a.headers=s,a.error=i,a}return n}(pf(Error));function b5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var q1=function t(e,n,r){b5(this,t),this.status=e,this.headers=n,this.result=r};function z1(t){return t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}throw new _5(t.status,t.headers,n)})}function Dc(t){return t.ok?t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}return new q1(t.status,t.headers,n)}):z1(t)}function E5(t){return t.ok?new Promise(function(e){gv()?t.blob().then(function(n){return e(n)}):t.buffer().then(function(n){return e(n)})}).then(function(e){var n=JSON.parse(t.headers.get("dropbox-api-result"));return gv()?n.fileBlob=e:n.fileBinary=e,new q1(t.status,t.headers,n)}):z1(t)}function N5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I5(t,e,n){return e&&T5(t.prototype,e),t}var gl,Kr,qd,S5=300*1e3,yv=128,j5=["legacy","offline","online"],A5=["code","token"],k5=["none","user","team"],C5=function(){function t(e){N5(this,t),e=e||{},Fd()?(gl=window.fetch.bind(window),Kr=window.crypto||window.msCrypto):Ud()?(gl=self.fetch.bind(self),Kr=self.crypto):(gl=require("node-fetch"),Kr=require("crypto")),typeof TextEncoder>"u"?qd=require("util").TextEncoder:qd=TextEncoder,this.fetch=e.fetch||gl,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return I5(t,[{key:"setAccessToken",value:function(n){this.accessToken=n}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(n){this.clientId=n}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(n){this.clientSecret=n}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(n){this.refreshToken=n}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(n){this.accessTokenExpiresAt=n}},{key:"setCodeVerifier",value:function(n){this.codeVerifier=n}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var n=this,r=new qd,s=r.encode(this.codeVerifier),i;if(Fd()||Ud())return Kr.subtle.digest("SHA-256",s).then(function(c){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(c)));i=pl(u).substr(0,128),n.codeChallenge=i});var a=Kr.createHash("sha256").update(s).digest();return i=pl(a),this.codeChallenge=i,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var n;if(Fd()||Ud()){var r=new Uint8Array(yv),s=Kr.getRandomValues(r),i=btoa(s);n=pl(i).substr(0,128)}else{var a=Kr.randomBytes(yv);n=pl(a).substr(0,128)}return this.codeVerifier=n,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(n,r){var s=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,f=this.getClientId(),m=f5(this.domain);if(!f)throw new Error("A client id is required. You can set the client id using .setClientId().");if(i!=="code"&&!n)throw new Error("A redirect uri is required.");if(!A5.includes(i))throw new Error("Authorization type must be code or token");if(a&&!j5.includes(a))throw new Error("Token Access Type must be legacy, offline, or online");if(c&&!(c instanceof Array))throw new Error("Scope must be an array of strings");if(!k5.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var g;return i==="code"?g="".concat(m,"?response_type=code&client_id=").concat(f):g="".concat(m,"?response_type=token&client_id=").concat(f),n&&(g+="&redirect_uri=".concat(n)),r&&(g+="&state=".concat(r)),a&&(g+="&token_access_type=".concat(a)),c&&(g+="&scope=".concat(c.join(" "))),u!=="none"&&(g+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return g+="&code_challenge_method=S256",g+="&code_challenge=".concat(s.codeChallenge),g}):Promise.resolve(g)}},{key:"getAccessTokenFromCode",value:function(n,r){var s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");var a=mv(this.domain,this.domainDelimiter);if(a+="?grant_type=authorization_code",a+="&code=".concat(r),a+="&client_id=".concat(s),i)a+="&client_secret=".concat(i);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");a+="&code_verifier=".concat(this.codeVerifier)}n&&(a+="&redirect_uri=".concat(n));var c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(a,c).then(function(u){return Dc(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var n=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+S5)>=this.getAccessTokenExpiresAt(),s=!this.getAccessToken();return(r||s)&&n?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var a=mv(this.domain,this.domainDelimiter),c={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:s,refresh_token:this.getRefreshToken()};i&&(u.client_secret=i),r&&(u.scope=r.join(" ")),c.body=u}else a+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),a+="&client_id=".concat(s),i&&(a+="&client_secret=".concat(i)),r&&(a+="&scope=".concat(r.join(" ")));return this.fetch(a,c).then(function(d){return Dc(d)}).then(function(d){n.setAccessToken(d.result.access_token),n.setAccessTokenExpiresAt(m5(d.result.expires_in))})}}]),t}();function P5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D5(t,e,n){return e&&R5(t.prototype,e),t}var L5=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,gf=function(){function t(e){P5(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new C5(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,I)}return D5(t,[{key:"request",value:function(n,r,s,i,a){switch(a){case a5:return this.rpcRequest(n,r,s,i);case c5:return this.downloadRequest(n,r,s,i);case l5:return this.uploadRequest(n,r,s,i);default:throw new Error("Invalid request style: ".concat(a))}}},{key:"rpcRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(c.headers["Content-Type"]="application/json"),a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(Od(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return Dc(c)})}},{key:"downloadRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",headers:{"Dropbox-API-Arg":pv(r)}};return a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(Od(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return E5(c)})}},{key:"uploadRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c=r.contents;delete r.contents;var u={body:c,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":pv(r)}};return a.setAuthHeaders(s,u),a.setCommonHeaders(u),u}).then(function(c){return a.fetch(Od(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return Dc(c)})}},{key:"setAuthHeaders",value:function(n,r){if(n.split(",").length>1){var s=n.replace(" ","").split(",");s.includes(Md)&&this.auth.getAccessToken()?n=Md:s.includes(Vd)&&this.auth.getAccessToken()?n=Vd:s.includes(Ld)&&(n=Ld)}switch(n){case Ld:if(this.auth.clientId&&this.auth.clientSecret){var i=L5("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(i)}break;case Vd:case Md:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case u5:case d5:break;default:throw new Error("Unhandled auth type: ".concat(n))}}},{key:"setCommonHeaders",value:function(n){var r=this;if(this.selectUser&&(n.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(n.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(n.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var s=Object.keys(this.customHeaders);s.forEach(function(i){n.headers[i]=r.customHeaders[i]})}}}]),t}();const M5="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function B1({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:n=!1}){const[r,s]=C.useState(null),[i,a]=C.useState(!1),[c,u]=C.useState(null),d=m=>{m.target.files&&m.target.files.length>0&&s(m.target.files[0])},f=async()=>{if(!r)return;a(!0);const m=new gf({accessToken:M5});let g=!1,_="";try{const S=await m.filesUpload({path:"/"+encodeURIComponent(r.name),contents:r,autorename:!0});g=!0,_=S.result.path_display||S.result.path_lower||"/"+r.name,console.log("Upload réussi!",S);try{const R=(await m.sharingCreateSharedLinkWithSettings({path:_})).result.url.replace("?dl=0","?raw=1");u(R),t&&t(R)}catch(k){console.error("Erreur lors de la création du lien partageable:",k),alert("Le fichier a été uploadé avec succès, mais la création du lien a échoué.")}}catch(S){console.error("Erreur lors de l'upload:",S),S instanceof Error?alert(`Erreur lors de l'upload : ${S.message}
Type: ${S.constructor.name}`):alert(`Erreur lors de l'upload : ${String(S)}`)}if(a(!1),g)return alert(`Fichier "${r.name}" uploadé avec succès sur Dropbox!`)};return o.jsxs("div",{className:n?"flex items-center":"space-y-3",children:[o.jsx("div",{className:n?"flex-grow mr-2":"mb-2",children:o.jsx("input",{type:"file",onChange:d,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),o.jsx("button",{onClick:f,disabled:!r||i,className:`${n?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:i?"Envoi...":e}),c&&!n&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})})]})}const vv="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function V5({onSelect:t,showTitle:e=!0}){const[n,r]=C.useState([]),[s,i]=C.useState(!0),[a,c]=C.useState(null),[u,d]=C.useState(""),[f,m]=C.useState([]),[g,_]=C.useState(""),S=C.useCallback(V=>{var y;const N=((y=V.split(".").pop())==null?void 0:y.toLowerCase())||"";return["pdf"].includes(N)?"pdf":["doc","docx"].includes(N)?"docx":["xls","xlsx"].includes(N)?"xlsx":["ppt","pptx"].includes(N)?"pptx":["txt"].includes(N)?"txt":["jpg","jpeg","png","gif","svg","webp"].includes(N)?"image":["mp4","webm","mkv","avi","mov"].includes(N)?"video":["mp3","wav","ogg"].includes(N)?"audio":["zip","rar","7z","tar","gz"].includes(N)?"zip":"link"},[]),k=V=>{if(V===0)return"0 Bytes";const N=1024,y=["Bytes","KB","MB","GB","TB"],v=Math.floor(Math.log(V)/Math.log(N));return parseFloat((V/Math.pow(N,v)).toFixed(2))+" "+y[v]},R=C.useCallback(async(V="")=>{i(!0),c(null);try{const y=await new gf({accessToken:vv,fetch}).filesListFolder({path:V,include_deleted:!1}),v=[];for(const x of y.result.entries)if(x[".tag"]==="file"||x[".tag"]==="folder"){const A=x[".tag"]==="folder",P={id:x.id||x.path_lower||"",name:x.name,path:x.path_lower||"",fileType:A?"folder":S(x.name),size:A?0:x.size||0,isFolder:A};v.push(P)}v.sort((x,A)=>x.isFolder&&!A.isFolder?-1:!x.isFolder&&A.isFolder?1:x.name.localeCompare(A.name)),r(v),d(V)}catch(N){console.error("Erreur lors du chargement des fichiers Dropbox:",N),c("Impossible de charger les fichiers depuis Dropbox. Veuillez réessayer.")}finally{i(!1)}},[r,d,i,c,S]),E=async V=>{var N;if(V.url)return V.url;try{const y=new gf({accessToken:vv,fetch});let v;try{v=await y.sharingCreateSharedLinkWithSettings({path:V.path})}catch(A){const P=A;if(P.status===409&&((N=P.error)!=null&&N.shared_link_already_exists))try{const j=await y.sharingListSharedLinks({path:V.path,direct_only:!0});if(j.result.links&&j.result.links.length>0)v={result:j.result.links[0]};else throw new Error("Aucun lien partagé trouvé")}catch(j){throw console.error("Erreur lors de la récupération des liens existants:",j),j}else throw P}const x=v.result.url.replace("?dl=0","?raw=1");return r(A=>A.map(P=>P.id===V.id?{...P,url:x}:P)),x}catch(y){return console.error("Erreur lors de la création du lien partageable:",y),c("Impossible de créer un lien pour ce fichier. Vérifiez les permissions dans Dropbox."),null}},b=V=>{m([...f,u]),R(V.path)},T=async V=>{if(V.isFolder){b(V);return}const N=await E(V);N&&t(N,V.name,V.fileType)},L=()=>{if(f.length>0){const V=f[f.length-1];m(f.slice(0,-1)),R(V)}},D=g?n.filter(V=>V.name.toLowerCase().includes(g.toLowerCase())):n;return C.useEffect(()=>{R()},[R]),o.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e&&o.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fichiers Dropbox"})}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[o.jsx("button",{onClick:L,disabled:f.length===0,className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),o.jsx("input",{type:"text",placeholder:"Rechercher des fichiers...",value:g,onChange:V=>_(V.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("button",{onClick:()=>R(u),className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100",title:"Actualiser",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),o.jsx("p",{className:"text-sm text-gray-500 mb-3",children:u?`Dossier: ${u}`:"Dossier racine"}),a&&o.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4",children:[o.jsx("p",{children:a}),o.jsx("p",{className:"text-sm mt-1",children:"Assurez-vous que le token d'accès Dropbox est configuré correctement dans vos variables d'environnement."}),o.jsx("button",{onClick:()=>R(u),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 rounded-md text-sm font-medium transition-colors",children:"Réessayer"})]}),s?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):D.length>0?o.jsx("div",{className:"max-h-80 overflow-y-auto",children:o.jsx("ul",{className:"space-y-1",children:D.map(V=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>T(V),className:"w-full flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[o.jsx("div",{className:"w-10 h-10 flex items-center justify-center mr-3",children:V.isFolder?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}):V.fileType==="pdf"?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}):V.fileType==="image"?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.name}),!V.isFolder&&o.jsx("div",{className:"text-xs text-gray-500",children:k(V.size)})]})]})},V.id))})}):o.jsx("div",{className:"py-4 text-center text-gray-500",children:"Aucun fichier trouvé."})]})]})}const O5=()=>{const[t]=qw(),e=gn(),{currentUser:n}=Et(),{resources:r,addResource:s,updateResource:i,deleteResource:a}=Vi(),c=t.get("new")==="resource",u=t.get("edit"),[d,f]=C.useState(""),[m,g]=C.useState(""),[_,S]=C.useState("post-cps"),[k,R]=C.useState(""),[E,b]=C.useState(""),[T,L]=C.useState("pdf"),[D,V]=C.useState(!1),[N,y]=C.useState(!1),[v,x]=C.useState(""),A=[...new Set(r.map(H=>H.category))];C.useEffect(()=>{if(u){const H=r.find(B=>B.id===u);H&&(f(H.title),g(H.description),S(H.phase),R(H.category),b(H.fileUrl),L(H.fileType))}else c&&(f(""),g(""),S("post-cps"),R(""),b(""),L("pdf"))},[u,c,r]);const P=H=>{H.preventDefault(),u?(i(u,{title:d,description:m,phase:_,category:k,fileUrl:E,fileType:T}),Dn({type:"Modification",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})):(s({title:d,description:m,phase:_,category:k,fileUrl:E,fileType:T,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Dn({type:"Ajout",target:"Ressource",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})),e("/admin")},j=()=>{V(!0)},le=()=>{u&&(a(u),Dn({type:"Suppression",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}}),e("/admin"))},pe={"post-cps":r.filter(H=>H.phase==="post-cps"),"during-process":r.filter(H=>H.phase==="during-process"),"pre-arrival":r.filter(H=>H.phase==="pre-arrival")},$e=H=>{switch(H){case"pdf":case"doc":return o.jsx(zn,{className:"w-5 h-5"});case"image":return o.jsx(C4,{className:"w-5 h-5"});case"link":return o.jsx(F4,{className:"w-5 h-5"});default:return o.jsx(P4,{className:"w-5 h-5"})}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:c?"Ajouter une nouvelle ressource":"Modifier la ressource"}),o.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[o.jsx(bs,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsx("form",{onSubmit:P,className:"space-y-7",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),o.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:H=>f(H.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),o.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:m,onChange:H=>g(H.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:_,onChange:H=>S(H.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:k,onChange:H=>R(H.target.value),required:!0}),o.jsx("datalist",{id:"categories",children:A.map((H,B)=>o.jsx("option",{value:H},B))})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),o.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:T,onChange:H=>L(H.target.value),required:!0,children:[o.jsxs("optgroup",{label:"Documents",children:[o.jsx("option",{value:"pdf",children:"PDF"}),o.jsx("option",{value:"doc",children:"Word (.doc)"}),o.jsx("option",{value:"docx",children:"Word (.docx)"}),o.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),o.jsxs("optgroup",{label:"Tableurs",children:[o.jsx("option",{value:"xls",children:"Excel (.xls)"}),o.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),o.jsxs("optgroup",{label:"Présentations",children:[o.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),o.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),o.jsxs("optgroup",{label:"Médias",children:[o.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),o.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),o.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),o.jsxs("optgroup",{label:"Autres",children:[o.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),o.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:T==="link"?"URL du lien":"URL du fichier"}),T!=="link"&&o.jsxs("div",{className:"mt-3 mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50/30",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(W4,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),o.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),o.jsx(B1,{onSuccess:H=>b(H),buttonText:"Uploader le fichier vers Dropbox"})]}),o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{className:"w-full flex",children:[o.jsx("input",{type:"url",id:"fileUrl",className:"mt-2 block w-full rounded-l-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:H=>b(H.target.value),placeholder:T==="link"?"https://example.com":"https://dropbox.com/s/...",required:!0}),o.jsx("button",{type:"button",onClick:()=>y(!0),className:"mt-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 border border-l-0 border-blue-200 rounded-r-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors",title:"Parcourir les fichiers existants",children:o.jsx(D4,{className:"h-5 w-5 text-blue-600"})})]})}),v&&o.jsxs("p",{className:"mt-1 text-xs text-blue-600 font-medium",children:["Fichier sélectionné: ",v]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:T==="link"?"Entrez l'URL complète du site web externe.":"URL générée automatiquement après upload ou entrez manuellement une URL Dropbox/Google Drive."})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:u&&o.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[o.jsx(Cc,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(hf,{className:"mr-2 h-4 w-4"}),c?"Ajouter":"Enregistrer"]})]})]})]})})})}),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),o.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(ls,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(pe["post-cps"])&&pe["post-cps"].length>0?o.jsx("ul",{className:"space-y-2",children:pe["post-cps"].map(H=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${H.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===H.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:$e(H.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:H.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:H.category})]})]})},H.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(pe["during-process"])&&pe["during-process"].length>0?o.jsx("ul",{className:"space-y-2",children:pe["during-process"].map(H=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${H.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===H.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:$e(H.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:H.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:H.category})]})]})},H.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(pe["pre-arrival"])&&pe["pre-arrival"].length>0?o.jsx("ul",{className:"space-y-2",children:pe["pre-arrival"].map(H=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${H.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===H.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:$e(H.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:H.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:H.category})]})]})},H.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),o.jsx(_p,{isOpen:D,onClose:()=>V(!1),onConfirm:le,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer la ressource "${d}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"}),N&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:o.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sélectionner un fichier Dropbox"}),o.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:o.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"flex-grow overflow-y-auto",children:o.jsx(V5,{onSelect:(H,B,W)=>{b(H),x(B),L(W==="pdf"?"pdf":W==="docx"?"docx":W==="xlsx"?"xlsx":W==="pptx"?"pptx":W==="txt"?"txt":W==="image"?"image":W==="video"?"video":W==="audio"?"audio":W==="zip"?"zip":"link"),y(!1)},showTitle:!1})}),o.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:o.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors",children:"Annuler"})})]})})]})},$1=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s})=>{const[i,a]=C.useState(""),c=u=>{u.preventDefault(),n(i)};return Mc.useEffect(()=>{t||a("")},[t]),t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[o.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),o.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),o.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[o.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:i,onChange:u=>a(u.target.value),disabled:r,autoFocus:!0}),s&&o.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||i==="",children:"Valider"})]})]})}):null},F5=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState([]),[f,m]=C.useState(!0),[g,_]=C.useState(null),{currentUser:S}=Et(),k=gn(),R=async()=>{m(!0),_(null);try{const T=await _n(Ue(ue,"users")),L=[];T.forEach(D=>{L.push(D.data())}),d(L)}catch{_("Erreur lors du chargement des utilisateurs.")}finally{m(!1)}};C.useEffect(()=>{R()},[]);const E=async(T,L)=>{e(!0),c({uid:T,isAdmin:L}),i(null)},b=async T=>{if(!a)return;if(r(!0),i(null),T!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}const L=u.find(D=>D.uid===a.uid);if(L!=null&&L.isSuperAdmin&&L.uid!==(S==null?void 0:S.uid)){i("Impossible de modifier le rôle d'un admin principal."),r(!1);return}try{await di(vt(ue,"users",a.uid),{isAdmin:!a.isAdmin}),d(D=>D.map(V=>V.uid===a.uid?{...V,isAdmin:!a.isAdmin}:V)),e(!1),c(null)}catch{i("Erreur lors de la mise à jour du statut administrateur.")}finally{r(!1)}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>k("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(bs,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:f?o.jsx("div",{children:"Chargement..."}):g?o.jsx("div",{className:"text-red-600",children:g}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2",children:"Nom"}),o.jsx("th",{className:"px-4 py-2",children:"Email"}),o.jsx("th",{className:"px-4 py-2",children:"Admin"}),o.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(T=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>k(`/admin/users/${T.uid}`),children:[T.photoURL?o.jsx("img",{src:T.photoURL,alt:T.displayName||T.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):o.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:o.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),T.displayName||T.email,T.isSuperAdmin&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),T.uid===(S==null?void 0:S.uid)&&o.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),o.jsx("td",{className:"px-4 py-2",children:T.email}),o.jsxs("td",{className:"px-4 py-2",children:[T.isAdmin?o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(wp,{className:"w-4 h-4 mr-1"})," Admin"]}):o.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),T.isSuperAdmin&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),o.jsxs("td",{className:"px-4 py-2",children:[T.uid!==(S==null?void 0:S.uid)&&!T.isSuperAdmin&&o.jsx("button",{onClick:()=>E(T.uid,T.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${T.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:T.isAdmin?o.jsxs(o.Fragment,{children:[o.jsx(V1,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):o.jsxs(o.Fragment,{children:[o.jsx(O1,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),T.uid!==(S==null?void 0:S.uid)&&T.isSuperAdmin&&o.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})]},T.uid))})]})})}),o.jsx($1,{open:t,onClose:()=>{e(!1),c(null),i(null)},onSubmit:b,loading:n,error:s})]})},U5=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(!1),{uid:u}=NT(),d=gn(),{currentUser:f}=Et(),[m,g]=C.useState(null),[_,S]=C.useState(!0),[k,R]=C.useState(null),[E,b]=C.useState(!1);C.useEffect(()=>{u&&(async()=>{S(!0),R(null);try{const x=vt(ue,"users",u),A=await fp(x);A.exists()?g(A.data()):R("Utilisateur introuvable.")}catch{R("Erreur lors du chargement du profil utilisateur.")}finally{S(!1)}})()},[u]);const T=async()=>{e(!0),i(null)},L=async v=>{if(m){if(r(!0),i(null),v!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}b(!0);try{await di(vt(ue,"users",m.uid),{isAdmin:!m.isAdmin}),g({...m,isAdmin:!m.isAdmin}),e(!1)}catch{i("Erreur lors de la mise à jour du statut administrateur.")}finally{b(!1),r(!1)}}},D=()=>{if(m){if(m.uid===(f==null?void 0:f.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}c(!0)}},V=async()=>{if(m){b(!0);try{await Ol(vt(ue,"users",m.uid)),d("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{b(!1)}}},N=v=>{m&&g({...m,[v.target.name]:v.target.value})},y=async()=>{if(m){b(!0);try{await di(vt(ue,"users",m.uid),{displayName:m.displayName,photoURL:m.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{b(!1)}}};return _?o.jsx("div",{className:"p-8",children:"Chargement..."}):k?o.jsx("div",{className:"p-8 text-red-600",children:k}):m?o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(bs,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),o.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[o.jsx("div",{className:"relative mb-6",children:m.photoURL?o.jsx("img",{src:m.photoURL,alt:m.displayName||m.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):o.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:o.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),o.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(m==null?void 0:m.displayName)||"",onChange:N,disabled:E||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid)}),(m==null?void 0:m.isSuperAdmin)&&o.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),o.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(m==null?void 0:m.photoURL)||"",onChange:N,disabled:E}),o.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",m.email]}),o.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",m.emailVerified?"Oui":"Non"]}),o.jsxs("div",{className:"mb-6 w-full text-center",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",m.isAdmin?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[o.jsx(wp,{className:"w-5 h-5 mr-1"})," Admin"]}):o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[m.uid!==(f==null?void 0:f.uid)&&o.jsx("button",{onClick:T,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${m.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:E||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid),children:m.isAdmin?o.jsxs(o.Fragment,{children:[o.jsx(V1,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):o.jsxs(o.Fragment,{children:[o.jsx(O1,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),m.uid!==(f==null?void 0:f.uid)&&o.jsxs("button",{onClick:D,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:E||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid),children:[o.jsx(Cc,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),o.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:y,disabled:E||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid),title:m!=null&&m.isSuperAdmin&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),o.jsx($1,{open:t,onClose:()=>{e(!1),i(null)},onSubmit:L,loading:n,error:s}),o.jsx(_p,{isOpen:a,onClose:()=>c(!1),onConfirm:V,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer l'utilisateur ${(m==null?void 0:m.displayName)||(m==null?void 0:m.email)} ? Cette action est irréversible.`,confirmButtonText:"Supprimer définitivement",type:"danger"})]}):null},q5=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(""),[a,c]=C.useState("all"),[u,d]=C.useState("all"),[f,m]=C.useState("all"),[g,_]=C.useState(!1),[S,k]=C.useState(null),[R,E]=C.useState(!0),b=20,T=y=>{const v=new Date(y);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v)},L=()=>{const y=new Date;let v=null;switch(f){case"today":v=new Date(y.setHours(0,0,0,0));break;case"week":v=new Date,v.setDate(y.getDate()-7);break;case"month":v=new Date,v.setMonth(y.getMonth()-1);break;default:v=null}return v},D=async(y=!0)=>{try{y?(r(!0),k(null)):_(!0);let v=yo(Ue(ue,"adminActivityLog"),i1("date","desc"));const x=L();x&&(v=yo(v,GP("date",">=",x.toISOString()))),v=yo(v,uf(b));const A=await _n(v);E(A.docs.length===b),A.docs.length>0?k(A.docs[A.docs.length-1]):(k(null),E(!1));let j=A.docs.map(le=>({id:le.id,...le.data()}));if(a!=="all"&&(j=j.filter(le=>le.type===a)),u!=="all"&&(j=j.filter(le=>le.target===u)),s){const le=s.toLowerCase();j=j.filter(pe=>{var $e;return(($e=pe.user)==null?void 0:$e.toLowerCase().includes(le))||pe.target.toLowerCase().includes(le)||pe.type.toLowerCase().includes(le)||pe.details&&JSON.stringify(pe.details).toLowerCase().includes(le)})}e(y?j:le=>[...le,...j])}catch(v){console.error("Error fetching activities:",v)}finally{r(!1),_(!1)}};C.useEffect(()=>{D()},[]),C.useEffect(()=>{D()},[a,u,f]);const V=y=>{let v="bg-blue-100 text-blue-800";switch(y.toLowerCase()){case"ajout":v="bg-green-100 text-green-800";break;case"suppression":v="bg-red-100 text-red-800";break;case"modification":v="bg-yellow-100 text-yellow-800";break}return o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:y})},N=y=>{let v="bg-gray-100 text-gray-800";switch(y.toLowerCase()){case"ressource":v="bg-purple-100 text-purple-800";break;case"section":v="bg-indigo-100 text-indigo-800";break;case"faq":v="bg-blue-100 text-blue-800";break;case"utilisateur":v="bg-pink-100 text-pink-800";break}return o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:y})};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(J,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:o.jsx(bs,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),o.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(kc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:s,onChange:y=>i(y.target.value)})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:y=>c(y.target.value),children:[o.jsx("option",{value:"all",children:"Toutes les actions"}),o.jsx("option",{value:"Ajout",children:"Ajout"}),o.jsx("option",{value:"Modification",children:"Modification"}),o.jsx("option",{value:"Suppression",children:"Suppression"})]})}),o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:y=>d(y.target.value),children:[o.jsx("option",{value:"all",children:"Toutes les cibles"}),o.jsx("option",{value:"Ressource",children:"Ressources"}),o.jsx("option",{value:"Section",children:"Sections"}),o.jsx("option",{value:"FAQ",children:"FAQ"}),o.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:y=>m(y.target.value),children:[o.jsx("option",{value:"all",children:"Toute période"}),o.jsx("option",{value:"today",children:"Aujourd'hui"}),o.jsx("option",{value:"week",children:"7 derniers jours"}),o.jsx("option",{value:"month",children:"30 derniers jours"})]})}),o.jsx("button",{onClick:()=>D(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o.jsx(H4,{className:"h-5 w-5"})})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),n?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?o.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):o.jsx("div",{className:"divide-y divide-gray-200",children:t.map(y=>o.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[o.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[V(y.type),o.jsx("span",{className:"mx-2",children:"•"}),N(y.target)]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(A4,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:T(y.date)})]})]}),o.jsx("div",{className:"flex items-start",children:y.user&&o.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[o.jsx(ff,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.user})]})}),y.details&&o.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[o.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),o.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(y.details).map(([v,x])=>o.jsxs("div",{className:"flex",children:[o.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[v,":"]}),o.jsx("dd",{className:"text-gray-900",children:typeof x=="object"?JSON.stringify(x):String(x)})]},v))})]}),y.targetId&&o.jsxs("div",{className:"mt-1 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",y.targetId]})]},y.id))}),R&&!n&&o.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:o.jsx("button",{onClick:()=>D(!1),disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},z5=()=>{const t=gn(),{currentUser:e}=Et();return o.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(bs,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&o.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:o.jsxs("p",{className:"text-blue-800",children:[o.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),o.jsx("li",{children:o.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),o.jsx("li",{children:o.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),o.jsx("li",{children:o.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),o.jsx("li",{children:o.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"5. Gestion des utilisateurs"})}),o.jsx("li",{children:o.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"6. Journal d'activité"})}),o.jsx("li",{children:o.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"7. Conseils et bonnes pratiques"})})]})]}),o.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx($4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),o.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),o.jsx("li",{children:"Nombre de sections du guide"}),o.jsx("li",{children:"Nombre de questions FAQ"}),o.jsx("li",{children:"Nombre de ressources disponibles"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),o.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),o.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(I4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),o.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),o.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),o.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),o.jsx("li",{children:"Modifiez les informations dans le formulaire"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),o.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),o.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),o.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),o.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),o.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(L1,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"La gestion des FAQ vous permet de répondre aux questions fréquemment posées par les utilisateurs. Les questions peuvent être soumises par les utilisateurs ou créées directement par les administrateurs."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Création et édition de questions/réponses"}),o.jsx("li",{children:"Approbation des questions soumises par les utilisateurs"}),o.jsx("li",{children:"Catégorisation des questions par thème"}),o.jsx("li",{children:"Organisation des FAQ par phase du processus d'immigration"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Traitement des questions utilisateurs:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Les questions soumises apparaissent dans la liste avec un statut "En attente de réponse"'}),o.jsx("li",{children:"Pour répondre, sélectionnez la question dans la liste"}),o.jsx("li",{children:"Rédigez votre réponse dans le champ prévu"}),o.jsx("li",{children:"Assignez une catégorie appropriée"}),o.jsx("li",{children:'Cochez "Approuvé" si la question doit être visible publiquement'}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour publier votre réponse'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création manuelle de FAQ:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:'Vous pouvez également créer des questions manuellement en cliquant sur "Ajouter une FAQ" et en remplissant tous les champs du formulaire. Cela est utile pour anticiper les questions courantes que les utilisateurs pourraient avoir.'}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Répondez de manière claire et concise"}),o.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),o.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),o.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),o.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),o.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(zn,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire de ressources vous permet d'ajouter des documents, liens et autres contenus utiles que les utilisateurs pourront consulter. Ces ressources peuvent être associées à des sections spécifiques du guide."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types de ressources supportés:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Documents (PDF, Word, Excel, PowerPoint)"}),o.jsx("li",{children:"Images"}),o.jsx("li",{children:"Liens vers des sites web externes"}),o.jsx("li",{children:"Fichiers audio et vidéo"}),o.jsx("li",{children:"Archives ZIP"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Ajout d'une ressource:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Cliquez sur "Ajouter une ressource"'}),o.jsx("li",{children:"Remplissez les champs du formulaire (titre, description, catégorie, phase)"}),o.jsx("li",{children:"Sélectionnez le type de ressource"}),o.jsx("li",{children:"Téléchargez le fichier via Dropbox ou indiquez l'URL pour un lien"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour ajouter la ressource'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation des ressources:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Les ressources sont organisées par phase du processus d'immigration (Post-CPS, Pendant les démarches, Pré-arrivée) et par catégorie. Cela facilite leur découverte par les utilisateurs."}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Important:"})," Assurez-vous que tous les fichiers téléchargés sont exempts de virus et respectent les droits d'auteur. Privilégiez les documents officiels ou les ressources libres de droits."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Conseils pour la gestion des ressources:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Utilisez des titres descriptifs pour faciliter la recherche"}),o.jsx("li",{children:"Incluez la date de publication/mise à jour dans la description"}),o.jsx("li",{children:"Vérifiez régulièrement que les liens externes fonctionnent toujours"}),o.jsx("li",{children:"Mettez à jour ou supprimez les ressources obsolètes"}),o.jsx("li",{children:"Utilisez des catégories cohérentes pour faciliter la navigation"})]})]})]}),o.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Pc,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestion des utilisateurs"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),o.jsx("li",{children:"Consultation des profils utilisateurs"}),o.jsx("li",{children:"Attribution/retrait des droits d'administration"}),o.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),o.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),o.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),o.jsx("li",{children:"Confirmez l'action"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),o.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),o.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),o.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),o.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),o.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(E4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Journal d'activité"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Connexions et inscriptions"}),o.jsx("li",{children:"Création, modification et suppression de contenu"}),o.jsx("li",{children:"Ajout et modification de ressources"}),o.jsx("li",{children:"Gestion des FAQ"}),o.jsx("li",{children:"Modifications des droits utilisateurs"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Type d'activité"}),o.jsx("li",{children:"Utilisateur (email)"}),o.jsx("li",{children:"Période (date de début et date de fin)"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Suivre les modifications apportées au contenu"}),o.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),o.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),o.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),o.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),o.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),o.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),o.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(M1,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),o.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),o.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),o.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),o.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),o.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),o.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),o.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),o.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),o.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),o.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),o.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(J,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(bs,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},B5=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(null),[s,i]=C.useState(!0),[a,c]=C.useState(""),[u,d]=C.useState("test1234"),f=async()=>{try{(await _n(Ue(ue,"test"))).empty?(await Mn(Ue(ue,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(g){const _=g;console.error("Erreur Firestore:",_),e(`Erreur Firestore: ${_.message}`)}},m=async()=>{try{const g=await T_(ut,a,u);r(g.user),await Gh(ut,a,u),e(_=>_+`
Authentification réussie!`)}catch(g){const _=g;if(_.code==="auth/email-already-in-use"){const S=await Gh(ut,a,u);r(S.user),e(k=>k+`
Connexion réussie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",g),e(S=>S+`
Erreur d'authentification: ${_.message}`)}};return C.useEffect(()=>{const g=ut.onAuthStateChanged(_=>{r(_),_&&c(_.email||""),i(!1)});return()=>g()},[]),s?o.jsx("div",{className:"p-4",children:"Chargement..."}):o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),o.jsxs("p",{children:["Utilisateur: ",n?n.email:"Non connecté"]}),o.jsxs("p",{children:["UID: ",(n==null?void 0:n.uid)||"N/A"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),o.jsx("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),o.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Mn(Ue(ue,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await Mn(Ue(ue,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await Mn(Ue(ue,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Mn(Ue(ue,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(g){e("Erreur lors de l'initialisation : "+g.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2",children:"Email:"}),o.jsx("input",{type:"email",value:a,onChange:g=>c(g.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),o.jsx("input",{type:"password",value:u,onChange:g=>d(g.target.value),className:"border p-2 w-full max-w-md"})]}),o.jsx("button",{onClick:m,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!a||!u,children:n?"Se connecter":"Créer un compte"})]}),o.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),o.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Upload Dropbox"}),o.jsx(B1,{})]})]})},$5=()=>o.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:o.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),o.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),o.jsxs(J,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[o.jsx(V4,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),H5=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s,label:i})=>{const[a,c]=C.useState(""),u=d=>{d.preventDefault(),n(a)};return Mc.useEffect(()=>{t||c("")},[t]),t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[o.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),o.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:i||"Confirmez avec votre mot de passe"}),o.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[o.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:a,onChange:d=>c(d.target.value),disabled:r,autoFocus:!0}),s&&o.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||a==="",children:"Valider"})]})]})}):null},W5=()=>{var H,B;const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState(null),[f,m]=C.useState(""),{currentUser:g}=Et(),[_,S]=C.useState((g==null?void 0:g.displayName)||""),[k,R]=C.useState((g==null?void 0:g.photoURL)||""),[E]=C.useState((g==null?void 0:g.email)||""),[b,T]=C.useState(""),[L,D]=C.useState(!1),[V,N]=C.useState(null),[y,v]=C.useState(null),[x,A]=C.useState(null);if(!g)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:o.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const P=ut.currentUser,j=P==null?void 0:P.providerData.some(W=>W.providerId==="password"),le=async W=>{if(W.preventDefault(),N(null),v(null),!j){A("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:_,photoURL:k}),c("profile"),e(!0)},pe=async W=>{if(W.preventDefault(),N(null),v(null),!j){A("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}m(b),c("password"),e(!0)},$e=async W=>{const X=ut.currentUser;if(!X)return;r(!0),i(null);const he=js.credential(X.email||"",W);try{await Ij(X,he),a==="profile"&&u?(await I_(X,{displayName:u.displayName,photoURL:u.photoURL}),S(u.displayName),R(u.photoURL),v("Profil mis à jour !")):a==="password"&&f&&(await jj(X,f),T(""),v("Mot de passe mis à jour !")),e(!1),c(null),d(null),m("")}catch{i("Mot de passe incorrect.")}finally{r(!1),D(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[o.jsxs("div",{className:"relative mb-5",children:[k?o.jsx("img",{src:k,alt:_||E,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):o.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((H=_==null?void 0:_.charAt(0))==null?void 0:H.toUpperCase())||((B=E==null?void 0:E.charAt(0))==null?void 0:B.toUpperCase())}),(g==null?void 0:g.emailVerified)&&o.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(g==null?void 0:g.isAdmin)&&o.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[o.jsx(wp,{className:"w-4 h-4"})," Admin"]})]}),o.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:_||E}),o.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:E}),o.jsxs("form",{onSubmit:le,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),o.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:_,onChange:W=>S(W.target.value),placeholder:"Nom affiché",disabled:L})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),o.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:k,onChange:W=>R(W.target.value),placeholder:"URL de la photo",disabled:L})]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:L,children:"Sauvegarder le profil"})]}),o.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),j?o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:pe,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),o.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:b,onChange:W=>T(W.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:L}),o.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:L||b.length<6,children:"Mettre à jour le mot de passe"})]}),o.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),v(null);try{await Wh(ut,E),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{N("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):o.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[o.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),o.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),v(null);try{await Wh(ut,E),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{N("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(V||y)&&o.jsx("div",{className:`mt-6 text-center text-sm font-medium ${V?"text-red-600":"text-green-600"}`,children:V||y}),x&&o.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:x}),o.jsx(H5,{open:t,onClose:()=>{e(!1),i(null),c(null)},onSubmit:$e,loading:n,error:s,label:a==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},G5=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,c]=C.useState(!1),u=gn(),d=async f=>{f.preventDefault(),i(""),r(""),c(!0);try{await Wh(ut,t),r("Un email de réinitialisation a été envoyé.")}catch{i("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{c(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&o.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:n}),s&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:s}),o.jsxs("form",{className:"space-y-6",onSubmit:d,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>e(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})};function Q5(){return o.jsx(x4,{children:o.jsx(w4,{children:o.jsx(GT,{basename:"/Esig-prep-guide",children:o.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[o.jsx(K4,{}),o.jsx("main",{className:"flex-grow",children:o.jsxs(FT,{children:[o.jsx(He,{path:"/",element:o.jsx(J4,{})}),o.jsx(He,{path:"/login",element:o.jsx(X4,{})}),o.jsx(He,{path:"/register",element:o.jsx(Z4,{})}),o.jsx(He,{path:"/reset-password",element:o.jsx(G5,{})}),o.jsx(He,{path:"/test-firebase",element:o.jsx(B5,{})}),o.jsx(He,{path:"/dashboard",element:o.jsx(ml,{children:o.jsx(e5,{})})}),o.jsx(He,{path:"/resources",element:o.jsx(ml,{children:o.jsx(t5,{})})}),o.jsx(He,{path:"/faq",element:o.jsx(ml,{children:o.jsx(n5,{})})}),o.jsx(He,{path:"/profile",element:o.jsx(ml,{children:o.jsx(W5,{})})}),o.jsx(He,{path:"/admin",element:o.jsx(Qr,{children:o.jsx(i5,{})})}),o.jsx(He,{path:"/admin/content",element:o.jsx(Qr,{children:o.jsx(o5,{})})}),o.jsx(He,{path:"/admin/resources",element:o.jsx(Qr,{children:o.jsx(O5,{})})}),o.jsx(He,{path:"/admin/users",element:o.jsx(Qr,{children:o.jsx(F5,{})})}),o.jsx(He,{path:"/admin/users/:uid",element:o.jsx(Qr,{children:o.jsx(U5,{})})}),o.jsx(He,{path:"/admin/activity",element:o.jsx(Qr,{children:o.jsx(q5,{})})}),o.jsx(He,{path:"/admin/tutorial",element:o.jsx(Qr,{children:o.jsx(z5,{})})}),o.jsx(He,{path:"*",element:o.jsx($5,{})})]})}),o.jsx(Y4,{})]})})})})}Cw(document.getElementById("root")).render(o.jsx(C.StrictMode,{children:o.jsx(Q5,{})}))});export default K5();
